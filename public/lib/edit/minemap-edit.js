!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).edit=t()}(function(){return function r(i,o,s){function a(e,t){if(!o[e]){if(!i[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=o[e]={exports:{}},i[e][0].call(n.exports,function(t){return a(i[e][1][t]||t)},n,n.exports,r,i,o,s)}return o[e].exports}for(var u="function"==typeof require&&require,t=0;t<s.length;t++)a(s[t]);return a}({1:[function(t,e,n){function r(t){if(!(this instanceof r))return new r(t);this._bbox=t||[1/0,1/0,-1/0,-1/0],this._valid=!!t}(e.exports=r).prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},r.prototype.equals=function(t){t=t instanceof r?t.bbox():t;return this._bbox[0]==t[0]&&this._bbox[1]==t[1]&&this._bbox[2]==t[2]&&this._bbox[3]==t[3]},r.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},r.prototype.union=function(t){return this._valid=!0,t=t instanceof r?t.bbox():t,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},r.prototype.bbox=function(){return this._valid?this._bbox:null},r.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var e=t[0],t=t[1];return this._bbox[0]<=e&&this._bbox[1]<=t&&this._bbox[2]>=e&&this._bbox[3]>=t},r.prototype.intersect=function(t){if(!this._valid)return null;t=t instanceof r?t.bbox():t;return!(this._bbox[0]>t[2]||this._bbox[2]<t[0]||this._bbox[3]<t[1]||this._bbox[1]>t[3])},r.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var t="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",t)},r.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},{}],2:[function(t,e,n){var c=t("wgs84");function i(t){var e=0;if(t&&0<t.length){e+=Math.abs(r(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(r(t[n]))}return e}function r(t){var e,n,r,i,o,s,a=0,u=t.length;if(2<u){for(s=0;s<u;s++)o=s===u-2?(r=u-2,i=u-1,0):s===u-1?(r=u-1,i=0,1):(i=(r=s)+1,s+2),e=t[r],n=t[i],a+=(l(t[o][0])-l(e[0]))*Math.sin(l(n[1]));a=a*c.RADIUS*c.RADIUS/2}return a}function l(t){return t*Math.PI/180}e.exports.geometry=function t(e){var n,r=0;switch(e.type){case"Polygon":return i(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=i(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}},e.exports.ring=r},{wgs84:167}],3:[function(t,e,n){e.exports=function(t){return function n(t){if(Array.isArray(t)&&t.length&&"number"==typeof t[0])return[t];return t.reduce(function(t,e){return Array.isArray(e)&&Array.isArray(e[0])?t.concat(n(e)):(t.push(e),t)},[])}(t)}},{}],4:[function(t,e,n){var r=t("@mapbox/geojson-normalize"),i=t("geojson-flatten"),o=t("./flatten");e.exports=function(t){if(!t)return[];var t=i(r(t)),e=[];return t.features.forEach(function(t){t.geometry&&(e=e.concat(o(t.geometry.coordinates)))}),e}},{"./flatten":3,"@mapbox/geojson-normalize":6,"geojson-flatten":46}],5:[function(t,e,n){var i=t("@mapbox/geojson-coords"),r=t("traverse"),o=t("@mapbox/extent"),s={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},a=Object.keys(s);function u(t){for(var e=o(),n=i(t),r=0;r<n.length;r++)e.include(n[r]);return e}e.exports=function(t){return u(t).bbox()},e.exports.polygon=function(t){return u(t).polygon()},e.exports.bboxify=function(t){return r(t).map(function(e){e&&a.some(function(t){return!!e[t]&&-1!==s[t].indexOf(e.type)})&&(e.bbox=u(e).bbox(),this.update(e))})}},{"@mapbox/extent":1,"@mapbox/geojson-coords":4,traverse:165}],6:[function(t,e,n){e.exports=function(t){if(!t||!t.type)return null;var e=r[t.type];if(!e)return null;return"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0};var r={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],7:[function(t,e,n){var o=t("jsonlint-lines"),s=t("./object");e.exports.hint=function(t,e){var n,r=[];if("object"==typeof t)n=t;else{if("string"!=typeof t)return[{message:"Expected string or object as input",line:0}];try{n=o.parse(t)}catch(t){var i=t.message.match(/line (\d+)/);return[{line:parseInt(i[1],10)-1,message:t.message,error:t}]}}return r=r.concat(s.hint(n,e))}},{"./object":8,"jsonlint-lines":49}],8:[function(t,e,n){var y=t("./rhr");e.exports.hint=function(t,i){var o=[],s=0,e=10,a=6;function n(t){var e;i&&!1===i.noDuplicateMembers||!t.__duplicateProperties__||o.push({message:"An object contained duplicate members, making parsing ambigous: "+t.__duplicateProperties__.join(", "),line:t.__line__}),r(t,"type","string")||(d[t.type]?t&&d[t.type](t):void 0!==(e=g[t.type.toLowerCase()])?o.push({message:"Expected "+e+" but got "+t.type+" (case sensitive)",line:t.__line__}):o.push({message:"The type "+t.type+" is unknown",line:t.__line__}))}function u(t,e){return t.every(function(t){return null!==t&&typeof t===e})}function r(t,e,n){return void 0===t[e]?o.push({message:'"'+e+'" member required',line:t.__line__}):"array"===n?!Array.isArray(t[e])&&o.push({message:'"'+e+'" member should be an array, but is an '+typeof t[e]+" instead",line:t.__line__}):"object"===n&&t[e]&&t[e].constructor!==Object?o.push({message:'"'+e+'" member should be '+n+", but is an "+t[e].constructor.name+" instead",line:t.__line__}):n&&typeof t[e]!==n&&o.push({message:'"'+e+'" member should be '+n+", but is an "+typeof t[e]+" instead",line:t.__line__})}function c(n,r){if(!Array.isArray(n))return o.push({message:"position should be an array, is a "+typeof n+" instead",line:n.__line__||r});if(n.length<2)return o.push({message:"position must have 2 or more elements",line:n.__line__||r});if(3<n.length)return o.push({message:"position should not have more than 3 elements",level:"message",line:n.__line__||r});if(!u(n,"number"))return o.push({message:"each element in a position must be a number",line:n.__line__||r});if(i&&i.precisionWarning){if(s===e)return s+=1,o.push({message:"truncated warnings: we've encountered coordinate precision warning "+e+" times, no more warnings will be reported",level:"message",line:n.__line__||r});s<e&&n.forEach(function(t){var e=0,t=String(t).split(".")[1];if(void 0!==t&&(e=t.length),a<e)return s+=1,o.push({message:"precision of coordinates should be reduced",level:"message",line:n.__line__||r})})}}function l(n,e,r,i){if(void 0===i&&void 0!==n.__line__&&(i=n.__line__),0===r)return c(n,i);if(1===r&&e)if("LinearRing"===e){if(!Array.isArray(n[n.length-1]))return o.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:i}),!0;if(n.length<4&&o.push({message:"a LinearRing of coordinates needs to have four or more positions",line:i}),n.length&&(n[n.length-1].length!==n[0].length||!n[n.length-1].every(function(t,e){return n[0][e]===t})))return o.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:i}),!0}else if("Line"===e&&n.length<2)return o.push({message:"a line needs to have two or more coordinates to be valid",line:i});if(Array.isArray(n))return n.map(function(t){return l(t,e,r-1,t.__line__||i)}).some(function(t){return t});o.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:i})}function p(t){t.crs&&("object"==typeof t.crs&&t.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===t.crs.properties.name?o.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:t.__line__}):o.push({message:"old-style crs member is not recommended",line:t.__line__}))}function h(t){return t.bbox&&(Array.isArray(t.bbox)?(u(t.bbox,"number")||o.push({message:"each element in a bbox member must be a number",line:t.bbox.__line__}),4!==t.bbox.length&&6!==t.bbox.length&&o.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:t.bbox.__line__}),o.length):void o.push({message:"bbox member must be an array of numbers, but is a "+typeof t.bbox,line:t.__line__}))}function f(t){p(t),h(t),void 0!==t.id&&"string"!=typeof t.id&&"number"!=typeof t.id&&o.push({message:'Feature "id" member must have a string or number value',line:t.__line__}),void 0!==t.features&&o.push({message:'Feature object cannot contain a "features" member',line:t.__line__}),void 0!==t.coordinates&&o.push({message:'Feature object cannot contain a "coordinates" member',line:t.__line__}),"Feature"!==t.type&&o.push({message:"GeoJSON features must have a type=feature member",line:t.__line__}),r(t,"properties","object"),r(t,"geometry","object")||t.geometry&&n(t.geometry)}var d={Point:function(t){var e;p(t),h(t),void 0!==(e=t).properties&&o.push({message:'geometry object cannot contain a "properties" member',line:e.__line__}),void 0!==e.geometry&&o.push({message:'geometry object cannot contain a "geometry" member',line:e.__line__}),void 0!==e.features&&o.push({message:'geometry object cannot contain a "features" member',line:e.__line__}),r(t,"coordinates","array")||c(t.coordinates)},Feature:f,MultiPoint:function(t){p(t),h(t),r(t,"coordinates","array")||l(t.coordinates,"",1)},LineString:function(t){p(t),h(t),r(t,"coordinates","array")||l(t.coordinates,"Line",1)},MultiLineString:function(t){p(t),h(t),r(t,"coordinates","array")||l(t.coordinates,"Line",2)},FeatureCollection:function(t){if(p(t),h(t),void 0!==t.properties&&o.push({message:'FeatureCollection object cannot contain a "properties" member',line:t.__line__}),void 0!==t.coordinates&&o.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:t.__line__}),!r(t,"features","array")){if(!u(t.features,"object"))return o.push({message:"Every feature must be an object",line:t.__line__});t.features.forEach(f)}},GeometryCollection:function(e){p(e),h(e),r(e,"geometries","array")||(u(e.geometries,"object")||o.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:e.__line__}),1===e.geometries.length&&o.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:e.geometries.__line__}),e.geometries.forEach(function(t){t&&("GeometryCollection"===t.type&&o.push({message:"GeometryCollection should avoid nested geometry collections",line:e.geometries.__line__}),n(t))}))},Polygon:function(t){p(t),h(t),r(t,"coordinates","array")||l(t.coordinates,"LinearRing",2)||y(t,o)},MultiPolygon:function(t){p(t),h(t),r(t,"coordinates","array")||l(t.coordinates,"LinearRing",3)||y(t,o)}},g=Object.keys(d).reduce(function(t,e){return t[e.toLowerCase()]=e,t},{});return"object"!=typeof t||null==t?o.push({message:"The root of a GeoJSON object must be an object.",line:0}):(n(t),o.forEach(function(t){!{}.hasOwnProperty.call(t,"line")||void 0!==t.line||delete t.line})),o}},{"./rhr":9}],9:[function(t,e,n){function o(t){return t*Math.PI/180}function r(t){var e=0;if(2<t.length)for(var n,r,i=0;i<t.length-1;i++)n=t[i],e+=o((r=t[i+1])[0]-n[0])*(2+Math.sin(o(n[1]))+Math.sin(o(r[1])));return 0<=e}function i(t){if(t&&0<t.length){if(r(t[0]))return!1;if(!t.slice(1,t.length).every(r))return!1}return!0}e.exports=function(t,e){var n;("Polygon"===(n=t).type?i(n.coordinates):"MultiPolygon"===n.type&&n.coordinates.every(i))||e.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:t.__line__})}},{}],10:[function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}(e.exports=r).prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,t=t.y-this.y;return e*e+t*t},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,t=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=t,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),t=e*this.x-n*this.y,e=n*this.x+e*this.y;return this.x=t,this.y=e,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),t=e.x+n*(this.x-e.x)-r*(this.y-e.y),e=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=t,this.y=e,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return!(t instanceof r)&&Array.isArray(t)?new r(t[0],t[1]):t}},{}],11:[function(t,e,n){"use strict";var r=t("@turf/meta");function i(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}e.exports=i,e.exports.default=i},{"@turf/meta":31}],12:[function(t,e,n){"use strict";var o=t("@turf/invariant"),s=t("@turf/helpers");function a(t,e,n){if(n=n||{},!s.isObject(n))throw new Error("options is invalid");if(!0===n.final)return function(t,e){t=a(e,t);return t=(t+180)%360}(t,e);var r=o.getCoord(t),i=o.getCoord(e),n=s.degreesToRadians(r[0]),t=s.degreesToRadians(i[0]),e=s.degreesToRadians(r[1]),r=s.degreesToRadians(i[1]),i=Math.sin(t-n)*Math.cos(r),n=Math.cos(e)*Math.sin(r)-Math.sin(e)*Math.cos(r)*Math.cos(t-n);return s.radiansToDegrees(Math.atan2(i,n))}e.exports=a,e.exports.default=a},{"@turf/helpers":21,"@turf/invariant":23}],13:[function(t,e,n){"use strict";function a(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length;for(var e=this.delay=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var n=this.centers[e],r=this.centers[e+1],i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}var u=t("@turf/helpers"),c=t("@turf/invariant");function r(t,e){if(e=e||{},!u.isObject(e))throw new Error("options is invalid");var n=e.resolution||1e4,e=e.sharpness||.85;if(!t)throw new Error("line is required");if(!u.isNumber(n))throw new Error("resolution must be an number");if(!u.isNumber(e))throw new Error("sharpness must be an number");for(var r=[],i=new a({points:c.getGeom(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:e}),o=0;o<i.duration;o+=10){var s=i.pos(o);Math.floor(o/100)%2==0&&r.push([s.x,s.y])}return u.lineString(r,t.properties)}a.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);t<Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))&&(e.push(r),n=i)}return e},a.prototype.vector=function(t){var e=this.pos(t+10),t=this.pos(t-10);return{angle:180*Math.atan2(e.y-t.y,e.x-t.x)/3.14,speed:Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z))}},a.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);t=e/this.duration;if(1<=t)return this.points[this.length-1];var n,r,i,o,s,a,e=Math.floor((this.points.length-1)*t),t=(this.length-1)*t-e;return n=t,r=this.points[e],i=this.controls[e][1],o=this.controls[e+1][0],s=this.points[e+1],a=[(n=(a=n)*a)*a,3*n*(1-a),3*a*(1-a)*(1-a),(1-a)*(1-a)*(1-a)],{x:s.x*a[0]+o.x*a[1]+i.x*a[2]+r.x*a[3],y:s.y*a[0]+o.y*a[1]+i.y*a[2]+r.y*a[3],z:s.z*a[0]+o.z*a[1]+i.z*a[2]+r.z*a[3]}},e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],14:[function(t,e,n){"use strict";var o=t("@turf/meta"),s=t("@turf/helpers");function r(t,e){var n=0,r=0,i=0;return o.coordEach(t,function(t){n+=t[0],r+=t[1],i++},!0),s.point([n/i,r/i],e)}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/meta":31}],15:[function(t,e,n){"use strict";var r,a=(r=t("@turf/destination"))&&"object"==typeof r&&"default"in r?r.default:r,u=t("@turf/helpers");function i(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var o=[],s=0;s<r;s++)o.push(a(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),u.polygon([o],i)}e.exports=i,e.exports.default=i},{"@turf/destination":19,"@turf/helpers":21}],16:[function(t,e,n){"use strict";var o=t("@turf/helpers"),y=t("@turf/invariant");function r(t,e){e="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var n=y.getType(t),r=[];switch(n){case"LineString":r=s(t);break;case"MultiLineString":case"Polygon":y.getCoords(t).forEach(function(t){r.push(s(t))});break;case"MultiPolygon":y.getCoords(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(s(t))}),r.push(e)});break;case"Point":return t;case"MultiPoint":var i={};y.getCoords(t).forEach(function(t){var e=t.join("-");i.hasOwnProperty(e)||(r.push(t),i[e]=!0)});break;default:throw new Error(n+" geometry not supported")}return t.coordinates?!0===e?(t.coordinates=r,t):{type:n,coordinates:r}:!0===e?(t.geometry.coordinates=r,t):o.feature({type:n,coordinates:r},t.properties,t.bbox,t.id)}function s(t){var e,n,r,i=y.getCoords(t);if(2===i.length&&(e=i[0],t=i[1],e[0]!==t[0]||e[1]!==t[1]))return i;var o=[],s=i.length-1;o.push(i[0]);for(var a,u,c,l,p,h,f,d,g=1;g<s;g++)c=i[g-1],n=i[g],r=i[g+1],a=c,u=r,d=f=h=p=l=void 0,l=(c=n)[0],p=c[1],h=a[0],f=a[1],d=u[0],c=u[1],(l-h)*(u=c-f)-(p-f)*(a=d-h)==0&&(Math.abs(a)>=Math.abs(u)?0<a?h<=l&&l<=d:d<=l&&l<=h:0<u?f<=p&&p<=c:c<=p&&p<=f)||o.push(n);return o.push(r),o}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],17:[function(t,e,n){"use strict";function r(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return i(t);case"FeatureCollection":return e=t,n={type:"FeatureCollection"},Object.keys(e).forEach(function(t){switch(t){case"type":case"features":return;default:n[t]=e[t]}}),n.features=e.features.map(i),n;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return o(t);default:throw new Error("unknown GeoJSON type")}var e,n}function i(e){var n={type:"Feature"};return Object.keys(e).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:n[t]=e[t]}}),n.properties=function n(r){var i={};if(!r)return i;Object.keys(r).forEach(function(t){var e=r[t];"object"==typeof e?null===e?i[t]=null:e.length?i[t]=e.map(function(t){return t}):i[t]=n(e):i[t]=e});return i}(e.properties),n.geometry=o(e.geometry),n}function o(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?e.geometries=t.geometries.map(o):e.coordinates=function e(t){if("object"!=typeof t[0])return t.slice();return t.map(function(t){return e(t)})}(t.coordinates),e}e.exports=r,e.exports.default=r},{}],18:[function(t,e,n){"use strict";var r,i=(r=t("concaveman"))&&"object"==typeof r&&"default"in r?r.default:r,o=t("@turf/meta"),s=t("@turf/helpers");function a(t,e){if(e=e||{},!s.isObject(e))throw new Error("options is invalid");var e=e.concavity||1/0,n=[];if(o.coordEach(t,function(t){n.push([t[0],t[1]])}),!n.length)return null;e=i(n,e);return 3<e.length?s.polygon([e]):null}e.exports=a,e.exports.default=a},{"@turf/helpers":21,"@turf/meta":31,concaveman:45}],19:[function(t,e,n){"use strict";var s=t("@turf/invariant"),a=t("@turf/helpers");function r(t,e,n,r){if(r=r||{},!a.isObject(r))throw new Error("options is invalid");var i=r.units,o=r.properties,r=s.getCoord(t),t=a.degreesToRadians(r[0]),r=a.degreesToRadians(r[1]),n=a.degreesToRadians(n),e=a.lengthToRadians(e,i),i=Math.asin(Math.sin(r)*Math.cos(e)+Math.cos(r)*Math.sin(e)*Math.cos(n)),r=t+Math.atan2(Math.sin(n)*Math.sin(e)*Math.cos(r),Math.cos(e)-Math.sin(r)*Math.sin(i)),r=a.radiansToDegrees(r),i=a.radiansToDegrees(i);return a.point([r,i],o)}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],20:[function(t,e,n){"use strict";var o=t("@turf/invariant"),s=t("@turf/helpers");function r(t,e,n){if(n=n||{},!s.isObject(n))throw new Error("options is invalid");var r=n.units,i=o.getCoord(t),n=o.getCoord(e),t=s.degreesToRadians(n[1]-i[1]),e=s.degreesToRadians(n[0]-i[0]),i=s.degreesToRadians(i[1]),n=s.degreesToRadians(n[1]),n=Math.pow(Math.sin(t/2),2)+Math.pow(Math.sin(e/2),2)*Math.cos(i)*Math.cos(n);return s.radiansToLength(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)),r)}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=6371008.8,i={meters:r,metres:r,millimeters:1e3*r,millimetres:1e3*r,centimeters:100*r,centimetres:100*r,kilometers:r/1e3,kilometres:r/1e3,miles:r/1609.344,nauticalmiles:r/1852,inches:39.37*r,yards:r/1.0936,feet:3.28084*r,radians:1,degrees:r/111325},o={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/r,degrees:1/111325},s={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function a(t,e,n){if(!v(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&E(r),i&&I(i);n={type:"Feature"};return i&&(n.id=i),r&&(n.bbox=r),n.properties=e||{},n.geometry=t,n}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!m(t[0])||!m(t[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:t},e,n)}function c(t,e,n){if(!t)throw new Error("coordinates is required");for(var r=0;r<t.length;r++){var i=t[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<i[i.length-1].length;o++){if(0===r&&0===o&&!m(i[0][0])||!m(i[0][1]))throw new Error("coordinates must contain numbers");if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}}return a({type:"Polygon",coordinates:t},e,n)}function l(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!m(t[0][1])||!m(t[0][1]))throw new Error("coordinates must contain numbers");return a({type:"LineString",coordinates:t},e,n)}function p(t,e){if(!v(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&E(n),r&&I(r);e={type:"FeatureCollection"};return r&&(e.id=r),n&&(e.bbox=n),e.features=t,e}function h(t,e,n){if(!t)throw new Error("coordinates is required");return a({type:"MultiLineString",coordinates:t},e,n)}function f(t,e,n){if(!t)throw new Error("coordinates is required");return a({type:"MultiPoint",coordinates:t},e,n)}function d(t,e,n){if(!t)throw new Error("coordinates is required");return a({type:"MultiPolygon",coordinates:t},e,n)}function g(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=i[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function y(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=i[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function _(t){if(null==t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function m(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function v(t){return!!t&&t.constructor===Object}function E(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!m(t))throw new Error("bbox must only contain numbers")})}function I(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}n.earthRadius=r,n.factors=i,n.unitsFactors=o,n.areaFactors=s,n.feature=a,n.geometry=function(t,e,n){if(!v(n=n||{}))throw new Error("options is invalid");var r,n=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(n&&E(n),t){case"Point":r=u(e).geometry;break;case"LineString":r=l(e).geometry;break;case"Polygon":r=c(e).geometry;break;case"MultiPoint":r=f(e).geometry;break;case"MultiLineString":r=h(e).geometry;break;case"MultiPolygon":r=d(e).geometry;break;default:throw new Error(t+" is invalid")}return n&&(r.bbox=n),r},n.point=u,n.points=function(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return p(t.map(function(t){return u(t,e)}),n)},n.polygon=c,n.polygons=function(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return p(t.map(function(t){return c(t,e)}),n)},n.lineString=l,n.lineStrings=function(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return p(t.map(function(t){return l(t,e)}),n)},n.featureCollection=p,n.multiLineString=h,n.multiPoint=f,n.multiPolygon=d,n.geometryCollection=function(t,e,n){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return a({type:"GeometryCollection",geometries:t},e,n)},n.round=function(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(0<=e))throw new Error("precision must be a positive number");return e=Math.pow(10,e||0),Math.round(t*e)/e},n.radiansToLength=g,n.lengthToRadians=y,n.lengthToDegrees=function(t,e){return _(y(t,e))},n.bearingToAzimuth=function(t){if(null==t)throw new Error("bearing is required");return(t%=360)<0&&(t+=360),t},n.radiansToDegrees=_,n.degreesToRadians=function(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180},n.convertLength=function(t,e,n){if(null==t)throw new Error("length is required");if(!(0<=t))throw new Error("length must be a positive number");return g(y(t,e),n||"kilometers")},n.convertArea=function(t,e,n){if(null==t)throw new Error("area is required");if(!(0<=t))throw new Error("area must be a positive number");if(!(e=s[e||"meters"]))throw new Error("invalid original units");if(!(n=s[n||"kilometers"]))throw new Error("invalid final units");return t/e*n},n.isNumber=m,n.isObject=v,n.validateBBox=E,n.validateId=I,n.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},n.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},n.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},n.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},n.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},n.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},n.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],22:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var i=t("turf-jsts"),o=r(t("@turf/truncate")),s=t("@turf/invariant"),a=t("@turf/helpers"),u=r(t("@turf/clean-coords"));function c(t,e){var n=s.getGeom(t),t=s.getGeom(e);if(u(o(t,{precision:4})).coordinates[0].length<4)return null;if(u(o(n,{precision:4})).coordinates[0].length<4)return null;e=new i.GeoJSONReader,n=e.read(o(n)),t=e.read(o(t)),t=i.OverlayOp.intersection(n,t);if(t.isEmpty())return null;t=(new i.GeoJSONWriter).write(t);return a.feature(t)}e.exports=c,e.exports.default=c},{"@turf/clean-coords":16,"@turf/helpers":21,"@turf/invariant":23,"@turf/truncate":40,"turf-jsts":166}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("@turf/helpers");function i(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return o(e),e;throw new Error("No valid coordinates")}function o(t){if(1<t.length&&r.isNumber(t[0])&&r.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return o(t[0]);throw new Error("coordinates must only contain numbers")}n.getCoord=function(t){if(!t)throw new Error("obj is required");if(1<(t=i(t)).length&&r.isNumber(t[0])&&r.isNumber(t[1]))return t;throw new Error("Coordinate is not a valid Point")},n.getCoords=i,n.containsNumber=o,n.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},n.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},n.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}},n.getGeom=function(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")},n.getGeomType=function(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")},n.getType=function(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}},{"@turf/helpers":21}],24:[function(t,e,n){"use strict";var r,i=(r=t("@turf/distance"))&&"object"==typeof r&&"default"in r?r.default:r,o=t("@turf/meta"),s=t("@turf/helpers");function a(t,n){if(n=n||{},!s.isObject(n))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return o.segmentReduce(t,function(t,e){e=e.geometry.coordinates;return t+i(e[0],e[1],n)},0)}e.exports=a,e.exports.default=a},{"@turf/distance":20,"@turf/helpers":21,"@turf/meta":31}],25:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var f=r(t("@turf/destination")),d=r(t("@turf/circle")),g=t("@turf/helpers");function i(t,e,n,r,i){if(i=i||{},!g.isObject(i))throw new Error("options is invalid");var o=i.steps,s=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var a=y(n),n=y(r),r=t.properties;if(a===n)return g.lineString(d(t,e,i).geometry.coordinates[0],r);for(var u=a,c=a<n?n:n+360,l=u,p=[],h=0;l<c;)p.push(f(t,e,l,s).geometry.coordinates),l=u+360*++h/o;return c<l&&p.push(f(t,e,c,s).geometry.coordinates),g.lineString(p,r)}function y(t){t%=360;return t<0&&(t+=360),t}e.exports=i,e.exports.default=i},{"@turf/circle":15,"@turf/destination":19,"@turf/helpers":21}],26:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var s=r(t("geojson-rbush")),a=r(t("@turf/line-segment")),c=t("@turf/invariant"),u=t("@turf/meta"),l=t("@turf/helpers");function i(t,e){var r={},i=[];if("LineString"===t.type&&(t=l.feature(t)),"LineString"===e.type&&(e=l.feature(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var n=p(t,e);return n&&i.push(n),l.featureCollection(i)}var o=s();return o.load(a(e)),u.featureEach(a(t),function(n){u.featureEach(o.search(n),function(t){var e=p(n,t);e&&(t=c.getCoords(e).join(","),r[t]||(r[t]=!0,i.push(e)))})}),l.featureCollection(i)}function p(t,e){var n=c.getCoords(t),r=c.getCoords(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],u=r[0][0],t=r[0][1],e=r[1][0],n=r[1][1],r=(n-t)*(s-i)-(e-u)*(a-o),n=(e-u)*(o-t)-(n-t)*(i-u),u=(s-i)*(o-t)-(a-o)*(i-u);if(0==r)return null;n/=r,r=u/r;if(0<=n&&n<=1&&0<=r&&r<=1){i=i+n*(s-i),o=o+n*(a-o);return l.point([i,o])}return null}e.exports=i,e.exports.default=i},{"@turf/helpers":21,"@turf/invariant":23,"@turf/line-segment":27,"@turf/meta":31,"geojson-rbush":47}],27:[function(t,e,n){"use strict";var u=t("@turf/helpers"),i=t("@turf/invariant"),r=t("@turf/meta");function o(t){if(!t)throw new Error("geojson is required");var e=[];return r.flattenEach(t,function(t){!function(e,n){var t=[],r=e.geometry;switch(r.type){case"Polygon":t=i.getCoords(r);break;case"LineString":t=[i.getCoords(r)]}t.forEach(function(t){var s,a;(t=t,s=e.properties,a=[],t.reduce(function(t,e){var n,r,i,o=u.lineString([t,e],s);return o.bbox=(r=e,i=(n=t)[0],t=n[1],n=r[0],r=r[1],[i<n?i:n,t<r?t:r,n<i?i:n,r<t?t:r]),a.push(o),e}),a).forEach(function(t){t.id=n.length,n.push(t)})})}(t,e)}),u.featureCollection(e)}e.exports=o,e.exports.default=o},{"@turf/helpers":21,"@turf/invariant":23,"@turf/meta":31}],28:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var p=r(t("@turf/bearing")),h=r(t("@turf/distance")),f=r(t("@turf/destination")),d=t("@turf/helpers");function i(t,e,n,r){if(r=r||{},!d.isObject(r))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,c=0,l=0;l<i.length&&!(c<=e&&l===i.length-1);l++){if(e<c&&0===o.length){if(!(s=e-c))return o.push(i[l]),d.lineString(o);a=p(i[l],i[l-1])-180,u=f(i[l],s,a,r),o.push(u.geometry.coordinates)}if(n<=c)return(s=n-c)?(a=p(i[l],i[l-1])-180,u=f(i[l],s,a,r),o.push(u.geometry.coordinates)):o.push(i[l]),d.lineString(o);if(e<=c&&o.push(i[l]),l===i.length-1)return d.lineString(o);c+=h(i[l],i[l+1],r)}return d.lineString(i[i.length-1])}e.exports=i,e.exports.default=i},{"@turf/bearing":12,"@turf/destination":19,"@turf/distance":20,"@turf/helpers":21}],29:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var a=r(t("geojson-rbush")),s=r(t("@turf/square")),u=r(t("@turf/bbox")),o=r(t("@turf/truncate")),c=r(t("@turf/line-segment")),l=r(t("@turf/line-intersect")),p=r(t("@turf/nearest-point-on-line")),h=t("@turf/invariant"),f=t("@turf/meta"),d=t("@turf/helpers");function i(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=h.getType(t),r=h.getType(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=o(e,{precision:7});switch(r){case"Point":return y(t,i);case"MultiPoint":return g(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return g(t,l(t,i))}}function g(r,t){var i=[],o=a();return f.flattenEach(t,function(t){var e,n;i.forEach(function(t,e){t.id=e}),i.length?(e=o.search(t)).features.length&&(n=_(t,e),i=i.filter(function(t){return t.id!==n.id}),o.remove(n),f.featureEach(y(n,t),function(t){i.push(t),o.insert(t)})):((i=y(r,t).features).forEach(function(t){t.bbox||(t.bbox=s(u(t)))}),o.load(d.featureCollection(i)))}),d.featureCollection(i)}function y(t,i){var o=[],e=h.getCoords(t)[0],n=h.getCoords(t)[t.geometry.coordinates.length-1];if(m(e,h.getCoord(i))||m(n,h.getCoord(i)))return d.featureCollection([t]);var r=a(),n=c(t);r.load(n);r=r.search(i);if(!r.features.length)return d.featureCollection([t]);var s=_(i,r),e=[e],e=f.featureReduce(n,function(t,e,n){var r=h.getCoords(e)[1],e=h.getCoord(i);return n===s.id?(t.push(e),o.push(d.lineString(t)),m(e,r)?[e]:[e,r]):(t.push(r),t)},e);return 1<e.length&&o.push(d.lineString(e)),d.featureCollection(o)}function _(n,t){if(!t.features.length)throw new Error("lines must contain features");if(1===t.features.length)return t.features[0];var r,i=1/0;return f.featureEach(t,function(t){var e=p(t,n).properties.dist;e<i&&(r=t,i=e)}),r}function m(t,e){return t[0]===e[0]&&t[1]===e[1]}e.exports=i,e.exports.default=i},{"@turf/bbox":11,"@turf/helpers":21,"@turf/invariant":23,"@turf/line-intersect":26,"@turf/line-segment":27,"@turf/meta":31,"@turf/nearest-point-on-line":32,"@turf/square":38,"@turf/truncate":40,"geojson-rbush":47}],30:[function(t,e,n){"use strict";var r,c=(r=t("@turf/bbox"))&&"object"==typeof r&&"default"in r?r.default:r,l=t("@turf/invariant"),p=t("@turf/helpers");function i(t,e){if(e=e||{},!p.isObject(e))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,l.getType(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features||t.geometries).forEach(function(t){o.push(l.getCoords(s(t,{},r,i)))}),p.multiPolygon(o,n)}return s(t,n,r,i)}function s(t,e,o,s){e=e||t.properties||{};var n=l.getCoords(t),r=l.getType(t);if(!n.length)throw new Error("line must contain coordinates");switch(r){case"LineString":return o&&(n=h(n)),p.polygon([n],e);case"MultiLineString":var a=[],u=0;return n.forEach(function(t){var e,n,r,i;o&&(t=h(t)),s?(e=c(p.lineString(t)),n=e[0],r=e[1],i=e[2],e=e[3],e=Math.abs(n-i)*Math.abs(r-e),u<e?(a.unshift(t),u=e):a.push(t)):a.push(t)}),p.polygon(a,e);default:throw new Error("geometry type "+r+" is not supported")}}function h(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],i=i[1];return n===o&&r===i||t.push(e),t}e.exports=i,e.exports.default=i},{"@turf/bbox":11,"@turf/helpers":21,"@turf/invariant":23}],31:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var p=t("@turf/helpers");function x(t,e,n){if(null!==t)for(var r,i,o,s,a,u,c,l=0,p=t.type,h="FeatureCollection"===p,f="Feature"===p,d=h?t.features.length:1,g=0;g<d;g++){s=(c=!!(u=h?t.features[g].geometry:f?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var y=0;y<s;y++){var _,m=0,v=0;if(null!==(_=c?u.geometries[y]:u)){a=_.coordinates;var E=_.type,I=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1;switch(E){case null:break;case"Point":e(a,l,g,m,v),l++,m++;break;case"LineString":case"MultiPoint":for(r=0;r<a.length;r++)e(a[r],l,g,m,v),l++,"MultiPoint"===E&&m++;"LineString"===E&&m++;break;case"Polygon":case"MultiLineString":for(r=0;r<a.length;r++){for(i=0;i<a[r].length-I;i++)e(a[r][i],l,g,m,v),l++;"MultiLineString"===E&&m++,"Polygon"===E&&v++}"Polygon"===E&&m++;break;case"MultiPolygon":for(r=0;r<a.length;r++){for("MultiPolygon"===E&&(v=0),i=0;i<a[r].length;i++){for(o=0;o<a[r][i].length-I;o++)e(a[r][i][o],l,g,m,v),l++;v++}m++}break;case"GeometryCollection":for(r=0;r<_.geometries.length;r++)x(_.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function r(t,o,s,e){var a=s;return x(t,function(t,e,n,r,i){a=0===e&&void 0===s?t:o(a,t,e,n,r,i)},e),a}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function i(t,e){for(var n,r,i,o,s,a,u,c,l,p=0,h="FeatureCollection"===t.type,f="Feature"===t.type,d=h?t.features.length:1,g=0;g<d;g++){for(s=h?t.features[g].geometry:f?t.geometry:t,u=h?t.features[g].properties:f?t.properties:{},c=h?t.features[g].bbox:f?t.bbox:void 0,l=h?t.features[g].id:f?t.id:void 0,o=(a=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<o;r++)if(null!==(i=a?s.geometries[r]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(i,p,u,c,l);break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)e(i.geometries[n],p,u,c,l);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,u,c,l);p++}}function a(t,a){i(t,function(t,n,r,e,i){var o,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return void a(p.feature(t,r,{bbox:e,id:i}),n,0)}switch(s){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}t.coordinates.forEach(function(t,e){t={type:o,coordinates:t};a(p.feature(t,r),n,e)})})}function c(t,l){a(t,function(s,a,u){var t,c=0;!s.geometry||"Point"!==(t=s.geometry.type)&&"MultiPoint"!==t&&r(s,function(t,e,n,r,i,o){t=p.lineString([t,e],s.properties);return l(t,a,u,o,c),c++,e})})}function u(t,s){if(!t)throw new Error("geojson is required");a(t,function(t,e,n){if(null!==t.geometry){var r=t.geometry.type,i=t.geometry.coordinates;switch(r){case"LineString":s(t,e,n,0,0);break;case"Polygon":for(var o=0;o<i.length;o++)s(p.lineString(i[o],t.properties),e,n,o)}}})}n.coordEach=x,n.coordReduce=r,n.propEach=o,n.propReduce=function(t,n,r){var i=r;return o(t,function(t,e){i=0===e&&void 0===r?t:n(i,t,e)}),i},n.featureEach=s,n.featureReduce=function(t,n,r){var i=r;return s(t,function(t,e){i=0===e&&void 0===r?t:n(i,t,e)}),i},n.coordAll=function(t){var e=[];return x(t,function(t){e.push(t)}),e},n.geomEach=i,n.geomReduce=function(t,o,s){var a=s;return i(t,function(t,e,n,r,i){a=0===e&&void 0===s?t:o(a,t,e,n,r,i)}),a},n.flattenEach=a,n.flattenReduce=function(t,r,i){var o=i;return a(t,function(t,e,n){o=0===e&&0===n&&void 0===i?t:r(o,t,e,n)}),o},n.segmentEach=c,n.segmentReduce=function(t,o,s){var a=s,u=!1;return c(t,function(t,e,n,r,i){a=!1===u&&void 0===s?t:o(a,t,e,n,r,i),u=!0}),a},n.lineEach=u,n.lineReduce=function(t,i,o){var s=o;return u(t,function(t,e,n,r){s=0===e&&void 0===o?t:i(s,t,e,n,r)}),s}},{"@turf/helpers":21}],32:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var f=r(t("@turf/bearing")),d=r(t("@turf/distance")),g=r(t("@turf/destination")),y=r(t("@turf/line-intersect")),i=t("@turf/meta"),_=t("@turf/helpers"),m=t("@turf/invariant");function o(t,c,l){if(l=l||{},!_.isObject(l))throw new Error("options is invalid");var e=(t.geometry||t).type;if("LineString"!==e&&"MultiLineString"!==e)throw new Error("lines must be LineString or MultiLineString");var p=_.point([1/0,1/0],{dist:1/0}),h=0;return i.flattenEach(t,function(t){for(var e=m.getCoords(t),n=0;n<e.length-1;n++){var r=_.point(e[n]);r.properties.dist=d(c,r,l);var i=_.point(e[n+1]);i.properties.dist=d(c,i,l);var o=d(r,i,l),s=Math.max(r.properties.dist,i.properties.dist),a=f(r,i),u=g(c,s,a+90,l),a=g(c,s,a-90,l),u=y(_.lineString([u.geometry.coordinates,a.geometry.coordinates]),_.lineString([r.geometry.coordinates,i.geometry.coordinates])),a=null;0<u.features.length&&((a=u.features[0]).properties.dist=d(c,a,l),a.properties.location=h+d(r,a,l)),r.properties.dist<p.properties.dist&&((p=r).properties.index=n,p.properties.location=h),i.properties.dist<p.properties.dist&&((p=i).properties.index=n+1,p.properties.location=h+o),a&&a.properties.dist<p.properties.dist&&((p=a).properties.index=n),h+=o}}),p}e.exports=o,e.exports.default=o},{"@turf/bearing":12,"@turf/destination":19,"@turf/distance":20,"@turf/helpers":21,"@turf/invariant":23,"@turf/line-intersect":26,"@turf/meta":31}],33:[function(t,e,n){"use strict";var s=t("@turf/invariant"),a=t("@turf/helpers");function r(t,e){if(e=e||{},!a.isObject(e))throw new Error("options is invalid");var n=e.properties,r=s.getType(t),i=s.getCoords(t),n=n||t.properties||{};if(!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return u(i,n);case"MultiPolygon":var o=[];return i.forEach(function(t){o.push(u(t,n))}),a.featureCollection(o);default:throw new Error("geom "+r+" not supported")}}function u(t,e){return 1<t.length?a.multiLineString(t,e):a.lineString(t[0],e)}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],34:[function(t,e,n){"use strict";var r=t("@turf/invariant"),i=t("@turf/helpers");function o(t,e,n){if(n=n||{},!i.isObject(n))throw new Error("options is invalid");n=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return 180<(e=n?s(r.getCoord(e),r.getCoord(t)):s(r.getCoord(t),r.getCoord(e)))?-(360-e):e}function s(t,e){var n=i.degreesToRadians(t[1]),r=i.degreesToRadians(e[1]),t=i.degreesToRadians(e[0]-t[0]);t>Math.PI&&(t-=2*Math.PI),t<-Math.PI&&(t+=2*Math.PI);n=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),n=Math.atan2(t,n);return(i.radiansToDegrees(n)+360)%360}e.exports=o,e.exports.default=o},{"@turf/helpers":21,"@turf/invariant":23}],35:[function(t,e,n){"use strict";var a=t("@turf/helpers"),o=t("@turf/invariant");function r(t,e,n,r){if(r=r||{},!a.isObject(r))throw new Error("options is invalid");var i=r.units,r=r.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==n)throw new Error("bearing is required");if(!(0<=e))throw new Error("distance must be greater than 0");i=a.convertLength(e,i,"meters"),t=o.getCoord(t),n=function(t,e,n,r){r=void 0===r?a.earthRadius:Number(r);var i=e/r,o=t[0]*Math.PI/180,s=a.degreesToRadians(t[1]),e=a.degreesToRadians(n),r=i*Math.cos(e),t=s+r;Math.abs(t)>Math.PI/2&&(t=0<t?Math.PI-t:-Math.PI-t);n=Math.log(Math.tan(t/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),s=1e-11<Math.abs(n)?r/n:Math.cos(s),s=i*Math.sin(e)/s;return[(180*(o+s)/Math.PI+540)%360-180,180*t/Math.PI]}(t,i,n);return n[0]+=180<n[0]-t[0]?-360:180<t[0]-n[0]?360:0,a.point(n,r)}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],36:[function(t,e,n){"use strict";var s=t("@turf/helpers"),r=t("@turf/invariant");function i(t,e,n){if(n=n||{},!s.isObject(n))throw new Error("options is invalid");n=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");t=r.getCoord(t),e=r.getCoord(e);e[0]+=180<e[0]-t[0]?-360:180<t[0]-e[0]?360:0;e=function(t,e,n){var r=n=void 0===n?s.earthRadius:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,n=o-i,t=Math.abs(e[0]-t[0])*Math.PI/180;t>Math.PI&&(t-=2*Math.PI);o=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),i=1e-11<Math.abs(o)?n/o:Math.cos(i);return Math.sqrt(n*n+i*i*t*t)*r}(t,e);return s.convertLength(e,"meters",n)}e.exports=i,e.exports.default=i},{"@turf/helpers":21,"@turf/invariant":23}],37:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var a=r(t("@turf/circle")),u=r(t("@turf/line-arc")),c=t("@turf/meta"),l=t("@turf/helpers"),p=t("@turf/invariant");function i(t,e,n,r,i){if(i=i||{},!l.isObject(i))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(h(n)===h(r))return a(t,e,i);var o=p.getCoords(t),i=u(t,e,n,r,i),s=[[o]];return c.coordEach(i,function(t){s[0].push(t)}),s[0].push(o),l.polygon(s)}function h(t){t%=360;return t<0&&(t+=360),t}e.exports=i,e.exports.default=i},{"@turf/circle":15,"@turf/helpers":21,"@turf/invariant":23,"@turf/line-arc":25,"@turf/meta":31}],38:[function(t,e,n){"use strict";var r,s=(r=t("@turf/distance"))&&"object"==typeof r&&"default"in r?r.default:r;function i(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=s(t.slice(0,2),[r,n]);if(s(t.slice(0,2),[e,i])<=o){o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}r=(e+r)/2;return[r-(i-n)/2,n,r+(i-n)/2,i]}e.exports=i,e.exports.default=i},{"@turf/distance":20}],39:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var o=r(t("@turf/centroid")),s=r(t("@turf/rhumb-bearing")),a=r(t("@turf/rhumb-distance")),u=r(t("@turf/rhumb-destination")),c=r(t("@turf/clone")),l=t("@turf/meta"),p=t("@turf/invariant"),h=t("@turf/helpers");function i(t,r,e){if(e=e||{},!h.isObject(e))throw new Error("options is invalid");var i=e.pivot,e=e.mutate;if(!t)throw new Error("geojson is required");if(null==r||isNaN(r))throw new Error("angle is required");return 0===r||(i=i||o(t),!1!==e&&void 0!==e||(t=c(t)),l.coordEach(t,function(t){var e=s(i,t)+r,n=a(i,t),e=p.getCoords(u(i,n,e));t[0]=e[0],t[1]=e[1]})),t}e.exports=i,e.exports.default=i},{"@turf/centroid":14,"@turf/clone":17,"@turf/helpers":21,"@turf/invariant":23,"@turf/meta":31,"@turf/rhumb-bearing":34,"@turf/rhumb-destination":35,"@turf/rhumb-distance":36}],40:[function(t,e,n){"use strict";var o=t("@turf/meta"),s=t("@turf/helpers");function r(t,e){if(e=e||{},!s.isObject(e))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,e=e.mutate,n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r;if(!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==e&&void 0!==e||(t=JSON.parse(JSON.stringify(t)));var i=Math.pow(10,n);return o.coordEach(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,i,r)}),t}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/meta":31}],41:[function(t,e,n){"use strict";var r=t("turf-jsts");function i(){for(var t=new r.GeoJSONReader,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=r.UnionOp.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new r.GeoJSONWriter).write(e),properties:arguments[0].properties}}e.exports=i,e.exports.default=i},{"turf-jsts":166}],42:[function(t,e,n){"use strict";e.exports={builtins:{Symbol:"symbol",Promise:"promise",Map:"map",WeakMap:"weak-map",Set:"set",WeakSet:"weak-set",Observable:"observable",setImmediate:"set-immediate",clearImmediate:"clear-immediate",asap:"asap"},methods:{Array:{concat:"array/concat",copyWithin:"array/copy-within",entries:"array/entries",every:"array/every",fill:"array/fill",filter:"array/filter",findIndex:"array/find-index",find:"array/find",forEach:"array/for-each",from:"array/from",includes:"array/includes",indexOf:"array/index-of",join:"array/join",keys:"array/keys",lastIndexOf:"array/last-index-of",map:"array/map",of:"array/of",pop:"array/pop",push:"array/push",reduceRight:"array/reduce-right",reduce:"array/reduce",reverse:"array/reverse",shift:"array/shift",slice:"array/slice",some:"array/some",sort:"array/sort",splice:"array/splice",unshift:"array/unshift",values:"array/values"},JSON:{stringify:"json/stringify"},Object:{assign:"object/assign",create:"object/create",defineProperties:"object/define-properties",defineProperty:"object/define-property",entries:"object/entries",freeze:"object/freeze",getOwnPropertyDescriptor:"object/get-own-property-descriptor",getOwnPropertyDescriptors:"object/get-own-property-descriptors",getOwnPropertyNames:"object/get-own-property-names",getOwnPropertySymbols:"object/get-own-property-symbols",getPrototypeOf:"object/get-prototype-of",isExtensible:"object/is-extensible",isFrozen:"object/is-frozen",isSealed:"object/is-sealed",is:"object/is",keys:"object/keys",preventExtensions:"object/prevent-extensions",seal:"object/seal",setPrototypeOf:"object/set-prototype-of",values:"object/values"},RegExp:{escape:"regexp/escape"},Math:{acosh:"math/acosh",asinh:"math/asinh",atanh:"math/atanh",cbrt:"math/cbrt",clz32:"math/clz32",cosh:"math/cosh",expm1:"math/expm1",fround:"math/fround",hypot:"math/hypot",imul:"math/imul",log10:"math/log10",log1p:"math/log1p",log2:"math/log2",sign:"math/sign",sinh:"math/sinh",tanh:"math/tanh",trunc:"math/trunc",iaddh:"math/iaddh",isubh:"math/isubh",imulh:"math/imulh",umulh:"math/umulh"},Symbol:{for:"symbol/for",hasInstance:"symbol/has-instance",isConcatSpreadable:"symbol/is-concat-spreadable",iterator:"symbol/iterator",keyFor:"symbol/key-for",match:"symbol/match",replace:"symbol/replace",search:"symbol/search",species:"symbol/species",split:"symbol/split",toPrimitive:"symbol/to-primitive",toStringTag:"symbol/to-string-tag",unscopables:"symbol/unscopables"},String:{at:"string/at",codePointAt:"string/code-point-at",endsWith:"string/ends-with",fromCodePoint:"string/from-code-point",includes:"string/includes",matchAll:"string/match-all",padLeft:"string/pad-left",padRight:"string/pad-right",padStart:"string/pad-start",padEnd:"string/pad-end",raw:"string/raw",repeat:"string/repeat",startsWith:"string/starts-with",trim:"string/trim",trimLeft:"string/trim-left",trimRight:"string/trim-right",trimStart:"string/trim-start",trimEnd:"string/trim-end"},Number:{EPSILON:"number/epsilon",isFinite:"number/is-finite",isInteger:"number/is-integer",isNaN:"number/is-nan",isSafeInteger:"number/is-safe-integer",MAX_SAFE_INTEGER:"number/max-safe-integer",MIN_SAFE_INTEGER:"number/min-safe-integer",parseFloat:"number/parse-float",parseInt:"number/parse-int"},Reflect:{apply:"reflect/apply",construct:"reflect/construct",defineProperty:"reflect/define-property",deleteProperty:"reflect/delete-property",enumerate:"reflect/enumerate",getOwnPropertyDescriptor:"reflect/get-own-property-descriptor",getPrototypeOf:"reflect/get-prototype-of",get:"reflect/get",has:"reflect/has",isExtensible:"reflect/is-extensible",ownKeys:"reflect/own-keys",preventExtensions:"reflect/prevent-extensions",setPrototypeOf:"reflect/set-prototype-of",set:"reflect/set",defineMetadata:"reflect/define-metadata",deleteMetadata:"reflect/delete-metadata",getMetadata:"reflect/get-metadata",getMetadataKeys:"reflect/get-metadata-keys",getOwnMetadata:"reflect/get-own-metadata",getOwnMetadataKeys:"reflect/get-own-metadata-keys",hasMetadata:"reflect/has-metadata",hasOwnMetadata:"reflect/has-own-metadata",metadata:"reflect/metadata"},System:{global:"system/global"},Error:{isError:"error/is-error"},Date:{},Function:{}}}},{}],43:[function(t,e,n){"use strict";n.__esModule=!0,n.definitions=void 0,n.default=function(t){var s=t.types;function a(t){return t.moduleName||"babel-runtime"}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var r=["interopRequireWildcard","interopRequireDefault"];return{pre:function(e){var n=a(this.opts);!1!==this.opts.helpers&&e.set("helperGenerator",function(t){if(r.indexOf(t)<0)return e.addImport(n+"/helpers/"+t,"default",t)}),this.setDynamic("regeneratorIdentifier",function(){return e.addImport(n+"/regenerator","default","regeneratorRuntime")})},visitor:{ReferencedIdentifier:function(t,e){var n=t.node,r=t.parent,i=t.scope;"regeneratorRuntime"!==n.name||!1===e.opts.regenerator?!1!==e.opts.polyfill&&(s.isMemberExpression(r)||u(c.default.builtins,n.name)&&(i.getBindingIdentifier(n.name)||(i=a(e.opts),t.replaceWith(e.addImport(i+"/core-js/"+c.default.builtins[n.name],"default",n.name))))):t.replaceWith(e.get("regeneratorIdentifier"))},CallExpression:function(t,e){var n,r;!1!==e.opts.polyfill&&(t.node.arguments.length||(n=t.node.callee,s.isMemberExpression(n)&&n.computed&&t.get("callee.property").matchesPattern("Symbol.iterator")&&(r=a(e.opts),t.replaceWith(s.callExpression(e.addImport(r+"/core-js/get-iterator","default","getIterator"),[n.object])))))},BinaryExpression:function(t,e){var n;!1!==e.opts.polyfill&&"in"===t.node.operator&&t.get("left").matchesPattern("Symbol.iterator")&&(n=a(e.opts),t.replaceWith(s.callExpression(e.addImport(n+"/core-js/is-iterable","default","isIterable"),[t.node.right])))},MemberExpression:{enter:function(t,e){if(!1!==e.opts.polyfill&&t.isReferenced()){var n=t.node,r=n.object,i=n.property;if(s.isReferenced(r,n)&&!n.computed&&u(c.default.methods,r.name)){n=c.default.methods[r.name];if(u(n,i.name)&&!t.scope.getBindingIdentifier(r.name)){if("Object"===r.name&&"defineProperty"===i.name&&t.parentPath.isCallExpression()){var o=t.parentPath.node;if(3===o.arguments.length&&s.isLiteral(o.arguments[1]))return}o=a(e.opts);t.replaceWith(e.addImport(o+"/core-js/"+n[i.name],"default",r.name+"$"+i.name))}}}},exit:function(t,e){var n,r,i;!1!==e.opts.polyfill&&t.isReferenced()&&(r=(n=t.node).object,u(c.default.builtins,r.name)&&(t.scope.getBindingIdentifier(r.name)||(i=a(e.opts),t.replaceWith(s.memberExpression(e.addImport(i+"/core-js/"+c.default.builtins[r.name],"default",r.name),n.property,n.computed)))))}}}}};var r,i=t("./definitions"),c=(r=i)&&r.__esModule?r:{default:r};n.definitions=c.default},{"./definitions":42}],44:[function(t,e,n){},{}],45:[function(t,e,n){"use strict";var _=t("rbush"),m=t("tinyqueue"),v=t("point-in-polygon");const r=t("robust-predicates/umd/orient2d.min.js").orient2d;function i(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var r=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)v(t[o],a)||u.push(t[o]);return function(t){t.sort(L);for(var e=[],n=0;n<t.length;n++){for(;2<=e.length&&b(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;0<=i;i--){for(;2<=r.length&&b(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}(u)}(t),i=new _(16);i.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},i.compareMinX=function(t,e){return t[0]-e[0]},i.compareMinY=function(t,e){return t[1]-e[1]},i.load(t);for(var o,s=[],a=0;a<r.length;a++){var u=r[a];i.remove(u),o=w(u,o),s.push(o)}for(var c=new _(16),a=0;a<s.length;a++)c.insert(C(s[a]));for(var l=e*e,p=n*n;s.length;){var h=s.shift(),f=h.p,d=h.next.p,g=S(f,d);g<p||(g=g/l,(u=function(t,e,n,r,i,o,s){var a=new m([],E),u=t.data;for(;u;){for(var c=0;c<u.children.length;c++){var l=u.children[c],p=u.leaf?N(l,n,r):function(t,e,n){if(I(t,n)||I(e,n))return 0;var r=T(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=T(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=T(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;n=T(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===n?0:Math.min(r,i,o,n)}(n,r,l);o<p||a.push({node:l,dist:p})}for(;a.length&&!a.peek().node.children;){var h=a.pop(),f=h.node,d=N(f,e,n),g=N(f,r,i);if(h.dist<d&&h.dist<g&&x(n,f,s)&&x(r,f,s))return f}u=(u=a.pop())&&u.node}return null}(i,h.prev.p,f,d,h.next.next.p,g,c))&&Math.min(S(u,f),S(u,d))<=g&&(s.push(h),s.push(w(u,h)),i.remove(u),c.remove(h),c.insert(C(h)),c.insert(C(h.next))))}h=o;for(var y=[];y.push(h.p),h=h.next,h!==o;);return y.push(h.p),y}function E(t,e){return t.dist-e.dist}function I(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function x(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),c=Math.max(t[0],e[0]),l=Math.max(t[1],e[1]),p=n.search({minX:a,minY:u,maxX:c,maxY:l}),h=0;h<p.length;h++)if(r=p[h].p,i=p[h].next.p,o=t,r!==(s=e)&&i!==o&&0<b(r,i,o)!=0<b(r,i,s)&&0<b(o,s,r)!=0<b(o,s,i))return;return 1}function b(t,e,n){return r(t[0],t[1],e[0],e[1],n[0],n[1])}function C(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function w(t,e){t={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(t.next=e.next,(t.prev=e).next.prev=t,e.next=t):(t.prev=t).next=t,t}function S(t,e){var n=t[0]-e[0],e=t[1]-e[1];return n*n+e*e}function N(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;return 0===o&&0===s||(1<(e=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s))?(r=n[0],i=n[1]):0<e&&(r+=o*e,i+=s*e)),(o=t[0]-r)*o+(s=t[1]-i)*s}function T(t,e,n,r,i,o,s,a){var u,c,l=n-t,p=r-e,h=s-i,f=a-o,d=t-i,g=e-o,y=l*l+p*p,_=l*h+p*f,m=h*h+f*f,p=l*d+p*g,h=h*d+f*g,d=y*m-_*_,f=d,g=d;0==d?(u=0,f=1,c=h,g=m):(c=y*h-_*p,(u=_*h-m*p)<0?(u=0,c=h,g=m):f<u&&(u=f,c=h+_,g=m)),c<0?-p<(c=0)?u=0:y<-p?u=f:(u=-p,f=y):g<c&&(c=g,_-p<0?u=0:y<_-p?u=f:(u=_-p,f=y));n=(1-(g=0===c?0:c/g))*i+g*s-((1-(f=0===u?0:u/f))*t+f*n),r=(1-g)*o+g*a-((1-f)*e+f*r);return n*n+r*r}function L(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}e.exports=i,e.exports.default=i},{"point-in-polygon":160,rbush:162,"robust-predicates/umd/orient2d.min.js":163,tinyqueue:164}],46:[function(t,e,n){e.exports=function n(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce(function(t,e){return t.concat(n(e))},[]),e;case"Feature":return e.geometry?n(e.geometry).map(function(t){t={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return void 0!==e.id&&(t.id=e.id),t}):e;case"MultiPoint":return e.coordinates.map(function(t){return{type:"Point",coordinates:t}});case"MultiPolygon":return e.coordinates.map(function(t){return{type:"Polygon",coordinates:t}});case"MultiLineString":return e.coordinates.map(function(t){return{type:"LineString",coordinates:t}});case"GeometryCollection":return e.geometries.map(n).reduce(function(t,e){return t.concat(e)},[]);case"Point":case"Polygon":case"LineString":return[e]}}},{}],47:[function(t,e,n){"use strict";function a(t,e,n,r,i){!function t(e,n,r,i,o){for(;r<i;){var s,a,u,c,l;600<i-r&&(s=i-r+1,a=n-r+1,c=Math.log(s),u=.5*Math.exp(2*c/3),l=.5*Math.sqrt(c*u*(s-u)/s)*(a-s/2<0?-1:1),c=Math.max(r,Math.floor(n-a*u/s+l)),l=Math.min(i,Math.floor(n+(s-a)*u/s+l)),t(e,n,c,l,o));var p=e[n],h=r,f=i;for(d(e,r,n),0<o(e[i],p)&&d(e,r,i);h<f;){for(d(e,h,f),h++,f--;o(e[h],p)<0;)h++;for(;0<o(e[f],p);)f--}0===o(e[r],p)?d(e,r,f):d(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(t,e,n||0,r||t.length-1,i||o)}function d(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function o(t,e){return t<e?-1:e<t?1:0}function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function f(t,e){g(t,0,t.children.length,e,t)}function g(t,e,n,r,i){(i=i||_(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],l(i,t.leaf?r(o):o);return i}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function s(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function y(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function c(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(a(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),s.push(e,o,o,n))}function i(t){t=r(t);return t.insert=function(t){var e;return Array.isArray(t)?(t=v(e=t)).bbox=e:t.bbox=t.bbox||E(t),r.prototype.insert.call(this,t)},t.load=function(t){var n=[];return Array.isArray(t)?t.forEach(function(t){var e=v(t);e.bbox=t,n.push(e)}):function(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}(t,function(t){t.bbox=t.bbox||E(t),n.push(t)}),r.prototype.load.call(this,n)},t.remove=function(t){var e;return Array.isArray(t)&&((t=v(e=t)).bbox=e),r.prototype.remove.call(this,t)},t.clear=function(){return r.prototype.clear.call(this)},t.search=function(t){return{type:"FeatureCollection",features:r.prototype.search.call(this,this.toBBox(t))}},t.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},t.all=function(){return{type:"FeatureCollection",features:r.prototype.all.call(this)}},t.toJSON=function(){return r.prototype.toJSON.call(this)},t.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},t.toBBox=function(t){t=t.bbox||(Array.isArray(t)&&4===t.length?t:E(t));return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}function v(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function E(t){var e=[1/0,1/0,-1/0,-1/0];return function t(e,n,r){if(null!==e)for(var i,o,s,a,u,c,l,p,h=0,f=e.type,d="FeatureCollection"===f,g="Feature"===f,y=d?e.features.length:1,_=0;_<y;_++)for(u=(p=!!(l=d?e.features[_].geometry:g?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1,i=0;i<u;i++){var m,v=0;if(null!==(m=p?l.geometries[i]:l)){c=m.coordinates;var E=m.type,I=!r||"Polygon"!==E&&"MultiPolygon"!==E?0:1;switch(E){case null:break;case"Point":n(c,h,_,v),h++,v++;break;case"LineString":case"MultiPoint":for(o=0;o<c.length;o++)n(c[o],h,_,v),h++,"MultiPoint"===E&&v++;"LineString"===E&&v++;break;case"Polygon":case"MultiLineString":for(o=0;o<c.length;o++){for(s=0;s<c[o].length-I;s++)n(c[o][s],h,_,v),h++;"MultiLineString"===E&&v++}"Polygon"===E&&v++;break;case"MultiPolygon":for(o=0;o<c.length;o++){for(s=0;s<c[o].length;s++)for(a=0;a<c[o][s].length-I;a++)n(c[o][s][a],h,_,v),h++;v++}break;case"GeometryCollection":for(o=0;o<m.geometries.length;o++)t(m.geometries[o],n,r);break;default:throw new Error("Unknown Geometry Type")}}}}(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!c(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],c(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):h(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!c(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],c(t,s=e.leaf?n(o):o)){if(e.leaf||h(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r,i=this._build(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===i.height?this._splitRoot(this.data,i):(this.data.height<i.height&&(r=this.data,this.data=i,i=r),this._insert(i,this.data.height-i.height-1,!0)):this.data=i,this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=_([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!h(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,s=(r=s).children[0])}return this},toBBox:function(t){return t},compareMinX:s,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return f(i=_(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=_([])).leaf=!1,i.height=r;var a,u,c,l,p=Math.ceil(o/s),h=p*Math.ceil(Math.sqrt(s));for(m(t,e,n,h,this.compareMinX),a=e;a<=n;a+=h)for(m(t,a,c=Math.min(a+h-1,n),p,this.compareMinY),u=a;u<=c;u+=p)l=Math.min(u+p-1,c),i.children.push(this._build(t,u,l,r-1));return f(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,l,p,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=l=1/0,i=0,o=e.children.length;i<o;i++)u=y(s=e.children[i]),p=t,h=s,(p=(Math.max(h.maxX,p.maxX)-Math.min(h.minX,p.minX))*(Math.max(h.maxY,p.maxY)-Math.min(h.minY,p.minY))-u)<l?(l=p,c=u<c?u:c,a=s):p===l&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,n=n?t:r(t),i=[],r=this._chooseSubtree(n,this.data,e,i);for(r.children.push(t),l(r,n);0<=e&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);r=this._chooseSplitIndex(n,i,r),r=_(n.children.splice(r,n.children.length-r));r.height=n.height,r.leaf=n.leaf,f(n,this.toBBox),f(r,this.toBBox),e?t[e-1].children.push(r):this._splitRoot(n,r)},_splitRoot:function(t,e){this.data=_([t,e]),this.data.height=t.height+1,this.data.leaf=!1,f(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){for(var r,i,o,s,a,u,c,l,p,h=o=1/0,f=e;f<=n-e;f++)r=g(t,0,f,this.toBBox),i=g(t,f,n,this.toBBox),a=r,u=i,p=l=c=void 0,c=Math.max(a.minX,u.minX),l=Math.max(a.minY,u.minY),p=Math.min(a.maxX,u.maxX),u=Math.min(a.maxY,u.maxY),l=Math.max(0,p-c)*Math.max(0,u-l),i=y(r)+y(i),l<h?(h=l,s=f,o=i<o?i:o):l===h&&i<o&&(o=i,s=f);return s},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:s,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);for(var i,o=this.toBBox,s=g(t,0,e,o),a=g(t,n-e,n,o),u=p(s)+p(a),c=e;c<n-e;c++)i=t.children[c],l(s,t.leaf?o(i):i),u+=p(s);for(c=n-e-1;e<=c;c--)i=t.children[c],l(a,t.leaf?o(i):i),u+=p(a);return u},_adjustParentBBoxes:function(t,e,n){for(var r=n;0<=r;r--)l(e[r],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():f(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},e.exports=i,e.exports.default=i},{}],48:[function(t,e,n){var a=e.exports=function(t,e){if(e=e||16,void 0===t&&(t=128),t<=0)return"0";for(var n=Math.log(Math.pow(2,t))/Math.log(e),r=2;n===1/0;r*=2)n=Math.log(Math.pow(2,t/r))/Math.log(e)*r;for(var i=n-Math.floor(n),o="",r=0;r<Math.floor(n);r++)o=Math.floor(Math.random()*e).toString(e)+o;i&&(s=Math.pow(e,i),o=Math.floor(Math.random()*s).toString(e)+o);var s=parseInt(o,e);return s!==1/0&&s>=Math.pow(2,t)?a(t,e):o};a.rack=function(r,i,o){function n(t){var e=0;do{if(10<e++){if(!o)throw new Error("too many ID collisions, use more bits");r+=o}var n=a(r,i)}while(Object.hasOwnProperty.call(s,n));return s[n]=t,n}var s=n.hats={};return n.get=function(t){return n.hats[t]},n.set=function(t,e){return n.hats[t]=e,n},n.bits=r||128,n.base=i||16,n}},{}],49:[function(d,g,y){(function(f){(function(){var t,e,n,r,i,o,s,a,u,c,l,p=(c=[18,22],l=[22,24],t={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,r,i,o){var s=o.length-1;switch(i){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],void 0!==o[s-2][o[s][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(o[s][0])),o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:e=[1,12],5:6,6:n=[1,13],7:3,8:r=[1,9],9:4,10:i=[1,10],11:o=[1,11],12:1,13:2,15:7,16:8,17:s=[1,14],23:a=[1,15]},{1:[3]},{14:[1,16]},(t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n})(u=[14,18,22,24],[2,7]),t(u,[2,8]),t(u,[2,9]),t(u,[2,10]),t(u,[2,11]),t(u,[2,12]),t(u,[2,3]),t(u,[2,4]),t(u,[2,5]),t([14,18,21,22,24],[2,1]),t(u,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:23,15:7,16:8,17:s,23:a,24:[1,21],25:22},{1:[2,6]},t(u,[2,13]),{18:[1,24],22:[1,25]},t(c,[2,16]),{21:[1,26]},t(u,[2,18]),{22:[1,28],24:[1,27]},t(l,[2,20]),t(u,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:30,15:7,16:8,17:s,23:a},t(u,[2,19]),{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:31,15:7,16:8,17:s,23:a},t(c,[2,17]),t(c,[2,15]),t(l,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable){function n(t,e){this.message=t,this.hash=e}throw n.prototype=Error,new n(t,e)}this.trace(t)},parse:function(t){var e,n=this,r=[0],i=[null],o=[],s=this.table,a="",u=0,c=0,l=0,p=o.slice.call(arguments,1),h=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);h.setInput(t,f.yy),f.yy.lexer=h,f.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var d=h.yylloc;o.push(d);var g=h.options&&h.options.ranges;"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,_,m,v,E,I,x,b=function(){var t=h.lex()||1;return"number"!=typeof t&&(t=n.symbols_[t]||t),t},C={};;){if(m=r[r.length-1],void 0===(v=this.defaultActions[m]||(null==y&&(y=b()),s[m]&&s[m][y]))||!v.length||!v[0]){var w="",S=[];for(I in s[m])this.terminals_[I]&&2<I&&S.push("'"+this.terminals_[I]+"'");w=h.showPosition?"Parse error on line "+(u+1)+":\n"+h.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(w,{text:h.match,token:this.terminals_[y]||y,line:h.yylineno,loc:d,expected:S})}if(v[0]instanceof Array&&1<v.length)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+y);switch(v[0]){case 1:r.push(y),i.push(h.yytext),o.push(h.yylloc),r.push(v[1]),y=null,_?(y=_,_=null):(c=h.yyleng,a=h.yytext,u=h.yylineno,d=h.yylloc,0<l&&l--);break;case 2:if(x=this.productions_[v[1]][1],C.$=i[i.length-x],C._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},g&&(C._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),void 0!==(E=this.performAction.apply(C,[a,c,u,f.yy,v[1],i,o].concat(p))))return E;x&&(r=r.slice(0,-1*x*2),i=i.slice(0,-1*x),o=o.slice(0,-1*x)),r.push(this.productions_[v[1]][0]),i.push(C.$),o.push(C._$),x=s[r[r.length-2]][r[r.length-1]],r.push(x);break;case 3:return!0}}return!0}},l={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);t=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[t[0],t[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e)return e;if(this._backtrack){for(var i in r)this[i]=r[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length))if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(!this._backtrack)return!1;e=!1}else if(!this.options.flex)break;return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},t.lexer=l,new((h.prototype=t).Parser=h));function h(){this.yy={}}void 0!==d&&void 0!==y&&(y.parser=p,y.Parser=p.Parser,y.parse=function(){return p.parse.apply(p,arguments)},y.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),f.exit(1));t=d("fs").readFileSync(d("path").normalize(t[1]),"utf8");return y.parser.parse(t)},void 0!==g&&d.main===g&&y.main(f.argv.slice(1)))}).call(this)}).call(this,d("_process"))},{_process:161,fs:44,path:159}],50:[function(t,Gt,Ut){(function(kt){(function(){var r="__lodash_hash_undefined__",m=1,g=2,h=9007199254740991,p="[object Arguments]",f="[object Array]",e="[object AsyncFunction]",d="[object Boolean]",y="[object Date]",_="[object Error]",n="[object Function]",i="[object GeneratorFunction]",v="[object Map]",E="[object Number]",o="[object Null]",I="[object Object]",s="[object Promise]",a="[object Proxy]",x="[object RegExp]",b="[object Set]",C="[object String]",w="[object Symbol]",u="[object Undefined]",c="[object WeakMap]",S="[object ArrayBuffer]",N="[object DataView]",l=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,L={};L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L[p]=L[f]=L[S]=L[d]=L[N]=L[y]=L[_]=L[n]=L[v]=L[E]=L[I]=L[x]=L[b]=L[C]=L[c]=!1;var t="object"==typeof kt&&kt&&kt.Object===Object&&kt,O="object"==typeof self&&self&&self.Object===Object&&self,M=t||O||Function("return this")(),P="object"==typeof Ut&&Ut&&!Ut.nodeType&&Ut,A=P&&"object"==typeof Gt&&Gt&&!Gt.nodeType&&Gt,R=A&&A.exports===P,F=R&&t.process,D=function(){try{return F&&F.binding&&F.binding("util")}catch(t){}}(),O=D&&D.isTypedArray;function j(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r}function k(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var G,U,A=Array.prototype,P=Function.prototype,V=Object.prototype,t=M["__core-js_shared__"],B=P.toString,z=V.hasOwnProperty,q=(D=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"",Y=V.toString,X=RegExp("^"+B.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=R?M.Buffer:void 0,t=M.Symbol,W=M.Uint8Array,J=V.propertyIsEnumerable,H=A.splice,K=t?t.toStringTag:void 0,$=Object.getOwnPropertySymbols,D=P?P.isBuffer:void 0,Z=(G=Object.keys,U=Object,function(t){return G(U(t))}),R=bt(M,"DataView"),Q=bt(M,"Map"),A=bt(M,"Promise"),P=bt(M,"Set"),M=bt(M,"WeakMap"),tt=bt(Object,"create"),et=St(R),nt=St(Q),rt=St(A),it=St(P),ot=St(M),t=t?t.prototype:void 0,st=t?t.valueOf:void 0;function at(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ut(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ct(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function lt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ct;++e<n;)this.add(t[e])}function pt(t){t=this.__data__=new ut(t);this.size=t.size}function ht(t,e){var n,r,i,o=Lt(t),s=!o&&Tt(t),a=!o&&!s&&Ot(t),u=!o&&!s&&!a&&Dt(t),c=o||s||a||u,l=c?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],p=l.length;for(n in t)!e&&!z.call(t,n)||c&&("length"==n||a&&("offset"==n||"parent"==n)||u&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||(r=n,!!(i=null==(i=p)?h:i)&&("number"==typeof r||T.test(r))&&-1<r&&r%1==0&&r<i))||l.push(n);return l}function ft(t,e){for(var n=t.length;n--;)if(Nt(t[n][0],e))return n;return-1}function dt(t,e,n){e=e(t);return Lt(t)?e:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(e,n(t))}function gt(t){return null==t?void 0===t?u:o:K&&K in Object(t)?function(t){var e=z.call(t,K),n=t[K];try{var r=!(t[K]=void 0)}catch(t){}var i=Y.call(t);r&&(e?t[K]=n:delete t[K]);return i}(t):(t=t,Y.call(t))}function yt(t){return Rt(t)&&gt(t)==p}function _t(t,e,n,r,i){return t===e||(null==t||null==e||!Rt(t)&&!Rt(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var s=Lt(t),a=Lt(e),u=s?f:wt(t),c=a?f:wt(e),l=(u=u==p?I:u)==I,a=(c=c==p?I:c)==I,c=u==c;if(c&&Ot(t)){if(!Ot(e))return!1;l=!(s=!0)}if(c&&!l)return o=o||new pt,s||Dt(t)?Et(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(n){case N:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case S:return t.byteLength==e.byteLength&&o(new W(t),new W(e))?!0:!1;case d:case y:case E:return Nt(+t,+e);case _:return t.name==e.name&&t.message==e.message;case x:case C:return t==e+"";case v:var a=j;case b:var u=r&m;if(a=a||k,t.size!=e.size&&!u)return!1;u=s.get(t);if(u)return u==e;r|=g,s.set(t,e);a=Et(a(t),a(e),r,i,o,s);return s.delete(t),a;case w:if(st)return st.call(t)==st.call(e)}return!1}(t,e,u,n,r,i,o);if(!(n&m)){l=l&&z.call(t,"__wrapped__"),a=a&&z.call(e,"__wrapped__");if(l||a){l=l?t.value():t,a=a?e.value():e;return o=o||new pt,i(l,a,n,r,o)}}return c&&(o=o||new pt,function(t,e,n,r,i,o){var s=n&m,a=It(t),u=a.length,c=It(e).length;if(u!=c&&!s)return!1;var l=u;for(;l--;){var p=a[l];if(!(s?p in e:z.call(e,p)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);var d=s;for(;++l<u;){p=a[l];var g,y=t[p],_=e[p];if(r&&(g=s?r(_,y,p,e,t,o):r(y,_,p,t,e,o)),!(void 0===g?y===_||i(y,_,n,r,o):g)){f=!1;break}d=d||"constructor"==p}f&&!d&&(c=t.constructor,h=e.constructor,c!=h&&"constructor"in t&&"constructor"in e&&!("function"==typeof c&&c instanceof c&&"function"==typeof h&&h instanceof h)&&(f=!1));return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))}(t,e,n,r,_t,i))}function mt(t){var e;return At(t)&&(e=t,!(q&&q in e))&&(Mt(t)?X:l).test(St(t))}function vt(t){if(n="function"==typeof(n=(e=t)&&e.constructor)&&n.prototype||V,e!==n)return Z(t);var e,n,r,i=[];for(r in Object(t))z.call(t,r)&&"constructor"!=r&&i.push(r);return i}function Et(t,e,r,i,o,s){var n=r&m,a=t.length,u=e.length;if(a!=u&&!(n&&a<u))return!1;u=s.get(t);if(u&&s.get(e))return u==e;var c=-1,l=!0,p=r&g?new lt:void 0;for(s.set(t,e),s.set(e,t);++c<a;){var h,f=t[c],d=e[c];if(i&&(h=n?i(d,f,c,e,t,s):i(f,d,c,t,e,s)),void 0!==h){if(h)continue;l=!1;break}if(p){if(!function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return 1}(e,function(t,e){return n=e,!p.has(n)&&(f===t||o(f,t,r,i,s))&&p.push(e);var n})){l=!1;break}}else if(f!==d&&!o(f,d,r,i,s)){l=!1;break}}return s.delete(t),s.delete(e),l}function It(t){return dt(t,jt,Ct)}function xt(t,e){var n,r=t.__data__;return("string"==(t=typeof(n=e))||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function bt(t,e){e=e,e=null==(t=t)?void 0:t[e];return mt(e)?e:void 0}at.prototype.clear=function(){this.__data__=tt?tt(null):{},this.size=0},at.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},at.prototype.get=function(t){var e=this.__data__;if(tt){var n=e[t];return n===r?void 0:n}return z.call(e,t)?e[t]:void 0},at.prototype.has=function(t){var e=this.__data__;return tt?void 0!==e[t]:z.call(e,t)},at.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=tt&&void 0===e?r:e,this},ut.prototype.clear=function(){this.__data__=[],this.size=0},ut.prototype.delete=function(t){var e=this.__data__;return!((t=ft(e,t))<0)&&(t==e.length-1?e.pop():H.call(e,t,1),--this.size,!0)},ut.prototype.get=function(t){var e=this.__data__;return(t=ft(e,t))<0?void 0:e[t][1]},ut.prototype.has=function(t){return-1<ft(this.__data__,t)},ut.prototype.set=function(t,e){var n=this.__data__,r=ft(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},ct.prototype.clear=function(){this.size=0,this.__data__={hash:new at,map:new(Q||ut),string:new at}},ct.prototype.delete=function(t){return t=xt(this,t).delete(t),this.size-=t?1:0,t},ct.prototype.get=function(t){return xt(this,t).get(t)},ct.prototype.has=function(t){return xt(this,t).has(t)},ct.prototype.set=function(t,e){var n=xt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},lt.prototype.add=lt.prototype.push=function(t){return this.__data__.set(t,r),this},lt.prototype.has=function(t){return this.__data__.has(t)},pt.prototype.clear=function(){this.__data__=new ut,this.size=0},pt.prototype.delete=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t},pt.prototype.get=function(t){return this.__data__.get(t)},pt.prototype.has=function(t){return this.__data__.has(t)},pt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof ut){var r=n.__data__;if(!Q||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ct(r)}return n.set(t,e),this.size=n.size,this};var Ct=$?function(e){return null==e?[]:(e=Object(e),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}($(e),function(t){return J.call(e,t)}))}:function(){return[]},wt=gt;function St(t){if(null!=t){try{return B.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Nt(t,e){return t===e||t!=t&&e!=e}(R&&wt(new R(new ArrayBuffer(1)))!=N||Q&&wt(new Q)!=v||A&&wt(A.resolve())!=s||P&&wt(new P)!=b||M&&wt(new M)!=c)&&(wt=function(t){var e=gt(t),t=e==I?t.constructor:void 0,t=t?St(t):"";if(t)switch(t){case et:return N;case nt:return v;case rt:return s;case it:return b;case ot:return c}return e});var Tt=yt(function(){return arguments}())?yt:function(t){return Rt(t)&&z.call(t,"callee")&&!J.call(t,"callee")},Lt=Array.isArray;var Ot=D||function(){return!1};function Mt(t){if(At(t)){t=gt(t);return t==n||t==i||t==e||t==a}}function Pt(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=h}function At(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Rt(t){return null!=t&&"object"==typeof t}var Ft,Dt=O?(Ft=O,function(t){return Ft(t)}):function(t){return Rt(t)&&Pt(t.length)&&!!L[gt(t)]};function jt(t){return(null!=(e=t)&&Pt(e.length)&&!Mt(e)?ht:vt)(t);var e}Gt.exports=function(t,e){return _t(t,e)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],51:[function(t,e,n){t=t("./_getNative")(t("./_root"),"DataView");e.exports=t},{"./_getNative":100,"./_root":135}],52:[function(t,e,n){var r=t("./_hashClear"),i=t("./_hashDelete"),o=t("./_hashGet"),s=t("./_hashHas"),t=t("./_hashSet");function a(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}a.prototype.clear=r,a.prototype.delete=i,a.prototype.get=o,a.prototype.has=s,a.prototype.set=t,e.exports=a},{"./_hashClear":107,"./_hashDelete":108,"./_hashGet":109,"./_hashHas":110,"./_hashSet":111}],53:[function(t,e,n){var r=t("./_listCacheClear"),i=t("./_listCacheDelete"),o=t("./_listCacheGet"),s=t("./_listCacheHas"),t=t("./_listCacheSet");function a(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}a.prototype.clear=r,a.prototype.delete=i,a.prototype.get=o,a.prototype.has=s,a.prototype.set=t,e.exports=a},{"./_listCacheClear":119,"./_listCacheDelete":120,"./_listCacheGet":121,"./_listCacheHas":122,"./_listCacheSet":123}],54:[function(t,e,n){t=t("./_getNative")(t("./_root"),"Map");e.exports=t},{"./_getNative":100,"./_root":135}],55:[function(t,e,n){var r=t("./_mapCacheClear"),i=t("./_mapCacheDelete"),o=t("./_mapCacheGet"),s=t("./_mapCacheHas"),t=t("./_mapCacheSet");function a(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}a.prototype.clear=r,a.prototype.delete=i,a.prototype.get=o,a.prototype.has=s,a.prototype.set=t,e.exports=a},{"./_mapCacheClear":124,"./_mapCacheDelete":125,"./_mapCacheGet":126,"./_mapCacheHas":127,"./_mapCacheSet":128}],56:[function(t,e,n){t=t("./_getNative")(t("./_root"),"Promise");e.exports=t},{"./_getNative":100,"./_root":135}],57:[function(t,e,n){t=t("./_getNative")(t("./_root"),"Set");e.exports=t},{"./_getNative":100,"./_root":135}],58:[function(t,e,n){var r=t("./_ListCache"),i=t("./_stackClear"),o=t("./_stackDelete"),s=t("./_stackGet"),a=t("./_stackHas"),t=t("./_stackSet");function u(t){t=this.__data__=new r(t);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=s,u.prototype.has=a,u.prototype.set=t,e.exports=u},{"./_ListCache":53,"./_stackClear":136,"./_stackDelete":137,"./_stackGet":138,"./_stackHas":139,"./_stackSet":140}],59:[function(t,e,n){t=t("./_root").Symbol;e.exports=t},{"./_root":135}],60:[function(t,e,n){t=t("./_root").Uint8Array;e.exports=t},{"./_root":135}],61:[function(t,e,n){t=t("./_getNative")(t("./_root"),"WeakMap");e.exports=t},{"./_getNative":100,"./_root":135}],62:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},{}],63:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}},{}],64:[function(t,e,n){var l=t("./_baseTimes"),p=t("./isArguments"),h=t("./isArray"),f=t("./isBuffer"),d=t("./_isIndex"),g=t("./isTypedArray"),y=Object.prototype.hasOwnProperty;e.exports=function(t,e){var n,r=h(t),i=!r&&p(t),o=!r&&!i&&f(t),s=!r&&!i&&!o&&g(t),a=r||i||o||s,u=a?l(t.length,String):[],c=u.length;for(n in t)!e&&!y.call(t,n)||a&&("length"==n||o&&("offset"==n||"parent"==n)||s&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||d(n,c))||u.push(n);return u}},{"./_baseTimes":82,"./_isIndex":115,"./isArguments":144,"./isArray":145,"./isBuffer":147,"./isTypedArray":154}],65:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},{}],66:[function(t,e,n){var i=t("./_baseAssignValue"),o=t("./eq"),s=Object.prototype.hasOwnProperty;e.exports=function(t,e,n){var r=t[e];s.call(t,e)&&o(r,n)&&(void 0!==n||e in t)||i(t,e,n)}},{"./_baseAssignValue":70,"./eq":143}],67:[function(t,e,n){var r=t("./eq");e.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},{"./eq":143}],68:[function(t,e,n){var r=t("./_copyObject"),i=t("./keys");e.exports=function(t,e){return t&&r(e,i(e),t)}},{"./_copyObject":91,"./keys":155}],69:[function(t,e,n){var r=t("./_copyObject"),i=t("./keysIn");e.exports=function(t,e){return t&&r(e,i(e),t)}},{"./_copyObject":91,"./keysIn":156}],70:[function(t,e,n){var r=t("./_defineProperty");e.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},{"./_defineProperty":95}],71:[function(t,e,n){var d=t("./_Stack"),g=t("./_arrayEach"),y=t("./_assignValue"),_=t("./_baseAssign"),m=t("./_baseAssignIn"),v=t("./_cloneBuffer"),E=t("./_copyArray"),I=t("./_copySymbols"),x=t("./_copySymbolsIn"),b=t("./_getAllKeys"),C=t("./_getAllKeysIn"),w=t("./_getTag"),S=t("./_initCloneArray"),N=t("./_initCloneByTag"),T=t("./_initCloneObject"),L=t("./isArray"),O=t("./isBuffer"),M=t("./isMap"),P=t("./isObject"),A=t("./isSet"),R=t("./keys"),F=t("./keysIn"),D=1,j=2,k=4,G="[object Arguments]",U="[object Function]",V="[object GeneratorFunction]",B="[object Object]",z={};z[G]=z["[object Array]"]=z["[object ArrayBuffer]"]=z["[object DataView]"]=z["[object Boolean]"]=z["[object Date]"]=z["[object Float32Array]"]=z["[object Float64Array]"]=z["[object Int8Array]"]=z["[object Int16Array]"]=z["[object Int32Array]"]=z["[object Map]"]=z["[object Number]"]=z[B]=z["[object RegExp]"]=z["[object Set]"]=z["[object String]"]=z["[object Symbol]"]=z["[object Uint8Array]"]=z["[object Uint8ClampedArray]"]=z["[object Uint16Array]"]=z["[object Uint32Array]"]=!0,z["[object Error]"]=z[U]=z["[object WeakMap]"]=!1,e.exports=function n(r,i,o,t,e,s){var a,u=i&D,c=i&j,l=i&k;if(o&&(a=e?o(r,t,e,s):o(r)),void 0!==a)return a;if(!P(r))return r;var p=L(r);if(p){if(a=S(r),!u)return E(r,a)}else{var h=w(r),t=h==U||h==V;if(O(r))return v(r,u);if(h==B||h==G||t&&!e){if(a=c||t?{}:T(r),!u)return c?x(r,m(a,r)):I(r,_(a,r))}else{if(!z[h])return e?r:{};a=N(r,h,u)}}u=(s=s||new d).get(r);if(u)return u;s.set(r,a),A(r)?r.forEach(function(t){a.add(n(t,i,o,t,r,s))}):M(r)&&r.forEach(function(t,e){a.set(e,n(t,i,o,e,r,s))});var f=p?void 0:(l?c?C:b:c?F:R)(r);return g(f||r,function(t,e){f&&(t=r[e=t]),y(a,e,n(t,i,o,e,r,s))}),a}},{"./_Stack":58,"./_arrayEach":62,"./_assignValue":66,"./_baseAssign":68,"./_baseAssignIn":69,"./_cloneBuffer":85,"./_copyArray":90,"./_copySymbols":92,"./_copySymbolsIn":93,"./_getAllKeys":97,"./_getAllKeysIn":98,"./_getTag":105,"./_initCloneArray":112,"./_initCloneByTag":113,"./_initCloneObject":114,"./isArray":145,"./isBuffer":147,"./isMap":150,"./isObject":151,"./isSet":153,"./keys":155,"./keysIn":156}],72:[function(t,e,n){var r=t("./isObject"),i=Object.create,t=function(t){if(!r(t))return{};if(i)return i(t);o.prototype=t;t=new o;return o.prototype=void 0,t};function o(){}e.exports=t},{"./isObject":151}],73:[function(t,e,n){var r=t("./_arrayPush"),i=t("./isArray");e.exports=function(t,e,n){return e=e(t),i(t)?e:r(e,n(t))}},{"./_arrayPush":65,"./isArray":145}],74:[function(t,e,n){var r=t("./_Symbol"),i=t("./_getRawTag"),o=t("./_objectToString"),s=r?r.toStringTag:void 0;e.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(s&&s in Object(t)?i:o)(t)}},{"./_Symbol":59,"./_getRawTag":102,"./_objectToString":133}],75:[function(t,e,n){var r=t("./_baseGetTag"),i=t("./isObjectLike");e.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},{"./_baseGetTag":74,"./isObjectLike":152}],76:[function(t,e,n){var r=t("./_getTag"),i=t("./isObjectLike");e.exports=function(t){return i(t)&&"[object Map]"==r(t)}},{"./_getTag":105,"./isObjectLike":152}],77:[function(t,e,n){var r=t("./isFunction"),i=t("./_isMasked"),o=t("./isObject"),s=t("./_toSource"),a=/^\[object .+?Constructor\]$/,u=Function.prototype,t=Object.prototype,u=u.toString,t=t.hasOwnProperty,c=RegExp("^"+u.call(t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t){return!(!o(t)||i(t))&&(r(t)?c:a).test(s(t))}},{"./_isMasked":117,"./_toSource":141,"./isFunction":148,"./isObject":151}],78:[function(t,e,n){var r=t("./_getTag"),i=t("./isObjectLike");e.exports=function(t){return i(t)&&"[object Set]"==r(t)}},{"./_getTag":105,"./isObjectLike":152}],79:[function(t,e,n){var r=t("./_baseGetTag"),i=t("./isLength"),o=t("./isObjectLike"),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(t){return o(t)&&i(t.length)&&!!s[r(t)]}},{"./_baseGetTag":74,"./isLength":149,"./isObjectLike":152}],80:[function(t,e,n){var r=t("./_isPrototype"),i=t("./_nativeKeys"),o=Object.prototype.hasOwnProperty;e.exports=function(t){if(!r(t))return i(t);var e,n=[];for(e in Object(t))o.call(t,e)&&"constructor"!=e&&n.push(e);return n}},{"./_isPrototype":118,"./_nativeKeys":130}],81:[function(t,e,n){var i=t("./isObject"),o=t("./_isPrototype"),s=t("./_nativeKeysIn"),a=Object.prototype.hasOwnProperty;e.exports=function(t){if(!i(t))return s(t);var e,n=o(t),r=[];for(e in t)("constructor"!=e||!n&&a.call(t,e))&&r.push(e);return r}},{"./_isPrototype":118,"./_nativeKeysIn":131,"./isObject":151}],82:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},{}],83:[function(t,e,n){e.exports=function(e){return function(t){return e(t)}}},{}],84:[function(t,e,n){var r=t("./_Uint8Array");e.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},{"./_Uint8Array":60}],85:[function(t,e,n){var r=t("./_root"),t="object"==typeof n&&n&&!n.nodeType&&n,n=t&&"object"==typeof e&&e&&!e.nodeType&&e,r=n&&n.exports===t?r.Buffer:void 0,i=r?r.allocUnsafe:void 0;e.exports=function(t,e){return e?t.slice():(e=t.length,e=i?i(e):new t.constructor(e),t.copy(e),e)}},{"./_root":135}],86:[function(t,e,n){var r=t("./_cloneArrayBuffer");e.exports=function(t,e){return e=e?r(t.buffer):t.buffer,new t.constructor(e,t.byteOffset,t.byteLength)}},{"./_cloneArrayBuffer":84}],87:[function(t,e,n){var r=/\w*$/;e.exports=function(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}},{}],88:[function(t,e,n){var t=t("./_Symbol"),t=t?t.prototype:void 0,r=t?t.valueOf:void 0;e.exports=function(t){return r?Object(r.call(t)):{}}},{"./_Symbol":59}],89:[function(t,e,n){var r=t("./_cloneArrayBuffer");e.exports=function(t,e){return e=e?r(t.buffer):t.buffer,new t.constructor(e,t.byteOffset,t.length)}},{"./_cloneArrayBuffer":84}],90:[function(t,e,n){e.exports=function(t,e){var n=-1,r=t.length;for(e=e||Array(r);++n<r;)e[n]=t[n];return e}},{}],91:[function(t,e,n){var c=t("./_assignValue"),l=t("./_baseAssignValue");e.exports=function(t,e,n,r){var i=!n;n=n||{};for(var o=-1,s=e.length;++o<s;){var a=e[o],u=r?r(n[a],t[a],a,n,t):void 0;void 0===u&&(u=t[a]),(i?l:c)(n,a,u)}return n}},{"./_assignValue":66,"./_baseAssignValue":70}],92:[function(t,e,n){var r=t("./_copyObject"),i=t("./_getSymbols");e.exports=function(t,e){return r(t,i(t),e)}},{"./_copyObject":91,"./_getSymbols":103}],93:[function(t,e,n){var r=t("./_copyObject"),i=t("./_getSymbolsIn");e.exports=function(t,e){return r(t,i(t),e)}},{"./_copyObject":91,"./_getSymbolsIn":104}],94:[function(t,e,n){t=t("./_root")["__core-js_shared__"];e.exports=t},{"./_root":135}],95:[function(t,e,n){var r=t("./_getNative"),t=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.exports=t},{"./_getNative":100}],96:[function(t,n,e){(function(e){(function(){var t="object"==typeof e&&e&&e.Object===Object&&e;n.exports=t}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],97:[function(t,e,n){var r=t("./_baseGetAllKeys"),i=t("./_getSymbols"),o=t("./keys");e.exports=function(t){return r(t,o,i)}},{"./_baseGetAllKeys":73,"./_getSymbols":103,"./keys":155}],98:[function(t,e,n){var r=t("./_baseGetAllKeys"),i=t("./_getSymbolsIn"),o=t("./keysIn");e.exports=function(t){return r(t,o,i)}},{"./_baseGetAllKeys":73,"./_getSymbolsIn":104,"./keysIn":156}],99:[function(t,e,n){var r=t("./_isKeyable");e.exports=function(t,e){return t=t.__data__,r(e)?t["string"==typeof e?"string":"hash"]:t.map}},{"./_isKeyable":116}],100:[function(t,e,n){var r=t("./_baseIsNative"),i=t("./_getValue");e.exports=function(t,e){return e=i(t,e),r(e)?e:void 0}},{"./_baseIsNative":77,"./_getValue":106}],101:[function(t,e,n){t=t("./_overArg")(Object.getPrototypeOf,Object);e.exports=t},{"./_overArg":134}],102:[function(t,e,n){var r=t("./_Symbol"),t=Object.prototype,o=t.hasOwnProperty,s=t.toString,a=r?r.toStringTag:void 0;e.exports=function(t){var e=o.call(t,a),n=t[a];try{var r=!(t[a]=void 0)}catch(t){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},{"./_Symbol":59}],103:[function(t,e,n){var r=t("./_arrayFilter"),t=t("./stubArray"),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,t=o?function(e){return null==e?[]:(e=Object(e),r(o(e),function(t){return i.call(e,t)}))}:t;e.exports=t},{"./_arrayFilter":63,"./stubArray":157}],104:[function(t,e,n){var r=t("./_arrayPush"),i=t("./_getPrototype"),o=t("./_getSymbols"),t=t("./stubArray"),t=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:t;e.exports=t},{"./_arrayPush":65,"./_getPrototype":101,"./_getSymbols":103,"./stubArray":157}],105:[function(t,e,n){var r=t("./_DataView"),i=t("./_Map"),o=t("./_Promise"),s=t("./_Set"),a=t("./_WeakMap"),u=t("./_baseGetTag"),c=t("./_toSource"),l="[object Map]",p="[object Promise]",h="[object Set]",f="[object WeakMap]",d="[object DataView]",g=c(r),y=c(i),_=c(o),m=c(s),v=c(a),t=u;(r&&t(new r(new ArrayBuffer(1)))!=d||i&&t(new i)!=l||o&&t(o.resolve())!=p||s&&t(new s)!=h||a&&t(new a)!=f)&&(t=function(t){var e=u(t),t="[object Object]"==e?t.constructor:void 0,t=t?c(t):"";if(t)switch(t){case g:return d;case y:return l;case _:return p;case m:return h;case v:return f}return e}),e.exports=t},{"./_DataView":51,"./_Map":54,"./_Promise":56,"./_Set":57,"./_WeakMap":61,"./_baseGetTag":74,"./_toSource":141}],106:[function(t,e,n){e.exports=function(t,e){return null==t?void 0:t[e]}},{}],107:[function(t,e,n){var r=t("./_nativeCreate");e.exports=function(){this.__data__=r?r(null):{},this.size=0}},{"./_nativeCreate":129}],108:[function(t,e,n){e.exports=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t}},{}],109:[function(t,e,n){var r=t("./_nativeCreate"),i=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},{"./_nativeCreate":129}],110:[function(t,e,n){var r=t("./_nativeCreate"),i=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},{"./_nativeCreate":129}],111:[function(t,e,n){var r=t("./_nativeCreate");e.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},{"./_nativeCreate":129}],112:[function(t,e,n){var r=Object.prototype.hasOwnProperty;e.exports=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&r.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},{}],113:[function(t,e,n){var i=t("./_cloneArrayBuffer"),o=t("./_cloneDataView"),s=t("./_cloneRegExp"),a=t("./_cloneSymbol"),u=t("./_cloneTypedArray");e.exports=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return i(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return o(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return s(t);case"[object Set]":return new r;case"[object Symbol]":return a(t)}}},{"./_cloneArrayBuffer":84,"./_cloneDataView":86,"./_cloneRegExp":87,"./_cloneSymbol":88,"./_cloneTypedArray":89}],114:[function(t,e,n){var r=t("./_baseCreate"),i=t("./_getPrototype"),o=t("./_isPrototype");e.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},{"./_baseCreate":72,"./_getPrototype":101,"./_isPrototype":118}],115:[function(t,e,n){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&r.test(t))&&-1<t&&t%1==0&&t<e}},{}],116:[function(t,e,n){e.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},{}],117:[function(t,e,n){var t=t("./_coreJsData"),r=(t=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";e.exports=function(t){return!!r&&r in t}},{"./_coreJsData":94}],118:[function(t,e,n){var r=Object.prototype;e.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},{}],119:[function(t,e,n){e.exports=function(){this.__data__=[],this.size=0}},{}],120:[function(t,e,n){var r=t("./_assocIndexOf"),i=Array.prototype.splice;e.exports=function(t){var e=this.__data__;return!((t=r(e,t))<0)&&(t==e.length-1?e.pop():i.call(e,t,1),--this.size,!0)}},{"./_assocIndexOf":67}],121:[function(t,e,n){var r=t("./_assocIndexOf");e.exports=function(t){var e=this.__data__;return(t=r(e,t))<0?void 0:e[t][1]}},{"./_assocIndexOf":67}],122:[function(t,e,n){var r=t("./_assocIndexOf");e.exports=function(t){return-1<r(this.__data__,t)}},{"./_assocIndexOf":67}],123:[function(t,e,n){var i=t("./_assocIndexOf");e.exports=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},{"./_assocIndexOf":67}],124:[function(t,e,n){var r=t("./_Hash"),i=t("./_ListCache"),o=t("./_Map");e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},{"./_Hash":52,"./_ListCache":53,"./_Map":54}],125:[function(t,e,n){var r=t("./_getMapData");e.exports=function(t){return t=r(this,t).delete(t),this.size-=t?1:0,t}},{"./_getMapData":99}],126:[function(t,e,n){var r=t("./_getMapData");e.exports=function(t){return r(this,t).get(t)}},{"./_getMapData":99}],127:[function(t,e,n){var r=t("./_getMapData");e.exports=function(t){return r(this,t).has(t)}},{"./_getMapData":99}],128:[function(t,e,n){var i=t("./_getMapData");e.exports=function(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},{"./_getMapData":99}],129:[function(t,e,n){t=t("./_getNative")(Object,"create");e.exports=t},{"./_getNative":100}],130:[function(t,e,n){t=t("./_overArg")(Object.keys,Object);e.exports=t},{"./_overArg":134}],131:[function(t,e,n){e.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},{}],132:[function(t,e,n){var t=t("./_freeGlobal"),n="object"==typeof n&&n&&!n.nodeType&&n,r=n&&"object"==typeof e&&e&&!e.nodeType&&e,i=r&&r.exports===n&&t.process,t=function(){try{var t=r&&r.require&&r.require("util").types;return t?t:i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=t},{"./_freeGlobal":96}],133:[function(t,e,n){var r=Object.prototype.toString;e.exports=function(t){return r.call(t)}},{}],134:[function(t,e,n){e.exports=function(e,n){return function(t){return e(n(t))}}},{}],135:[function(t,e,n){var r=t("./_freeGlobal"),t="object"==typeof self&&self&&self.Object===Object&&self,t=r||t||Function("return this")();e.exports=t},{"./_freeGlobal":96}],136:[function(t,e,n){var r=t("./_ListCache");e.exports=function(){this.__data__=new r,this.size=0}},{"./_ListCache":53}],137:[function(t,e,n){e.exports=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t}},{}],138:[function(t,e,n){e.exports=function(t){return this.__data__.get(t)}},{}],139:[function(t,e,n){e.exports=function(t){return this.__data__.has(t)}},{}],140:[function(t,e,n){var i=t("./_ListCache"),o=t("./_Map"),s=t("./_MapCache");e.exports=function(t,e){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!o||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new s(r)}return n.set(t,e),this.size=n.size,this}},{"./_ListCache":53,"./_Map":54,"./_MapCache":55}],141:[function(t,e,n){var r=Function.prototype.toString;e.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},{}],142:[function(t,e,n){var r=t("./_baseClone");e.exports=function(t){return r(t,5)}},{"./_baseClone":71}],143:[function(t,e,n){e.exports=function(t,e){return t===e||t!=t&&e!=e}},{}],144:[function(t,e,n){var r=t("./_baseIsArguments"),i=t("./isObjectLike"),t=Object.prototype,o=t.hasOwnProperty,s=t.propertyIsEnumerable,r=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,"callee")&&!s.call(t,"callee")};e.exports=r},{"./_baseIsArguments":75,"./isObjectLike":152}],145:[function(t,e,n){var r=Array.isArray;e.exports=r},{}],146:[function(t,e,n){var r=t("./isFunction"),i=t("./isLength");e.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},{"./isFunction":148,"./isLength":149}],147:[function(t,e,n){var r=t("./_root"),i=t("./stubFalse"),t="object"==typeof n&&n&&!n.nodeType&&n,n=t&&"object"==typeof e&&e&&!e.nodeType&&e,r=n&&n.exports===t?r.Buffer:void 0,i=(r?r.isBuffer:void 0)||i;e.exports=i},{"./_root":135,"./stubFalse":158}],148:[function(t,e,n){var r=t("./_baseGetTag"),i=t("./isObject");e.exports=function(t){return!!i(t)&&("[object Function]"==(t=r(t))||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t)}},{"./_baseGetTag":74,"./isObject":151}],149:[function(t,e,n){e.exports=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}},{}],150:[function(t,e,n){var r=t("./_baseIsMap"),i=t("./_baseUnary"),t=t("./_nodeUtil"),t=t&&t.isMap,r=t?i(t):r;e.exports=r},{"./_baseIsMap":76,"./_baseUnary":83,"./_nodeUtil":132}],151:[function(t,e,n){e.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},{}],152:[function(t,e,n){e.exports=function(t){return null!=t&&"object"==typeof t}},{}],153:[function(t,e,n){var r=t("./_baseIsSet"),i=t("./_baseUnary"),t=t("./_nodeUtil"),t=t&&t.isSet,r=t?i(t):r;e.exports=r},{"./_baseIsSet":78,"./_baseUnary":83,"./_nodeUtil":132}],154:[function(t,e,n){var r=t("./_baseIsTypedArray"),i=t("./_baseUnary"),t=t("./_nodeUtil"),t=t&&t.isTypedArray,r=t?i(t):r;e.exports=r},{"./_baseIsTypedArray":79,"./_baseUnary":83,"./_nodeUtil":132}],155:[function(t,e,n){var r=t("./_arrayLikeKeys"),i=t("./_baseKeys"),o=t("./isArrayLike");e.exports=function(t){return(o(t)?r:i)(t)}},{"./_arrayLikeKeys":64,"./_baseKeys":80,"./isArrayLike":146}],156:[function(t,e,n){var r=t("./_arrayLikeKeys"),i=t("./_baseKeysIn"),o=t("./isArrayLike");e.exports=function(t){return o(t)?r(t,!0):i(t)}},{"./_arrayLikeKeys":64,"./_baseKeysIn":81,"./isArrayLike":146}],157:[function(t,e,n){e.exports=function(){return[]}},{}],158:[function(t,e,n){e.exports=function(){return!1}},{}],159:[function(t,e,c){(function(s){(function(){function i(t,e){for(var n=0,r=t.length-1;0<=r;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;)t.unshift("..");return t}function o(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}c.resolve=function(){for(var t="",e=!1,n=arguments.length-1;-1<=n&&!e;n--){var r=0<=n?arguments[n]:s.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,e="/"===r.charAt(0))}return(e?"/":"")+(t=i(o(t.split("/"),function(t){return!!t}),!e).join("/"))||"."},c.normalize=function(t){var e=c.isAbsolute(t),n="/"===r(t,-1);return(t=i(o(t.split("/"),function(t){return!!t}),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},c.isAbsolute=function(t){return"/"===t.charAt(0)},c.join=function(){var t=Array.prototype.slice.call(arguments,0);return c.normalize(o(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},c.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;0<=n&&""===t[n];n--);return n<e?[]:t.slice(e,n-e+1)}t=c.resolve(t).substr(1),e=c.resolve(e).substr(1);for(var r=n(t.split("/")),i=n(e.split("/")),o=Math.min(r.length,i.length),s=o,a=0;a<o;a++)if(r[a]!==i[a]){s=a;break}for(var u=[],a=s;a<r.length;a++)u.push("..");return(u=u.concat(i.slice(s))).join("/")},c.sep="/",c.delimiter=":",c.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;1<=o;--o)if(47===t.charCodeAt(o)){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},c.basename=function(t,e){t=function(t){"string"!=typeof t&&(t+="");for(var e=0,n=-1,r=!0,i=t.length-1;0<=i;--i)if(47===t.charCodeAt(i)){if(!r){e=i+1;break}}else-1===n&&(r=!1,n=i+1);return-1===n?"":t.slice(e,n)}(t);return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t},c.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,s=t.length-1;0<=s;--s){var a=t.charCodeAt(s);if(47===a){if(i)continue;n=s+1;break}-1===r&&(i=!1,r=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1)}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var r="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this)}).call(this,t("_process"))},{_process:161}],160:[function(t,e,n){e.exports=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],c=e[s][0],l=e[s][1];r<u!=r<l&&n<(c-a)*(r-u)/(l-u)+a&&(i=!i)}return i}},{}],161:[function(t,e,n){var r,i,e=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,c=[],l=!1,p=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):p=-1,c.length&&f())}function f(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++p<e;)u&&u[p].run();p=-1,e=c.length}u=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}e.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=g,e.addListener=g,e.once=g,e.off=g,e.removeListener=g,e.removeAllListeners=g,e.emit=g,e.prependListener=g,e.prependOnceListener=g,e.listeners=function(t){return[]},e.binding=function(t){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(t){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],162:[function(t,e,n){var r,i;r=this,i=function(){"use strict";function f(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function c(t,e){return t<e?-1:e<t?1:0}function t(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function d(t,e){g(t,0,t.children.length,e,t)}function g(t,e,n,r,i){(i=i||m(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];h(i,t.leaf?r(s):s)}return i}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function o(t,e){return t.minX-e.minX}function s(t,e){return t.minY-e.minY}function y(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function _(t){return t.maxX-t.minX+(t.maxY-t.minY)}function l(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function u(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,n,r,i){for(var o,s,a,u=[e,n];u.length;)(n=u.pop())-(e=u.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,a=i,function t(e,n,r,i,o){for(;r<i;){var s,a,u,c;600<i-r&&(s=i-r+1,a=n-r+1,c=Math.log(s),u=.5*Math.exp(2*c/3),c=.5*Math.sqrt(c*u*(s-u)/s)*(a-s/2<0?-1:1),t(e,n,Math.max(r,Math.floor(n-a*u/s+c)),Math.min(i,Math.floor(n+(s-a)*u/s+c)),o));var l=e[n],p=r,h=i;for(f(e,r,n),0<o(e[i],l)&&f(e,r,i);p<h;){for(f(e,p,h),p++,h--;o(e[p],l)<0;)p++;for(;0<o(e[h],l);)h--}0===o(e[r],l)?f(e,r,h):f(e,++h,i),h<=n&&(r=h+1),n<=h&&(i=h-1)}}(s=t,o,e||0,n||s.length-1,a||c),u.push(e,o,o,n))}return t.prototype.all=function(){return this._all(this.data,[])},t.prototype.search=function(t){var e=this.data,n=[];if(!u(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;u(t,a)&&(e.leaf?n.push(s):l(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n},t.prototype.collides=function(t){var e=this.data;if(!u(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(u(t,o)){if(e.leaf||l(t,o))return!0;n.push(i)}}e=n.pop()}return!1},t.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n,r=this._build(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===r.height?this._splitRoot(this.data,r):(this.data.height<r.height&&(n=this.data,this.data=r,r=n),this._insert(r,this.data.height-r.height-1,!0)):this.data=r,this},t.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},t.prototype.clear=function(){return this.data=m([]),this},t.prototype.remove=function(t,e){if(!t)return this;for(var n,r,i,o=this.data,s=this.toBBox(t),a=[],u=[];o||a.length;){if(o||(o=a.pop(),r=a[a.length-1],n=u.pop(),i=!0),o.leaf){var c=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,o.children,e);if(-1!==c)return o.children.splice(c,1),a.push(o),this._condense(a),this}i||o.leaf||!l(o,s)?r?(n++,o=r.children[n],i=!1):o=null:(a.push(o),u.push(n),n=0,o=(r=o).children[0])}return this},t.prototype.toBBox=function(t){return t},t.prototype.compareMinX=function(t,e){return t.minX-e.minX},t.prototype.compareMinY=function(t,e){return t.minY-e.minY},t.prototype.toJSON=function(){return this.data},t.prototype.fromJSON=function(t){return this.data=t,this},t.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},t.prototype._build=function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return d(i=m(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=m([])).leaf=!1,i.height=r;var a=Math.ceil(o/s),u=a*Math.ceil(Math.sqrt(s));v(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var l=Math.min(c+u-1,n);v(t,c,l,a,this.compareMinY);for(var p=c;p<=l;p+=a){var h=Math.min(p+a-1,l);i.children.push(this._build(t,p,h,r-1))}}return d(i,this.toBBox),i},t.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var u=e.children[a],c=y(u),l=(l=t,p=u,(Math.max(p.maxX,l.maxX)-Math.min(p.minX,l.minX))*(Math.max(p.maxY,l.maxY)-Math.min(p.minY,l.minY))-c);l<o?(o=l,i=c<i?c:i,s=u):l===o&&c<i&&(i=c,s=u)}e=s||e.children[0]}var l,p;return e},t.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],n=this._chooseSubtree(r,this.data,e,i);for(n.children.push(t),h(n,r);0<=e&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},t.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);r=this._chooseSplitIndex(n,i,r),r=m(n.children.splice(r,n.children.length-r));r.height=n.height,r.leaf=n.leaf,d(n,this.toBBox),d(r,this.toBBox),e?t[e-1].children.push(r):this._splitRoot(n,r)},t.prototype._splitRoot=function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,d(this.data,this.toBBox)},t.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,a,u,c=1/0,l=1/0,p=e;p<=n-e;p++){var h=g(t,0,p,this.toBBox),f=g(t,p,n,this.toBBox),d=(i=h,o=f,0,s=Math.max(i.minX,o.minX),d=Math.max(i.minY,o.minY),a=Math.min(i.maxX,o.maxX),u=Math.min(i.maxY,o.maxY),Math.max(0,a-s)*Math.max(0,u-d)),f=y(h)+y(f);d<c?(c=d,r=p,l=f<l?f:l):d===c&&f<l&&(l=f,r=p)}return r||n-e},t.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:o,i=t.leaf?this.compareMinY:s;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},t.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=g(t,0,e,i),s=g(t,n-e,n,i),a=_(o)+_(s),u=e;u<n-e;u++){var c=t.children[u];h(o,t.leaf?i(c):c),a+=_(o)}for(var l=n-e-1;e<=l;l--){var p=t.children[l];h(s,t.leaf?i(p):p),a+=_(s)}return a},t.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;0<=r;r--)h(e[r],t)},t.prototype._condense=function(t){for(var e=t.length-1,n=void 0;0<=e;e--)0===t[e].children.length?0<e?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():d(t[e],this.toBBox)},t},"object"==typeof n&&void 0!==e?e.exports=i():(r=r||self).RBush=i()},{}],163:[function(t,e,n){var r;r=this,function(t){"use strict";var M=134217729;function P(t,e,n,r,i){let o,s,a,u,c=e[0],l=r[0],p=0,h=0;l>c==l>-c?(o=c,c=e[++p]):(o=l,l=r[++h]);let f=0;if(p<t&&h<n)for(l>c==l>-c?(a=o-((s=c+o)-c),c=e[++p]):(a=o-((s=l+o)-l),l=r[++h]),o=s,0!==a&&(i[f++]=a);p<t&&h<n;)l>c==l>-c?(a=o-((s=o+c)-(u=s-o))+(c-u),c=e[++p]):(a=o-((s=o+l)-(u=s-o))+(l-u),l=r[++h]),o=s,0!==a&&(i[f++]=a);for(;p<t;)a=o-((s=o+c)-(u=s-o))+(c-u),c=e[++p],o=s,0!==a&&(i[f++]=a);for(;h<n;)a=o-((s=o+l)-(u=s-o))+(l-u),l=r[++h],o=s,0!==a&&(i[f++]=a);return 0===o&&0!==f||(i[f++]=o),f}function e(t){return new Float64Array(t)}const A=e(4),R=e(8),F=e(12),D=e(16),j=e(4);t.orient2d=function(t,e,n,r,i,o){var s=(e-o)*(n-i),a=(t-i)*(r-o),u=s-a;if(0==s||0==a||0<s!=0<a)return u;a=Math.abs(s+a);return Math.abs(u)>=33306690738754716e-32*a?u:-function(t,e,n,r,i,o,s){let a,u,c,l,p,h,f,d,g,y,_,m,v,E,I,x,b,C;var w=t-i,S=n-i,N=e-o,T=r-o;p=(I=(d=w-(f=(h=M*w)-(h-w)))*(y=T-(g=(h=M*T)-(h-T)))-((E=w*T)-f*g-d*g-f*y))-(_=I-(b=(d=N-(f=(h=M*N)-(h-N)))*(y=S-(g=(h=M*S)-(h-S)))-((x=N*S)-f*g-d*g-f*y))),A[0]=I-(_+p)+(p-b),p=(v=E-((m=E+_)-(p=m-E))+(_-p))-(_=v-x),A[1]=v-(_+p)+(p-x),p=(C=m+_)-m,A[2]=m-(C-p)+(_-p),A[3]=C;let L=function(e){let n=e[0];for(let t=1;t<4;t++)n+=e[t];return n}(A),O=22204460492503146e-32*s;if(L>=O||-L>=O)return L;if(a=t-(w+(p=t-w))+(p-i),c=n-(S+(p=n-S))+(p-i),u=e-(N+(p=e-N))+(p-o),l=r-(T+(p=r-T))+(p-o),0===a&&0===u&&0===c&&0===l)return L;if(O=11093356479670487e-47*s+33306690738754706e-32*Math.abs(L),(L+=w*l+T*a-(N*c+S*u))>=O||-L>=O)return L;p=(I=(d=a-(f=(h=M*a)-(h-a)))*(y=T-(g=(h=M*T)-(h-T)))-((E=a*T)-f*g-d*g-f*y))-(_=I-(b=(d=u-(f=(h=M*u)-(h-u)))*(y=S-(g=(h=M*S)-(h-S)))-((x=u*S)-f*g-d*g-f*y))),j[0]=I-(_+p)+(p-b),p=(v=E-((m=E+_)-(p=m-E))+(_-p))-(_=v-x),j[1]=v-(_+p)+(p-x),p=(C=m+_)-m,j[2]=m-(C-p)+(_-p),j[3]=C;S=P(4,A,4,j,R);p=(I=(d=w-(f=(h=M*w)-(h-w)))*(y=l-(g=(h=M*l)-(h-l)))-((E=w*l)-f*g-d*g-f*y))-(_=I-(b=(d=N-(f=(h=M*N)-(h-N)))*(y=c-(g=(h=M*c)-(h-c)))-((x=N*c)-f*g-d*g-f*y))),j[0]=I-(_+p)+(p-b),p=(v=E-((m=E+_)-(p=m-E))+(_-p))-(_=v-x),j[1]=v-(_+p)+(p-x),p=(C=m+_)-m,j[2]=m-(C-p)+(_-p),j[3]=C;S=P(S,R,4,j,F);p=(I=(d=a-(f=(h=M*a)-(h-a)))*(y=l-(g=(h=M*l)-(h-l)))-((E=a*l)-f*g-d*g-f*y))-(_=I-(b=(d=u-(f=(h=M*u)-(h-u)))*(y=c-(g=(h=M*c)-(h-c)))-((x=u*c)-f*g-d*g-f*y))),j[0]=I-(_+p)+(p-b),p=(v=E-((m=E+_)-(p=m-E))+(_-p))-(_=v-x),j[1]=v-(_+p)+(p-x),p=(C=m+_)-m,j[2]=m-(C-p)+(_-p),j[3]=C;S=P(S,F,4,j,D);return D[S-1]}(t,e,n,r,i,o,a)},t.orient2dfast=function(t,e,n,r,i,o){return(e-o)*(n-i)-(t-i)*(r-o)},Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==e?n:(r=r||self).predicates={})},{}],164:[function(t,e,n){var r,i;r=this,i=function(){"use strict";function t(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=r),this.data=t,this.length=this.data.length,this.compare=e,0<this.length)for(var n=(this.length>>1)-1;0<=n;n--)this._down(n)}function r(t,e){return t<e?-1:e<t?1:0}return t.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},t.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,0<this.length&&(this.data[0]=e,this._down(0)),t}},t.prototype.peek=function(){return this.data[0]},t.prototype._up=function(t){for(var e=this.data,n=this.compare,r=e[t];0<t;){var i=t-1>>1,o=e[i];if(0<=n(r,o))break;e[t]=o,t=i}e[t]=r},t.prototype._down=function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&n(e[a],s)<0&&(s=e[o=a]),0<=n(s,i))break;e[t]=s,t=o}e[t]=i},t},"object"==typeof n&&void 0!==e?e.exports=i():(r=r||self).TinyQueue=i()},{}],165:[function(t,e,n){var i=e.exports=function(t){return new o(t)};function o(t){this.value=t}function r(t,a,u){var c=[],l=[],p=!0;return function r(e){var t=u?h(e):e,i={},n=!0,o={node:t,node_:e,path:[].concat(c),parent:l[l.length-1],parents:l,key:c.slice(-1)[0],isRoot:0===c.length,level:c.length,circular:null,update:function(t,e){o.isRoot||(o.parent.node[o.key]=t),o.node=t,e&&(n=!1)},delete:function(t){delete o.parent.node[o.key],t&&(n=!1)},remove:function(t){d(o.parent.node)?o.parent.node.splice(o.key,1):delete o.parent.node[o.key],t&&(n=!1)},keys:null,before:function(t){i.before=t},after:function(t){i.after=t},pre:function(t){i.pre=t},post:function(t){i.post=t},stop:function(){p=!1},block:function(){n=!1}};if(!p)return o;function s(){if("object"==typeof o.node&&null!==o.node){o.keys&&o.node_===o.node||(o.keys=f(o.node)),o.isLeaf=0==o.keys.length;for(var t=0;t<l.length;t++)if(l[t].node_===e){o.circular=l[t];break}}else o.isLeaf=!0,o.keys=null;o.notLeaf=!o.isLeaf,o.notRoot=!o.isRoot}s();t=a.call(o,o.node);return void 0!==t&&o.update&&o.update(t),i.before&&i.before.call(o,o.node),n&&("object"!=typeof o.node||null===o.node||o.circular||(l.push(o),s(),g(o.keys,function(t,e){c.push(t),i.pre&&i.pre.call(o,o.node[t],t);var n=r(o.node[t]);u&&y.call(o.node,t)&&(o.node[t]=n.node),n.isLast=e==o.keys.length-1,n.isFirst=0==e,i.post&&i.post.call(o,n),c.pop()}),l.pop()),i.after&&i.after.call(o,o.node)),o}(t).node}function h(e){if("object"!=typeof e||null===e)return e;var t,n,r=d(e)?[]:"[object Date]"===s(e)?new Date(e.getTime?e.getTime():e):"[object RegExp]"===s(e)?new RegExp(e):"[object Error]"===s(e)?{message:e.message}:"[object Boolean]"===s(e)?new Boolean(e):"[object Number]"===s(e)?new Number(e):"[object String]"===s(e)?new String(e):Object.create&&Object.getPrototypeOf?Object.create(Object.getPrototypeOf(e)):e.constructor===Object?{}:(t=e.constructor&&e.constructor.prototype||e.__proto__||{},(n=function(){}).prototype=t,new n);return g(f(e),function(t){r[t]=e[t]}),r}o.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!y.call(e,r)){e=void 0;break}e=e[r]}return e},o.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!y.call(e,r))return!1;e=e[r]}return!0},o.prototype.set=function(t,e){for(var n=this.value,r=0;r<t.length-1;r++){var i=t[r];y.call(n,i)||(n[i]={}),n=n[i]}return n[t[r]]=e},o.prototype.map=function(t){return r(this.value,t,!0)},o.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},o.prototype.reduce=function(e,t){var n=1===arguments.length,r=n?this.value:t;return this.forEach(function(t){this.isRoot&&n||(r=e.call(this,r,t))}),r},o.prototype.paths=function(){var e=[];return this.forEach(function(t){e.push(this.path)}),e},o.prototype.nodes=function(){var e=[];return this.forEach(function(t){e.push(this.node)}),e},o.prototype.clone=function(){var i=[],o=[];return function e(n){for(var t=0;t<i.length;t++)if(i[t]===n)return o[t];if("object"!=typeof n||null===n)return n;var r=h(n);return i.push(n),o.push(r),g(f(n),function(t){r[t]=e(n[t])}),i.pop(),o.pop(),r}(this.value)};var f=Object.keys||function(t){var e,n=[];for(e in t)n.push(e);return n};function s(t){return Object.prototype.toString.call(t)}var d=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},g=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};g(f(o.prototype),function(r){i[r]=function(t){var e=[].slice.call(arguments,1),n=new o(t);return n[r].apply(n,e)}});var y=Object.hasOwnProperty||function(t,e){return e in t}},{}],166:[function(t,e,n){var r;r=this,function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function s(t){return null===t?Bt:t.color}function a(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function c(t){return null===t?null:t.left}function l(t){return null===t?null:t.right}function p(){this.root_=null,this.size_=0}function h(){}function f(){this.array_=[],arguments[0]instanceof It&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");for(var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=((r=1 in arguments&&parseInt(Number(arguments[1]),10)||0)<0?Math.max(n+r,0):Math.min(r,n)),i=((i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n)<0?Math.max(n+arguments[2],0):Math.min(i,n));r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function _(){}_.prototype.interfaces_=function(){return[]},_.prototype.getClass=function(){return _},_.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};function m(){}var v,E=((v=Error)&&(x.__proto__=v),(x.prototype=Object.create(v&&v.prototype)).constructor=x),I={MAX_VALUE:{configurable:!0}};function x(t){v.call(this,t),this.name="IllegalArgumentException",this.message=t,this.stack=(new v).stack}m.isNaN=function(t){return Number.isNaN(t)},m.doubleToLongBits=function(t){return t},m.longBitsToDouble=function(t){return t},m.isInfinite=function(t){return!Number.isFinite(t)},I.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(m,I);function b(){}function C(){}function w(){}var S=function t(){var e;this.x=null,this.y=null,this.z=null,0===arguments.length?(this.x=0,this.y=0,this.z=t.NULL_ORDINATE):1===arguments.length?(e=arguments[0],this.x=e.x,this.y=e.y,this.z=e.z):2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},N={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};S.prototype.setOrdinate=function(t,e){switch(t){case S.X:this.x=e;break;case S.Y:this.y=e;break;case S.Z:this.z=e;break;default:throw new E("Invalid ordinate index: "+t)}},S.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],t=arguments[1];return!!_.equalsWithTolerance(this.x,e.x,t)&&!!_.equalsWithTolerance(this.y,e.y,t)}},S.prototype.getOrdinate=function(t){switch(t){case S.X:return this.x;case S.Y:return this.y;case S.Z:return this.z}throw new E("Invalid ordinate index: "+t)},S.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||m.isNaN(this.z))&&m.isNaN(t.z)},S.prototype.equals=function(t){return t instanceof S&&this.equals2D(t)},S.prototype.equalInZ=function(t,e){return _.equalsWithTolerance(this.z,t.z,e)},S.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},S.prototype.clone=function(){},S.prototype.copy=function(){return new S(this)},S.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},S.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,t=this.z-t.z;return Math.sqrt(e*e+n*n+t*t)},S.prototype.distance=function(t){var e=this.x-t.x,t=this.y-t.y;return Math.sqrt(e*e+t*t)},S.prototype.hashCode=function(){return 37*(629+S.hashCode(this.x))+S.hashCode(this.y)},S.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},S.prototype.interfaces_=function(){return[b,C,e]},S.prototype.getClass=function(){return S},S.hashCode=function(){if(1===arguments.length){var t=m.doubleToLongBits(arguments[0]);return Math.trunc((t^t)>>>32)}},N.DimensionalComparator.get=function(){return T},N.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},N.NULL_ORDINATE.get=function(){return m.NaN},N.X.get=function(){return 0},N.Y.get=function(){return 1},N.Z.get=function(){return 2},Object.defineProperties(S,N);var T=function(t){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){t=t;if(2!==t&&3!==t)throw new E("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};T.prototype.compare=function(t,e){var n=t,t=e,e=T.compare(n.x,t.x);if(0!==e)return e;e=T.compare(n.y,t.y);return 0!==e?e:this._dimensionsToTest<=2?0:T.compare(n.z,t.z)},T.prototype.interfaces_=function(){return[w]},T.prototype.getClass=function(){return T},T.compare=function(t,e){return t<e?-1:e<t?1:m.isNaN(t)?m.isNaN(e)?0:-1:m.isNaN(e)?1:0};function L(){}L.prototype.create=function(){},L.prototype.interfaces_=function(){return[]},L.prototype.getClass=function(){return L};function O(){}var M={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O},O.toLocationSymbol=function(t){switch(t){case O.EXTERIOR:return"e";case O.BOUNDARY:return"b";case O.INTERIOR:return"i";case O.NONE:return"-"}throw new E("Unknown location value: "+t)},M.INTERIOR.get=function(){return 0},M.BOUNDARY.get=function(){return 1},M.EXTERIOR.get=function(){return 2},M.NONE.get=function(){return-1},Object.defineProperties(O,M);function P(t,e){return t.interfaces_&&-1<t.interfaces_().indexOf(e)}function A(){}I={LOG_10:{configurable:!0}};A.prototype.interfaces_=function(){return[]},A.prototype.getClass=function(){return A},A.log10=function(t){t=Math.log(t);return m.isInfinite(t)||m.isNaN(t)?t:t/A.LOG_10},A.min=function(t,e,n,r){return e<t&&(t=e),n<t&&(t=n),r<t&&(t=r),t},A.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:n<t?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){e=arguments[0],n=arguments[1],t=arguments[2];return e<n?n:t<e?t:e}},A.wrap=function(t,e){return t<0?e- -t%e:t%e},A.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return n<t&&(n=t),n<e&&(n=e),n}if(4===arguments.length){var r=arguments[1],t=arguments[2],e=arguments[3],n=arguments[0];return n<r&&(n=r),n<t&&(n=t),n<e&&(n=e),n}},A.average=function(t,e){return(t+e)/2},I.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(A,I);function R(t){this.str=t}R.prototype.append=function(t){this.str+=t},R.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},R.prototype.toString=function(t){return this.str};function F(t){this.value=t}F.prototype.intValue=function(){return this.value},F.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},F.isNaN=function(t){return Number.isNaN(t)};function D(){}D.isWhitespace=function(t){return t<=32&&0<=t||127===t},D.toUpperCase=function(t){return t.toUpperCase()};function j(){var t,e;this._hi=0,(this._lo=0)===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]?(t=arguments[0],this.init(t)):arguments[0]instanceof j?(e=arguments[0],this.init(e)):"string"==typeof arguments[0]&&j.call(this,j.parse(arguments[0])):2===arguments.length&&(t=arguments[0],e=arguments[1],this.init(t,e))}N={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};j.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},j.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=j.magnitude(n._hi),i=j.TEN.pow(r);(n=n.divide(i)).gt(j.TEN)?(n=n.divide(j.TEN),r+=1):n.lt(j.ONE)&&(n=n.multiply(j.TEN),--r);for(var o=r+1,s=new R,a=j.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,p=0,p=9<c?(l=!0,"9"):"0"+c;s.append(p),n=n.subtract(j.valueOf(c)).multiply(j.TEN),l&&n.selfAdd(j.TEN);c=!0,l=j.magnitude(n._hi);if(l<0&&Math.abs(l)>=a-u&&(c=!1),!c)break}return e[0]=r,s.toString()},j.prototype.sqr=function(){return this.multiply(this)},j.prototype.doubleValue=function(){return this._hi+this._lo},j.prototype.subtract=function(){if(arguments[0]instanceof j){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){t=arguments[0];return this.add(-t)}},j.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},j.prototype.isZero=function(){return 0===this._hi&&0===this._lo},j.prototype.selfSubtract=function(){if(arguments[0]instanceof j){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}},j.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},j.prototype.min=function(t){return this.le(t)?this:t},j.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n,r,i,o=arguments[0],s=arguments[1],a=null,u=null,e=null,c=this._hi/o;return e=(a=(u=j.SPLIT*c)-(a=u-c))*(r=(e=j.SPLIT*o)-(e-o))-(t=c*o)+a*(i=o-r)+(n=c-a)*r+n*i,e=c+(u=(this._hi-t-e+this._lo-c*s)/o),this._hi=e,this._lo=c-e+u,this}},j.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},j.prototype.divide=function(){if(arguments[0]instanceof j){var t,e,n,r=arguments[0],i=null,o=null,s=(e=this._hi/r._hi)-(i=(u=j.SPLIT*e)-(u-e)),a=i*(o=(a=j.SPLIT*r._hi)-(a-r._hi))-(n=e*r._hi)+i*(t=r._hi-o)+s*o+s*t,u=(this._hi-n-a+this._lo-e*r._lo)/r._hi;return new j(a=e+u,e-a+u)}if("number"==typeof arguments[0]){u=arguments[0];return m.isNaN(u)?j.createNaN():j.copy(this).selfDivide(u,0)}},j.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},j.prototype.pow=function(t){if(0===t)return j.valueOf(1);var e=new j(this),n=j.valueOf(1),r=Math.abs(t);if(1<r)for(;0<r;)r%2==1&&n.selfMultiply(e),0<(r/=2)&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},j.prototype.ceil=function(){if(this.isNaN())return j.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new j(t,e)},j.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},j.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},j.prototype.setValue=function(){if(arguments[0]instanceof j){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){t=arguments[0];return this.init(t),this}},j.prototype.max=function(t){return this.ge(t)?this:t},j.prototype.sqrt=function(){if(this.isZero())return j.valueOf(0);if(this.isNegative())return j.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,e=j.valueOf(e),t=this.subtract(e.sqr())._hi*(.5*t);return e.add(t)},j.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=(n=this._hi+e)-(r=n-this._hi),o=(u=e-r+(this._hi-i)+this._lo)+(n-(s=n+u));return this._hi=s+o,this._lo=o+(s-this._hi),this}}else if(2===arguments.length){var s,a=arguments[0],t=arguments[1],r=null,n=null,n=this._hi+a,r=this._lo+t,u=n-(o=n-this._hi),i=r-(s=r-this._lo),n=(e=n+(o=a-o+(this._hi-u)+r))+(o=t-s+(this._lo-i)+(o+(n-e))),e=o+(e-n);return this._hi=n,this._lo=e,this}},j.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n,r,i,o=arguments[0],s=arguments[1],a=(t=j.SPLIT*this._hi)-this._hi,e=j.SPLIT*o;a=t-a,n=this._hi-a,r=e-o;o=(t=this._hi*o)+(e=a*(r=e-r)-t+a*(i=o-r)+n*r+n*i+(this._hi*s+this._lo*o)),a=e+(t-o);return this._hi=o,this._lo=a,this}},j.prototype.selfSqr=function(){return this.selfMultiply(this)},j.prototype.floor=function(){if(this.isNaN())return j.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new j(t,e)},j.prototype.negate=function(){return this.isNaN()?this:new j(-this._hi,-this._lo)},j.prototype.clone=function(){},j.prototype.multiply=function(){if(arguments[0]instanceof j){var t=arguments[0];return t.isNaN()?j.createNaN():j.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){t=arguments[0];return m.isNaN(t)?j.createNaN():j.copy(this).selfMultiply(t,0)}},j.prototype.isNaN=function(){return m.isNaN(this._hi)},j.prototype.intValue=function(){return Math.trunc(this._hi)},j.prototype.toString=function(){var t=j.magnitude(this._hi);return-3<=t&&t<=20?this.toStandardNotation():this.toSciNotation()},j.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),t=e[0]+1,e=n;return"."===n.charAt(0)?e="0"+n:t<0?e="0."+j.stringOfChar("0",-t)+n:-1===n.indexOf(".")&&(t=t-n.length,e=n+j.stringOfChar("0",t)+".0"),this.isNegative()?"-"+e:e},j.prototype.reciprocal=function(){var t,e,n,r,i=null,o=(e=1/this._hi)-(i=(n=j.SPLIT*e)-(n-e)),s=(a=j.SPLIT*this._hi)-this._hi,a=e+(n=(1-(r=e*this._hi)-(i*(s=a-s)-r+i*(t=this._hi-s)+o*s+o*t)-e*this._lo)/this._hi);return new j(a,e-a+n)},j.prototype.toSciNotation=function(){if(this.isZero())return j.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),t=j.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);e="";1<n.length&&(e=n.substring(1));e=n.charAt(0)+"."+e;return this.isNegative()?"-"+e+t:e+t},j.prototype.abs=function(){return this.isNaN()?j.NaN:this.isNegative()?this.negate():new j(this)},j.prototype.isPositive=function(){return(0<this._hi||0===this._hi)&&0<this._lo},j.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},j.prototype.add=function(){if(arguments[0]instanceof j){var t=arguments[0];return j.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){t=arguments[0];return j.copy(this).selfAdd(t)}},j.prototype.init=function(){var t,e;1===arguments.length?"number"==typeof arguments[0]?(t=arguments[0],this._hi=t,this._lo=0):arguments[0]instanceof j&&(e=arguments[0],this._hi=e._hi,this._lo=e._lo):2===arguments.length&&(t=arguments[0],e=arguments[1],this._hi=t,this._lo=e)},j.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},j.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},j.prototype.trunc=function(){return this.isNaN()?j.NaN:this.isPositive()?this.floor():this.ceil()},j.prototype.signum=function(){return 0<this._hi?1:this._hi<0?-1:0<this._lo?1:this._lo<0?-1:0},j.prototype.interfaces_=function(){return[e,b,C]},j.prototype.getClass=function(){return j},j.sqr=function(t){return j.valueOf(t).selfMultiply(t)},j.valueOf=function(){return"string"==typeof arguments[0]?j.parse(arguments[0]):"number"==typeof arguments[0]?new j(arguments[0]):void 0},j.sqrt=function(t){return j.valueOf(t).sqrt()},j.parse=function(t){for(var e=0,n=t.length;D.isWhitespace(t.charAt(e));)e++;var r=!1;e<n&&("-"!==(p=t.charAt(e))&&"+"!==p||(e++,"-"===p&&(r=!0)));for(var i=new j,o=0,s=0,a=0;!(n<=e);){var u=t.charAt(e);if(e++,D.isDigit(u)){var c=u-"0";i.selfMultiply(j.TEN),i.selfAdd(c),o++}else{if("."!==u){if("e"!==u&&"E"!==u)throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t);var l=t.substring(e);try{a=F.parseInt(l)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+l+" in string "+t):e}break}s=o}}var p,h=i,f=o-s-a;return 0==f?h=i:0<f?(p=j.TEN.pow(f),h=i.divide(p)):f<0&&(f=j.TEN.pow(-f),h=i.multiply(f)),r?h.negate():h},j.createNaN=function(){return new j(m.NaN,m.NaN)},j.copy=function(t){return new j(t)},j.magnitude=function(t){var e=Math.abs(t),t=Math.log(e)/Math.log(10),t=Math.trunc(Math.floor(t));return 10*Math.pow(10,t)<=e&&(t+=1),t},j.stringOfChar=function(t,e){for(var n=new R,r=0;r<e;r++)n.append(t);return n.toString()},N.PI.get=function(){return new j(3.141592653589793,12246467991473532e-32)},N.TWO_PI.get=function(){return new j(6.283185307179586,24492935982947064e-32)},N.PI_2.get=function(){return new j(1.5707963267948966,6123233995736766e-32)},N.E.get=function(){return new j(2.718281828459045,14456468917292502e-32)},N.NaN.get=function(){return new j(m.NaN,m.NaN)},N.EPS.get=function(){return 123259516440783e-46},N.SPLIT.get=function(){return 134217729},N.MAX_PRINT_DIGITS.get=function(){return 32},N.TEN.get=function(){return j.valueOf(10)},N.ONE.get=function(){return j.valueOf(1)},N.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},N.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(j,N);function k(){}M={DP_SAFE_EPSILON:{configurable:!0}};k.prototype.interfaces_=function(){return[]},k.prototype.getClass=function(){return k},k.orientationIndex=function(t,e,n){var r=k.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=j.valueOf(e.x).selfAdd(-t.x),r=j.valueOf(e.y).selfAdd(-t.y),t=j.valueOf(n.x).selfAdd(-e.x),e=j.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(e).selfSubtract(r.selfMultiply(t)).signum()},k.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},k.intersection=function(t,e,n,r){var i=j.valueOf(r.y).selfSubtract(n.y).selfMultiply(j.valueOf(e.x).selfSubtract(t.x)),o=j.valueOf(r.x).selfSubtract(n.x).selfMultiply(j.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),i=j.valueOf(r.x).selfSubtract(n.x).selfMultiply(j.valueOf(t.y).selfSubtract(n.y)),o=j.valueOf(r.y).selfSubtract(n.y).selfMultiply(j.valueOf(t.x).selfSubtract(n.x)),i=i.subtract(o).selfDivide(s).doubleValue(),o=j.valueOf(t.x).selfAdd(j.valueOf(e.x).selfSubtract(t.x).selfMultiply(i)).doubleValue(),i=j.valueOf(e.x).selfSubtract(t.x).selfMultiply(j.valueOf(t.y).selfSubtract(n.y)),t=j.valueOf(e.y).selfSubtract(t.y).selfMultiply(j.valueOf(t.x).selfSubtract(n.x)),s=i.subtract(t).selfDivide(s).doubleValue(),s=j.valueOf(n.y).selfAdd(j.valueOf(r.y).selfSubtract(n.y).selfMultiply(s)).doubleValue();return new S(o,s)},k.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),e=(t.y-n.y)*(e.x-n.x),n=i-e;if(0<i){if(e<=0)return k.signum(n);r=i+e}else{if(!(i<0))return k.signum(n);if(0<=e)return k.signum(n);r=-i-e}r*=k.DP_SAFE_EPSILON;return r<=n||r<=-n?k.signum(n):2},k.signum=function(t){return 0<t?1:t<0?-1:0},M.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(k,M);function G(){}I={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};I.X.get=function(){return 0},I.Y.get=function(){return 1},I.Z.get=function(){return 2},I.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,n){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[C]},G.prototype.getClass=function(){return G},Object.defineProperties(G,I);function U(){}function V(){}var B,z=((B=U)&&(q.__proto__=B),((q.prototype=Object.create(B&&B.prototype)).constructor=q).prototype.interfaces_=function(){return[]},q.prototype.getClass=function(){return q},q);function q(){B.call(this,"Projective point not representable on the Cartesian plane.")}V.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},V.getProperty=function(t){return{"line.separator":"\n"}[t]};function Y(){var t,e,n,r,i,o,s,a,u;this.x=null,this.y=null,this.w=null,0===arguments.length?(this.x=0,this.y=0,this.w=1):1===arguments.length?(e=arguments[0],this.x=e.x,this.y=e.y,this.w=1):2===arguments.length?"number"==typeof arguments[0]&&"number"==typeof arguments[1]?(t=arguments[0],e=arguments[1],this.x=t,this.y=e,this.w=1):arguments[0]instanceof Y&&arguments[1]instanceof Y?(u=arguments[0],s=arguments[1],this.x=u.y*s.w-s.y*u.w,this.y=s.x*u.w-u.x*s.w,this.w=u.x*s.y-s.x*u.y):arguments[0]instanceof S&&arguments[1]instanceof S&&(a=arguments[0],n=arguments[1],this.x=a.y-n.y,this.y=n.x-a.x,this.w=a.x*n.y-n.x*a.y):3===arguments.length?(r=arguments[0],i=arguments[1],o=arguments[2],this.x=r,this.y=i,this.w=o):4===arguments.length&&(s=arguments[1],u=arguments[2],n=arguments[3],r=(a=arguments[0]).y-s.y,i=s.x-a.x,o=a.x*s.y-s.x*a.y,s=u.y-n.y,a=n.x-u.x,u=u.x*n.y-n.x*u.y,this.x=i*u-a*o,this.y=s*o-r*u,this.w=r*a-s*i)}Y.prototype.getY=function(){var t=this.y/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new z;return t},Y.prototype.getX=function(){var t=this.x/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new z;return t},Y.prototype.getCoordinate=function(){var t=new S;return t.x=this.getX(),t.y=this.getY(),t},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,e=n.y-r.y,t=r.x-n.x,r=n.x*r.y-r.x*n.y,n=i*t-e*o,t=(o*r-t*s)/n,n=(e*s-i*r)/n;if(m.isNaN(t)||m.isInfinite(t)||m.isNaN(n)||m.isInfinite(n))throw new z;return new S(t,n)};function X(){var t,e,n,r;this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length?this.init():1===arguments.length?arguments[0]instanceof S?(t=arguments[0],this.init(t.x,t.x,t.y,t.y)):arguments[0]instanceof X&&(e=arguments[0],this.init(e)):2===arguments.length?(n=arguments[0],r=arguments[1],this.init(n.x,r.x,n.y,r.y)):4===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],this.init(t,e,n,r))}N={serialVersionUID:{configurable:!0}};X.prototype.getArea=function(){return this.getWidth()*this.getHeight()},X.prototype.equals=function(t){if(!(t instanceof X))return!1;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()},X.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new X;var e=(this._minx>t._minx?this:t)._minx,n=(this._miny>t._miny?this:t)._miny,r=(this._maxx<t._maxx?this:t)._maxx,t=(this._maxy<t._maxy?this:t)._maxy;return new X(e,r,n,t)},X.prototype.isNull=function(){return this._maxx<this._minx},X.prototype.getMaxX=function(){return this._maxx},X.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof X){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){t=arguments[0],e=arguments[1];return!this.isNull()&&t>=this._minx&&t<=this._maxx&&e>=this._miny&&e<=this._maxy}},X.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof S){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){t=arguments[0],e=arguments[1];return!this.isNull()&&!(t>this._maxx||t<this._minx||e>this._maxy||e<this._miny)}},X.prototype.getMinY=function(){return this._miny},X.prototype.getMinX=function(){return this._minx},X.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else 2===arguments.length&&(t=arguments[0],e=arguments[1],this.isNull()?(this._minx=t,this._maxx=t,this._miny=e,this._maxy=e):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e)))},X.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},X.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},X.prototype.compareTo=function(t){return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0},X.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},X.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},X.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},X.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},X.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e<t?t:e},X.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],t=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=t,this._maxy+=t,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},X.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof S){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){t=arguments[0],e=arguments[1];return this.covers(t,e)}},X.prototype.centre=function(){return this.isNull()?null:new S((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},X.prototype.init=function(){var t,e,n,r;0===arguments.length?this.setToNull():1===arguments.length?arguments[0]instanceof S?(n=arguments[0],this.init(n.x,n.x,n.y,n.y)):arguments[0]instanceof X&&(r=arguments[0],this._minx=r._minx,this._maxx=r._maxx,this._miny=r._miny,this._maxy=r._maxy):2===arguments.length?(t=arguments[0],e=arguments[1],this.init(t.x,e.x,t.y,e.y)):4===arguments.length&&(n=arguments[2],r=arguments[3],(t=arguments[0])<(e=arguments[1])?(this._minx=t,this._maxx=e):(this._minx=e,this._maxx=t),n<r?(this._miny=n,this._maxy=r):(this._miny=r,this._maxy=n))},X.prototype.getMaxY=function(){return this._maxy},X.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},X.prototype.hashCode=function(){return 37*(37*(37*(629+S.hashCode(this._minx))+S.hashCode(this._maxx))+S.hashCode(this._miny))+S.hashCode(this._maxy)},X.prototype.interfaces_=function(){return[b,e]},X.prototype.getClass=function(){return X},X.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t:e).x&&n.x<=(t.x>e.x?t:e).x&&n.y>=(t.y<e.y?t:e).y&&n.y<=(t.y>e.y?t:e).y}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),n=Math.max(o.x,s.x),t=Math.min(r.x,i.x),e=Math.max(r.x,i.x);return!(n<t||e<a||(a=Math.min(o.y,s.y),n=Math.max(o.y,s.y),t=Math.min(r.y,i.y),e=Math.max(r.y,i.y),n<t||e<a))}},N.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(X,N);function W(t){this.geometryFactory=t||new xe}var J={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};W.prototype.read=function(t){var e,n;t=t.replace(/[\n\r]/g," ");var r=J.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=J.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),r=r[2],$[n]&&(e=$[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},W.prototype.write=function(t){return this.extractGeometry(t)},W.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!K[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+K[e].apply(this,[t])+")"};function H(t){this.parser=new W(t)}var K={coordinate:function(t){return t.x+" "+t.y},point:function(t){return K.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(K.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(K.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+K.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+K.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},$={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();t=t.trim().split(J.spaces);return this.geometryFactory.createPoint(new S(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(J.trimParens,"$1"),r.push($.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(J.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(J.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(J.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(J.trimParens,"$1"),r.push($.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r=t.trim().split(J.parenComma),i=[],o=0,s=r.length;o<s;++o)e=r[o].replace(J.trimParens,"$1"),e=$.linestring.apply(this,[e]),e=this.geometryFactory.createLinearRing(e._points),0===o?n=e:i.push(e);return this.geometryFactory.createPolygon(n,i)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(J.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(J.trimParens,"$1"),r.push($.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}};H.prototype.write=function(t){return this.parser.write(t)},H.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};function Z(){}var Q,tt,et=((tt=Error)&&(it.__proto__=tt),(it.prototype=Object.create(tt&&tt.prototype)).constructor=it),nt=((Q=et)&&(rt.__proto__=Q),((rt.prototype=Object.create(Q&&Q.prototype)).constructor=rt).prototype.interfaces_=function(){return[]},rt.prototype.getClass=function(){return rt},rt);function rt(){var t;Q.call(this),0===arguments.length?Q.call(this):1===arguments.length&&(t=arguments[0],Q.call(this,t))}function it(t){tt.call(this,t),this.name="RuntimeException",this.message=t,this.stack=(new tt).stack}Z.prototype.interfaces_=function(){return[]},Z.prototype.getClass=function(){return Z},Z.shouldNeverReachHere=function(){if(0===arguments.length)Z.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new nt("Should never reach here"+(null!==t?": "+t:""))}},Z.isTrue=function(){var t;if(1===arguments.length)Z.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new nt:new nt(t)},Z.equals=function(){var t,e,n;if(2===arguments.length)Z.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new nt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};function ot(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new S,this._intPt[1]=new S,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}M={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ot.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},ot.prototype.getTopologySummary=function(){var t=new R;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},ot.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},ot.prototype.getIntersectionNum=function(){return this._result},ot.prototype.computeIntLineIndex=function(){var t;0===arguments.length?null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1)):1===arguments.length&&(t=arguments[0],this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0))},ot.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ot.prototype.setPrecisionModel=function(t){this._precisionModel=t},ot.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},ot.prototype.getIntersection=function(t){return this._intPt[t]},ot.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ot.prototype.hasIntersection=function(){return this._result!==ot.NO_INTERSECTION},ot.prototype.getEdgeDistance=function(t,e){return ot.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},ot.prototype.isCollinear=function(){return this._result===ot.COLLINEAR_INTERSECTION},ot.prototype.toString=function(){return H.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+H.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ot.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},ot.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},ot.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.computeEdgeDistance=function(t,e,n){var r,i=Math.abs(n.x-e.x),o=Math.abs(n.y-e.y),s=-1;return t.equals(e)?s=0:t.equals(n)?s=o<i?i:o:(r=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y),0!==(s=o<i?r:n)||t.equals(e)||(s=Math.max(r,n))),Z.isTrue(!(0===s&&!t.equals(e)),"Bad distance calculation"),s},ot.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,i=Math.sqrt(r*r+i*i);return Z.isTrue(!(0===i&&!t.equals(e)),"Invalid distance calculation"),i},M.DONT_INTERSECT.get=function(){return 0},M.DO_INTERSECT.get=function(){return 1},M.COLLINEAR.get=function(){return 2},M.NO_INTERSECTION.get=function(){return 0},M.POINT_INTERSECTION.get=function(){return 1},M.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ot,M);function st(){}var at,ut=((at=ot)&&(ct.__proto__=at),((ct.prototype=Object.create(at&&at.prototype)).constructor=ct).prototype.isInSegmentEnvelopes=function(t){var e=new X(this._inputLines[0][0],this._inputLines[0][1]),n=new X(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},ct.prototype.computeIntersection=function(){if(3!==arguments.length)return at.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,X.intersects(e,n,t)&&0===pt.orientationIndex(e,n,t)&&0===pt.orientationIndex(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=at.POINT_INTERSECTION,null;this._result=at.NO_INTERSECTION},ct.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},ct.prototype.safeHCoordinateIntersection=function(e,n,r,i){var o=null;try{o=Y.intersection(e,n,r,i)}catch(t){if(!(t instanceof z))throw t;o=ct.nearestEndpoint(e,n,r,i)}return o},ct.prototype.intersection=function(t,e,n,r){var i=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(i)||(i=new S(ct.nearestEndpoint(t,e,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i},ct.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,t=Math.abs(i);return Math.abs(e)<t&&(i=e,t=Math.abs(e)),Math.abs(n)<t&&(i=n,t=Math.abs(n)),Math.abs(r)<t&&(i=r),i},ct.prototype.checkDD=function(t,e,n,r,i){n=k.intersection(t,e,n,r),r=this.isInSegmentEnvelopes(n);V.out.println("DD in env = "+r+"  --------------------- "+n),1e-4<i.distance(n)&&V.out.println("Distance = "+i.distance(n))},ct.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new S(t),t=new S(e),e=new S(n),n=new S(r),r=new S;this.normalizeToEnvCentre(i,t,e,n,r);n=this.safeHCoordinateIntersection(i,t,e,n);return n.x+=r.x,n.y+=r.y,n},ct.prototype.computeCollinearIntersection=function(t,e,n,r){var i=X.intersects(t,e,n),o=X.intersects(t,e,r),s=X.intersects(n,r,t),a=X.intersects(n,r,e);return i&&o?(this._intPt[0]=n,this._intPt[1]=r,at.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=t,this._intPt[1]=e,at.COLLINEAR_INTERSECTION):i&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?at.COLLINEAR_INTERSECTION:at.POINT_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?at.COLLINEAR_INTERSECTION:at.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||a?at.COLLINEAR_INTERSECTION:at.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||s?at.COLLINEAR_INTERSECTION:at.POINT_INTERSECTION):at.NO_INTERSECTION},ct.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=(t.x<e.x?t:e).x,s=(t.y<e.y?t:e).y,a=(t.x>e.x?t:e).x,u=(t.y>e.y?t:e).y,c=(n.x<r.x?n:r).x,l=(n.y<r.y?n:r).y,p=(n.x>r.x?n:r).x,h=(n.y>r.y?n:r).y,p=((c<o?o:c)+(a<p?a:p))/2,h=((l<s?s:l)+(u<h?u:h))/2;i.x=p,i.y=h,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},ct.prototype.computeIntersect=function(t,e,n,r){if(this._isProper=!1,!X.intersects(t,e,n,r))return at.NO_INTERSECTION;var i=pt.orientationIndex(t,e,n),o=pt.orientationIndex(t,e,r);if(0<i&&0<o||i<0&&o<0)return at.NO_INTERSECTION;var s=pt.orientationIndex(n,r,t),a=pt.orientationIndex(n,r,e);return 0<s&&0<a||s<0&&a<0?at.NO_INTERSECTION:0===i&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,n,r):(0===i||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:0===i?this._intPt[0]=new S(n):0===o?this._intPt[0]=new S(r):0===s?this._intPt[0]=new S(t):0===a&&(this._intPt[0]=new S(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,r)),at.POINT_INTERSECTION)},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct},ct.nearestEndpoint=function(t,e,n,r){var i=t,o=pt.distancePointLine(t,n,r),s=pt.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=pt.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=pt.distancePointLine(r,t,e))<o&&(o=s,i=r),i},ct);function ct(){at.apply(this,arguments)}st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,t=n.x-e.x,e=n.y-e.y;return st.signOfDet2x2(r,i,t,e)},st.signOfDet2x2=function(t,e,n,r){var i,o=null,s=null,o=1;if(0===t||0===r)return 0===e||0===n?0:0<e?0<n?-o:o:0<n?o:-o;if(0===e||0===n)return 0<r?0<t?o:-o:0<t?-o:o;if(0<e?0<r?e<=r||(o=-o,s=t,t=n,n=s,s=e,e=r,r=s):r=e<=-r?(o=-o,n=-n,-r):(s=t,t=-n,n=s,s=e,e=-r,s):0<r?-e<=r?(o=-o,t=-t,e=-e):(s=-t,t=n,n=s,s=-e,e=r,r=s):r=r<=e?(t=-t,e=-e,n=-n,-r):(o=-o,s=-t,t=-n,n=s,s=-e,e=-r,s),0<t){if(!(0<n))return o;if(!(t<=n))return o}else{if(0<n)return-o;if(!(n<=t))return-o;o=-o,t=-t,n=-n}for(;;){if((r-=(i=Math.floor(n/t))*e)<0)return-o;if(e<r)return o;if((n-=i*t)+n<t){if(e<r+r)return o}else{if(r+r<e)return-o;n=t-n,r=e-r,o=-o}if(0===r)return 0===n?0:-o;if(0===n)return o;if((e-=(i=Math.floor(t/n))*r)<0)return o;if(r<e)return-o;if((t-=i*n)+t<n){if(r<e+e)return-o}else{if(e+e<r)return o;t=n-t,e=r-e,o=-o}if(0===e)return 0===t?0:o;if(0===t)return-o}};function lt(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}lt.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return r<n&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){n=t.x-this._p.x,r=t.y-this._p.y,t=e.x-this._p.x,e=e.y-this._p.y,t=st.signOfDet2x2(n,r,t,e);if(0===t)return this._isPointOnSegment=!0,null;e<r&&(t=-t),0<t&&this._crossingCount++}},lt.prototype.isPointInPolygon=function(){return this.getLocation()!==O.EXTERIOR},lt.prototype.getLocation=function(){return this._isPointOnSegment?O.BOUNDARY:this._crossingCount%2==1?O.INTERIOR:O.EXTERIOR},lt.prototype.isOnSegment=function(){return this._isPointOnSegment},lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt},lt.locatePointInRing=function(){if(arguments[0]instanceof S&&P(arguments[1],G)){for(var t=arguments[1],e=new lt(arguments[0]),n=new S,r=new S,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof S&&arguments[1]instanceof Array){for(var o=arguments[1],s=new lt(arguments[0]),a=1;a<o.length;a++){var u=o[a],c=o[a-1];if(s.countSegment(u,c),s.isOnSegment())return s.getLocation()}return s.getLocation()}};var pt=function(){},I={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt},pt.orientationIndex=function(t,e,n){return k.orientationIndex(t,e,n)},pt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(P(arguments[0],G)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new S,c=new S,l=new S;s.getCoordinate(0,c),s.getCoordinate(1,l);var p=c.x;l.x-=p;for(var h=0,f=1;f<a-1;f++)u.y=c.y,c.x=l.x,c.y=l.y,s.getCoordinate(f+1,l),l.x-=p,h+=c.x*(u.y-l.y);return h/2}},pt.distanceLineLine=function(t,e,n,r){if(t.equals(e))return pt.distancePointLine(t,n,r);if(n.equals(r))return pt.distancePointLine(r,t,e);var i,o,s,a=!1;return!X.intersects(t,e,n,r)||0==(s=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x))?a=!0:(i=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),o=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/s,((s=i/s)<0||1<s||o<0||1<o)&&(a=!0)),a?A.min(pt.distancePointLine(t,n,r),pt.distancePointLine(e,n,r),pt.distancePointLine(n,t,e),pt.distancePointLine(r,t,e)):0},pt.isPointInRing=function(t,e){return pt.locatePointInRing(t,e)!==O.EXTERIOR},pt.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new S;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,c=a-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=a,o=u}return n},pt.isCCW=function(t){var e=t.length-1;if(e<3)throw new E("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}for(var s=r;--s<0&&(s=e),t[s].equals2D(n)&&s!==r;);for(var a=r;a=(a+1)%e,t[a].equals2D(n)&&a!==r;);var u=t[s],c=t[a];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=pt.computeOrientation(u,n,c);return 0===l?u.x>c.x:0<l},pt.locatePointInRing=function(t,e){return lt.locatePointInRing(t,e)},pt.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),e=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(e)*Math.sqrt(r)},pt.computeOrientation=function(t,e,n){return pt.orientationIndex(t,e,n)},pt.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new E("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=pt.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),c=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(c<=0)return o.distance(s);if(1<=c)return o.distance(a);s=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(s)*Math.sqrt(u)}},pt.isOnLine=function(t,e){for(var n=new ut,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},I.CLOCKWISE.get=function(){return-1},I.RIGHT.get=function(){return pt.CLOCKWISE},I.COUNTERCLOCKWISE.get=function(){return 1},I.LEFT.get=function(){return pt.COUNTERCLOCKWISE},I.COLLINEAR.get=function(){return 0},I.STRAIGHT.get=function(){return pt.COLLINEAR},Object.defineProperties(pt,I);function ht(){}ht.prototype.filter=function(t){},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht};function ft(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()}N={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ft.prototype.isGeometryCollection=function(){return this.getSortIndex()===ft.SORTINDEX_GEOMETRYCOLLECTION},ft.prototype.getFactory=function(){return this._factory},ft.prototype.getGeometryN=function(t){return this},ft.prototype.getArea=function(){return 0},ft.prototype.isRectangle=function(){return!1},ft.prototype.equals=function(){if(arguments[0]instanceof ft){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){t=arguments[0];if(!(t instanceof ft))return!1;return this.equalsExact(t)}},ft.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ft.prototype.geometryChanged=function(){this.apply(ft.geometryChangedFilter)},ft.prototype.geometryChangedAction=function(){this._envelope=null},ft.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ft.prototype.getLength=function(){return 0},ft.prototype.getNumGeometries=function(){return 1},ft.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){e=arguments[0],t=arguments[1];return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(e,t)}},ft.prototype.getUserData=function(){return this._userData},ft.prototype.getSRID=function(){return this._SRID},ft.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ft.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ft.SORTINDEX_GEOMETRYCOLLECTION)throw new E("This method does not support GeometryCollection arguments")},ft.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ft.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ft.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ft.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new X(this._envelope)},ft.prototype.setSRID=function(t){this._SRID=t},ft.prototype.setUserData=function(t){this._userData=t},ft.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),o=i.compareTo(o);if(0!==o)return o}return n.hasNext()?1:r.hasNext()?-1:0},ft.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ft.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ft.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ft.SORTINDEX_MULTIPOINT||this.getSortIndex()===ft.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ft.SORTINDEX_MULTIPOLYGON},ft.prototype.interfaces_=function(){return[C,b,e]},ft.prototype.getClass=function(){return ft},ft.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ft.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},N.serialVersionUID.get=function(){return 0x799ea46522854c00},N.SORTINDEX_POINT.get=function(){return 0},N.SORTINDEX_MULTIPOINT.get=function(){return 1},N.SORTINDEX_LINESTRING.get=function(){return 2},N.SORTINDEX_LINEARRING.get=function(){return 3},N.SORTINDEX_MULTILINESTRING.get=function(){return 4},N.SORTINDEX_POLYGON.get=function(){return 5},N.SORTINDEX_MULTIPOLYGON.get=function(){return 6},N.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},N.geometryChangedFilter.get=function(){return dt},Object.defineProperties(ft,N);var dt=function(){};dt.interfaces_=function(){return[ht]},dt.filter=function(t){t.geometryChangedAction()};function gt(){}gt.prototype.filter=function(t){},gt.prototype.interfaces_=function(){return[]},gt.prototype.getClass=function(){return gt};function yt(){}M={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};yt.prototype.isInBoundary=function(t){},yt.prototype.interfaces_=function(){return[]},yt.prototype.getClass=function(){return yt},M.Mod2BoundaryNodeRule.get=function(){return _t},M.EndPointBoundaryNodeRule.get=function(){return mt},M.MultiValentEndPointBoundaryNodeRule.get=function(){return vt},M.MonoValentEndPointBoundaryNodeRule.get=function(){return Et},M.MOD2_BOUNDARY_RULE.get=function(){return new _t},M.ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},M.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},M.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Et},M.OGC_SFS_BOUNDARY_RULE.get=function(){return yt.MOD2_BOUNDARY_RULE},Object.defineProperties(yt,M);var _t=function(){};_t.prototype.isInBoundary=function(t){return t%2==1},_t.prototype.interfaces_=function(){return[yt]},_t.prototype.getClass=function(){return _t};var mt=function(){};mt.prototype.isInBoundary=function(t){return 0<t},mt.prototype.interfaces_=function(){return[yt]},mt.prototype.getClass=function(){return mt};var vt=function(){};vt.prototype.isInBoundary=function(t){return 1<t},vt.prototype.interfaces_=function(){return[yt]},vt.prototype.getClass=function(){return vt};var Et=function(){};Et.prototype.isInBoundary=function(t){return 1===t},Et.prototype.interfaces_=function(){return[yt]},Et.prototype.getClass=function(){return Et};function It(){}It.prototype.add=function(){},It.prototype.addAll=function(){},It.prototype.isEmpty=function(){},It.prototype.iterator=function(){},It.prototype.size=function(){},It.prototype.toArray=function(){},It.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";function xt(){}xt.prototype.hasNext=function(){},xt.prototype.next=function(){},xt.prototype.remove=function(){};var bt,Ct=((bt=It)&&(wt.__proto__=bt),((wt.prototype=Object.create(bt&&bt.prototype)).constructor=wt).prototype.get=function(){},wt.prototype.set=function(){},wt.prototype.isEmpty=function(){},wt);function wt(){bt.apply(this,arguments)}(r.prototype=new Error).name="NoSuchElementException";function St(){}var Nt,Tt,Lt=((Tt=Ct)&&(At.__proto__=Tt),((At.prototype=Object.create(Tt&&Tt.prototype)).constructor=At).prototype.ensureCapacity=function(){},At.prototype.interfaces_=function(){return[Tt,It]},At.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(t,arguments[1]),!0},At.prototype.clear=function(){this.array_=[]},At.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},At.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},At.prototype.iterator=function(){return new Ot(this)},At.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},At.prototype.isEmpty=function(){return 0===this.array_.length},At.prototype.size=function(){return this.array_.length},At.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},At.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},At),Ot=((Nt=xt)&&(Pt.__proto__=Nt),((Pt.prototype=Object.create(Nt&&Nt.prototype)).constructor=Pt).prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},Pt.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Pt.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},Pt.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},Pt),Mt=function(d){function t(){var t,e;d.call(this),0===arguments.length||(1===arguments.length?(e=arguments[0],this.ensureCapacity(e.length),this.add(e,!0)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.ensureCapacity(t.length),this.add(t,e)))}d&&(t.__proto__=d),(t.prototype=Object.create(d&&d.prototype)).constructor=t;var e={coordArrayType:{configurable:!0}};return e.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(t){return this.get(t)},t.prototype.addAll=function(){if(2!==arguments.length)return d.prototype.addAll.apply(this,arguments);for(var t=arguments[1],e=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),e=!0;return e},t.prototype.clone=function(){for(var t=d.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){if(1===arguments.length){var t=arguments[0];d.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return this.add(t,e,!0),!0}if(arguments[0]instanceof S&&"boolean"==typeof arguments[1]){e=arguments[0];if(!arguments[1]&&1<=this.size()&&this.get(this.size()-1).equals2D(e))return null;d.prototype.add.call(this,e)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1];if(arguments[2])for(var s=0;s<i.length;s++)this.add(i[s],o);else for(var a=i.length-1;0<=a;a--)this.add(i[a],o);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof S){var n=arguments[0],u=arguments[1];if(!arguments[2]){r=this.size();if(0<r){if(0<n&&this.get(n-1).equals2D(u))return null;if(n<r&&this.get(n).equals2D(u))return null}}d.prototype.add.call(this,n,u)}}else if(4===arguments.length){var c=arguments[0],l=arguments[1],u=arguments[2],p=arguments[3],h=1;p<u&&(h=-1);for(var f=u;f!==p;f+=h)this.add(c[f],l);return!0}},t.prototype.closeRing=function(){0<this.size()&&this.add(new S(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,e),t}(Lt),I={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};function Pt(t){Nt.call(this),this.arrayList_=t,this.position_=0}function At(){Tt.call(this),this.array_=[],arguments[0]instanceof It&&this.addAll(arguments[0])}I.ForwardComparator.get=function(){return Rt},I.BidirectionalComparator.get=function(){return Ft},I.coordArrayType.get=function(){return new Array(0).fill(null)},St.prototype.interfaces_=function(){return[]},St.prototype.getClass=function(){return St},St.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},St.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(St.indexOf(r,e)<0)return r}return null},St.scroll=function(t,e){var n=St.indexOf(e,t);if(n<0)return null;e=new Array(t.length).fill(null);V.arraycopy(t,n,e,0,t.length-n),V.arraycopy(t,0,e,t.length-n,n),V.arraycopy(e,0,t,0,t.length)},St.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},St.intersection=function(t,e){for(var n=new Mt,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},St.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},St.removeRepeatedPoints=function(t){return St.hasRepeatedPoints(t)?new Mt(t,!1).toCoordinateArray():t},St.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},St.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},St.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new S(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new S(r[i+u])},St.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},St.envelope=function(t){for(var e=new X,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},St.toCoordinateArray=function(t){return t.toArray(St.coordArrayType)},St.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},St.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},St.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,n=t[e].compareTo(t[n]);if(0!==n)return n}return 1},St.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},St.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||0<e.compareTo(t[n]))&&(e=t[n]);return e},St.extract=function(t,e,n){e=A.clamp(e,0,t.length);var r=(n=A.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(St,I);var Rt=function(){};Rt.prototype.compare=function(t,e){return St.compare(t,e)},Rt.prototype.interfaces_=function(){return[w]},Rt.prototype.getClass=function(){return Rt};var Ft=function(){};Ft.prototype.compare=function(t,e){var n=t,t=e;if(n.length<t.length)return-1;if(n.length>t.length)return 1;if(0===n.length)return 0;e=St.compare(n,t);return St.isEqualReversed(n,t)?0:e},Ft.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=St.increasingDirection(n),o=St.increasingDirection(r),s=0<i?0:n.length-1,a=0<o?0:n.length-1,u=0;u<n.length;u++){var c=n[s].compareTo(r[a]);if(0!==c)return c;s+=i,a+=o}return 0},Ft.prototype.interfaces_=function(){return[w]},Ft.prototype.getClass=function(){return Ft};N=function(){};N.prototype.get=function(){},N.prototype.put=function(){},N.prototype.size=function(){},N.prototype.values=function(){},N.prototype.entrySet=function(){};var Dt,M=((Dt=N)&&(jt.__proto__=Dt),(jt.prototype=Object.create(Dt&&Dt.prototype)).constructor=jt);function jt(){Dt.apply(this,arguments)}(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new It).contains=function(){};var kt,Gt,Ut=((Gt=o)&&(qt.__proto__=Gt),((qt.prototype=Object.create(Gt&&Gt.prototype)).constructor=qt).prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},qt.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},qt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},qt.prototype.remove=function(t){throw new Error},qt.prototype.size=function(){return this.array_.length},qt.prototype.isEmpty=function(){return 0===this.array_.length},qt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},qt.prototype.iterator=function(){return new Vt(this)},qt),Vt=((kt=xt)&&(zt.__proto__=kt),((zt.prototype=Object.create(kt&&kt.prototype)).constructor=zt).prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},zt.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},zt.prototype.remove=function(){throw new i},zt),Bt=0;function zt(t){kt.call(this),this.hashSet_=t,this.position_=0}function qt(){Gt.call(this),this.array_=[],arguments[0]instanceof It&&this.addAll(arguments[0])}(p.prototype=new M).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(0<n))return e.value;e=e.right}}return null},p.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Bt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(0<r)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:Bt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},p.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;){var e;a(t)===c(a(a(t)))?1===s(e=l(a(a(t))))?(u(a(t),Bt),u(e,Bt),u(a(a(t)),1),t=a(a(t))):(t===l(a(t))&&(t=a(t),this.rotateLeft(t)),u(a(t),Bt),u(a(a(t)),1),this.rotateRight(a(a(t)))):1===s(e=c(a(a(t))))?(u(a(t),Bt),u(e,Bt),u(a(a(t)),1),t=a(a(t))):(t===c(a(t))&&(t=a(t),this.rotateRight(t)),u(a(t),Bt),u(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=Bt},p.prototype.values=function(){var t=new Lt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=p.successor(e));)t.add(e.value);return t},p.prototype.entrySet=function(){var t=new Ut,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=p.successor(e));)t.add(e);return t},p.prototype.rotateLeft=function(t){var e;null!=t&&(e=t.right,t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e)},p.prototype.rotateRight=function(t){var e;null!=t&&(e=t.left,t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e)},p.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},p.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)n=(r=n).parent;return n},p.prototype.size=function(){return this.size_};function Yt(){}Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt},h.prototype=new o,(f.prototype=new h).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new i},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new Xt(this)};var Xt=function(t){this.treeSet_=t,this.position_=0};Xt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},Xt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Xt.prototype.remove=function(){throw new i};function Wt(){}Wt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Wt.asList=function(t){for(var e=new Lt,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};function Jt(){}I={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};I.P.get=function(){return 0},I.L.get=function(){return 1},I.A.get=function(){return 2},I.FALSE.get=function(){return-1},I.TRUE.get=function(){return-2},I.DONTCARE.get=function(){return-3},I.SYM_FALSE.get=function(){return"F"},I.SYM_TRUE.get=function(){return"T"},I.SYM_DONTCARE.get=function(){return"*"},I.SYM_P.get=function(){return"0"},I.SYM_L.get=function(){return"1"},I.SYM_A.get=function(){return"2"},Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt},Jt.toDimensionSymbol=function(t){switch(t){case Jt.FALSE:return Jt.SYM_FALSE;case Jt.TRUE:return Jt.SYM_TRUE;case Jt.DONTCARE:return Jt.SYM_DONTCARE;case Jt.P:return Jt.SYM_P;case Jt.L:return Jt.SYM_L;case Jt.A:return Jt.SYM_A}throw new E("Unknown dimension value: "+t)},Jt.toDimensionValue=function(t){switch(D.toUpperCase(t)){case Jt.SYM_FALSE:return Jt.FALSE;case Jt.SYM_TRUE:return Jt.TRUE;case Jt.SYM_DONTCARE:return Jt.DONTCARE;case Jt.SYM_P:return Jt.P;case Jt.SYM_L:return Jt.L;case Jt.SYM_A:return Jt.A}throw new E("Unknown dimension symbol: "+t)},Object.defineProperties(Jt,I);function Ht(){}Ht.prototype.filter=function(t){},Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht};function Kt(){}Kt.prototype.filter=function(t,e){},Kt.prototype.isDone=function(){},Kt.prototype.isGeometryChanged=function(){},Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var $t=function(i){function n(t,e){if(i.call(this,e),this._geometries=t||[],i.hasNullElements(this._geometries))throw new E("geometries must not contain null elements")}i&&(n.__proto__=i);var t={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.computeEnvelopeInternal=function(){for(var t=new X,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},n.prototype.getGeometryN=function(t){return this._geometries[t]},n.prototype.getSortIndex=function(){return i.SORTINDEX_GEOMETRYCOLLECTION},n.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},n.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},n.prototype.equalsExact=function(){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],e))return!1;return!0},n.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Wt.sort(this._geometries)},n.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},n.prototype.getBoundaryDimension=function(){for(var t=Jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},n.prototype.getDimension=function(){for(var t=Jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},n.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},n.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},n.prototype.getNumGeometries=function(){return this._geometries.length},n.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},n.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(Wt.asList(this._geometries)),t=new f(Wt.asList(t._geometries));return this.compare(e,t)}if(2===arguments.length){for(var n=arguments[1],r=arguments[0],i=this.getNumGeometries(),o=r.getNumGeometries(),s=0;s<i&&s<o;){var a=this.getGeometryN(s),u=r.getGeometryN(s),u=a.compareToSameClass(u,n);if(0!==u)return u;s++}return s<i?1:s<o?-1:0}},n.prototype.apply=function(){if(P(arguments[0],gt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(P(arguments[0],Kt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(P(arguments[0],Ht)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(P(arguments[0],ht)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},n.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Z.shouldNeverReachHere(),null},n.prototype.clone=function(){var t=i.prototype.clone.call(this);t._geometries=new Array(this._geometries.length).fill(null);for(var e=0;e<this._geometries.length;e++)t._geometries[e]=this._geometries[e].clone();return t},n.prototype.getGeometryType=function(){return"GeometryCollection"},n.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new n(t,this._factory)},n.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},t.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(n,t),n}(ft),Zt=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return ft.SORTINDEX_MULTILINESTRING},r.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)},r.prototype.getBoundaryDimension=function(){return this.isClosed()?Jt.FALSE:0},r.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},r.prototype.getDimension=function(){return 1},r.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},r.prototype.getBoundary=function(){return new Qt(this).getBoundary()},r.prototype.getGeometryType=function(){return"MultiLineString"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[Yt]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(r,t),r}($t),Qt=function(){var t,e;this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length?(t=arguments[0],e=yt.MOD2_BOUNDARY_RULE,this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e):2===arguments.length&&(t=arguments[0],e=arguments[1],this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e)};Qt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();t=this.computeBoundaryCoordinates(t);return 1===t.length?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)},Qt.prototype.getBoundary=function(){return this._geom instanceof ie?this.boundaryLineString(this._geom):this._geom instanceof Zt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Qt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Qt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Qt.prototype.computeBoundaryCoordinates=function(t){var e=new Lt;this._endpointMap=new p;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return St.toCoordinateArray(e)},Qt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new te,this._endpointMap.put(t,e)),e.count++},Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt},Qt.getBoundary=function(){return 1===arguments.length?new Qt(arguments[0]).getBoundary():2===arguments.length?new Qt(arguments[0],arguments[1]).getBoundary():void 0};var te=function(){this.count=null};te.prototype.interfaces_=function(){return[]},te.prototype.getClass=function(){return te};function ee(){}M={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};ee.prototype.interfaces_=function(){return[]},ee.prototype.getClass=function(){return ee},ee.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},ee.getStackTrace=function(){if(1===arguments.length){var t=new function(){},e=new function(){};return arguments[0].printStackTrace(e),t.toString()}if(2===arguments.length){for(var n=arguments[1],r="",i=new function(){}(ee.getStackTrace(arguments[0])),o=0;o<n;o++)try{r+=i.readLine()+ee.NEWLINE}catch(t){if(!(t instanceof d))throw t;Z.shouldNeverReachHere()}return r}},ee.split=function(t,e){for(var n=e.length,r=new Lt,i=""+t,o=i.indexOf(e);0<=o;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}0<i.length&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},ee.toString=function(){if(1===arguments.length){var t=arguments[0];return ee.SIMPLE_ORDINATE_FORMAT.format(t)}},ee.spaces=function(t){return ee.chars(" ",t)},M.NEWLINE.get=function(){return V.getProperty("line.separator")},M.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}},Object.defineProperties(ee,M);function ne(){}ne.prototype.interfaces_=function(){return[]},ne.prototype.getClass=function(){return ne},ne.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},ne.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},ne.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||m.isNaN(s)&&m.isNaN(a)))return!1}return!0},ne.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(ne.copy(e,0,r,0,i),0<i)for(var o=i;o<n;o++)ne.copy(e,i-1,r,o,1);return r},ne.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)ne.swap(t,r,e-r)},ne.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},ne.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)ne.copyCoord(t,e+o,n,r+o)},ne.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new R;r.append("(");for(var i=0;i<e;i++){0<i&&r.append(" ");for(var o=0;o<n;o++)0<o&&r.append(","),r.append(ee.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},ne.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?ne.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(n-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(n-1,G.Y)?e:ne.createClosedRing(t,e,n+1)},ne.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),t=e.size();ne.copy(e,0,r,0,t);for(var i=t;i<n;i++)ne.copy(e,0,r,i,1);return r};function re(){}var ie=function(i){function e(t,e){i.call(this,e),this._points=null,this.init(t)}i&&(e.__proto__=i);var t={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new X:this._points.expandEnvelope(new X)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return i.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),e))return!1;return!0},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return 0<this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))&&ne.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Jt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return pt.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return ne.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(P(arguments[0],gt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(P(arguments[0],Kt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],Ht)||P(arguments[0],ht))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Qt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var t=i.prototype.clone.call(this);return t._points=this._points.clone(),t},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new E("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Yt]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,t),e}(ft);re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re};function oe(){}var se=function(n){function t(t,e){n.call(this,e),this._coordinates=t||null,this.init(this._coordinates)}n&&(t.__proto__=n);var e={serialVersionUID:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new X;var t=new X;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},t.prototype.getSortIndex=function(){return n.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return Jt.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}},t.prototype.apply=function(){if(P(arguments[0],gt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(P(arguments[0],Kt)){t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],Ht)||P(arguments[0],ht))&&arguments[0].filter(this)},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var t=n.prototype.clone.call(this);return t._coordinates=this._coordinates.clone(),t},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return 0===this._coordinates.size()},t.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Z.isTrue(t.size()<=1),this._coordinates=t},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[re]},t.prototype.getClass=function(){return t},e.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(t,e),t}(ft);oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe};function ae(t){this._factory=t||null,this._isUserDataCopied=!1}var ue=function(o){function r(t,e,n){if(o.call(this,n),this._shell=null,(this._holes=null)===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),o.hasNullElements(e))throw new E("holes must not contain null elements");if(t.isEmpty()&&o.hasNonEmptyElements(e))throw new E("shell is empty but holes are not");this._shell=t,this._holes=e}o&&(r.__proto__=o);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(o&&o.prototype)).constructor=r).prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},r.prototype.getSortIndex=function(){return o.SORTINDEX_POLYGON},r.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},r.prototype.getArea=function(){var t=0;t+=Math.abs(pt.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(pt.signedArea(this._holes[e].getCoordinateSequence()));return t},r.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var i=t.getX(0),o=t.getY(0),s=1;s<=4;s++){var a=t.getX(s),u=t.getY(s);if(a!==i==(u!==o))return!1;i=a,o=u}return!0},r.prototype.equalsExact=function(){if(2!==arguments.length)return o.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this._shell,t=n._shell;if(!r.equalsExact(t,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(var i=0;i<this._holes.length;i++)if(!this._holes[i].equalsExact(n._holes[i],e))return!1;return!0},r.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Wt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);V.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=St.minCoordinate(e.getCoordinates());St.scroll(r,i),V.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],pt.isCCW(e.getCoordinates())===n&&St.reverse(e.getCoordinates())}},r.prototype.getCoordinate=function(){return this._shell.getCoordinate()},r.prototype.getNumInteriorRing=function(){return this._holes.length},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},r.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},r.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},r.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},r.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,t=t._shell;return e.compareToSameClass(t)}if(2===arguments.length){var n=arguments[1],r=arguments[0],e=this._shell,t=r._shell,t=e.compareToSameClass(t,n);if(0!==t)return t;for(var i=this.getNumInteriorRing(),o=r.getNumInteriorRing(),s=0;s<i&&s<o;){var a=this.getInteriorRingN(s),u=r.getInteriorRingN(s),u=a.compareToSameClass(u,n);if(0!==u)return u;s++}return s<i?1:s<o?-1:0}},r.prototype.apply=function(t){if(P(t,gt)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(P(t,Kt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(P(t,Ht))t.filter(this);else if(P(t,ht)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},r.prototype.clone=function(){var t=o.prototype.clone.call(this);t._shell=this._shell.clone(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].clone();return t},r.prototype.getGeometryType=function(){return"Polygon"},r.prototype.copy=function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<e.length;n++)e[n]=this._holes[n].copy();return new r(t,e,this._factory)},r.prototype.getExteriorRing=function(){return this._shell},r.prototype.isEmpty=function(){return this._shell.isEmpty()},r.prototype.getInteriorRingN=function(t){return this._holes[t]},r.prototype.interfaces_=function(){return[oe]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(r,t),r}(ft),ce=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return ft.SORTINDEX_MULTIPOINT},r.prototype.isValid=function(){return!0},r.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)},r.prototype.getCoordinate=function(){if(1!==arguments.length)return n.prototype.getCoordinate.apply(this,arguments);var t=arguments[0];return this._geometries[t].getCoordinate()},r.prototype.getBoundaryDimension=function(){return Jt.FALSE},r.prototype.getDimension=function(){return 0},r.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},r.prototype.getGeometryType=function(){return"MultiPoint"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[re]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(r,t),r}($t),le=function(n){function t(t,e){t instanceof S&&e instanceof xe&&(t=e.getCoordinateSequenceFactory().create(t)),n.call(this,t,e),this.validateConstruction()}n&&(t.__proto__=n);var e={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getSortIndex=function(){return ft.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return Jt.FALSE},t.prototype.isClosed=function(){return!!this.isEmpty()||n.prototype.isClosed.call(this)},t.prototype.reverse=function(){var t=this._points.copy();return ne.reverse(t),this.getFactory().createLinearRing(t)},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!n.prototype.isClosed.call(this))throw new E("Points of LinearRing do not form a closed linestring");if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new E("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},e.MINIMUM_VALID_SIZE.get=function(){return 4},e.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,e),t}(ie),pe=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return ft.SORTINDEX_MULTIPOLYGON},r.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Lt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},r.prototype.getGeometryType=function(){return"MultiPolygon"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[oe]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(r,t),r}($t),I={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ae.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ae.prototype.edit=function(t,e){if(null===t)return null;e=this.editInternal(t,e);return this._isUserDataCopied&&e.setUserData(t.getUserData()),e},ae.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof $t?this.editGeometryCollection(t,e):t instanceof ue?this.editPolygon(t,e):t instanceof se||t instanceof ie?e.edit(t,this._factory):(Z.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ae.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Lt,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===ce?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Zt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===pe?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},ae.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;t=this.edit(n.getExteriorRing(),e);if(null===t||t.isEmpty())return this._factory.createPolygon();for(var r=new Lt,i=0;i<n.getNumInteriorRing();i++){var o=this.edit(n.getInteriorRingN(i),e);null===o||o.isEmpty()||r.add(o)}return this._factory.createPolygon(t,r.toArray([]))},ae.prototype.interfaces_=function(){return[]},ae.prototype.getClass=function(){return ae},ae.GeometryEditorOperation=function(){},I.NoOpGeometryOperation.get=function(){return he},I.CoordinateOperation.get=function(){return fe},I.CoordinateSequenceOperation.get=function(){return de},Object.defineProperties(ae,I);var he=function(){};he.prototype.edit=function(t,e){return t},he.prototype.interfaces_=function(){return[ae.GeometryEditorOperation]},he.prototype.getClass=function(){return he};var fe=function(){};fe.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof le?e.createLinearRing(n):t instanceof ie?e.createLineString(n):t instanceof se?0<n.length?e.createPoint(n[0]):e.createPoint():t},fe.prototype.interfaces_=function(){return[ae.GeometryEditorOperation]},fe.prototype.getClass=function(){return fe};var de=function(){};de.prototype.edit=function(t,e){return t instanceof le?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof ie?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof se?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},de.prototype.interfaces_=function(){return[ae.GeometryEditorOperation]},de.prototype.getClass=function(){return de};function ge(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new S}else if(P(arguments[0],G)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],i=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=i;for(var a=0;a<s;a++)this._coordinates[a]=new S}}M={serialVersionUID:{configurable:!0}};ge.prototype.setOrdinate=function(t,e,n){switch(e){case G.X:this._coordinates[t].x=n;break;case G.Y:this._coordinates[t].y=n;break;case G.Z:this._coordinates[t].z=n;break;default:throw new E("invalid ordinateIndex")}},ge.prototype.size=function(){return this._coordinates.length},ge.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x;case G.Y:return this._coordinates[t].y;case G.Z:return this._coordinates[t].z}return m.NaN},ge.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}var e;2===arguments.length&&(e=arguments[0],(t=arguments[1]).x=this._coordinates[e].x,t.y=this._coordinates[e].y,t.z=this._coordinates[e].z)},ge.prototype.getCoordinateCopy=function(t){return new S(this._coordinates[t])},ge.prototype.getDimension=function(){return this._dimension},ge.prototype.getX=function(t){return this._coordinates[t].x},ge.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ge(t,this._dimension)},ge.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ge.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ge(t,this._dimension)},ge.prototype.toString=function(){if(0<this._coordinates.length){var t=new R(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ge.prototype.getY=function(t){return this._coordinates[t].y},ge.prototype.toCoordinateArray=function(){return this._coordinates},ge.prototype.interfaces_=function(){return[G,e]},ge.prototype.getClass=function(){return ge},M.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ge,M);function ye(){}I={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ye.prototype.readResolve=function(){return ye.instance()},ye.prototype.create=function(){if(1===arguments.length)return arguments[0]instanceof Array||P(arguments[0],G)?new ge(arguments[0]):void 0;if(2===arguments.length){var t=arguments[0],e=arguments[1];return 3<e&&(e=3),e<2?new ge(t):new ge(t,e)}},ye.prototype.interfaces_=function(){return[L,e]},ye.prototype.getClass=function(){return ye},ye.instance=function(){return ye.instanceObject},I.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},I.instanceObject.get=function(){return new ye},Object.defineProperties(ye,I);function _e(){var t,e;this._modelType=null,this._scale=null,0===arguments.length?this._modelType=_e.FLOATING:1===arguments.length&&(arguments[0]instanceof Ie?(t=arguments[0],(this._modelType=t)===_e.FIXED&&this.setScale(1)):"number"==typeof arguments[0]?(e=arguments[0],this._modelType=_e.FIXED,this.setScale(e)):arguments[0]instanceof _e&&(e=arguments[0],this._modelType=e._modelType,this._scale=e._scale))}var me,ve=((me=N)&&(Ee.__proto__=me),((Ee.prototype=Object.create(me&&me.prototype)).constructor=Ee).prototype.get=function(t){return this.map_.get(t)||null},Ee.prototype.put=function(t,e){return this.map_.set(t,e),e},Ee.prototype.values=function(){for(var t=new Lt,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},Ee.prototype.entrySet=function(){var e=new Ut;return this.map_.entries().forEach(function(t){return e.add(t)}),e},Ee.prototype.size=function(){return this.map_.size()},Ee),M={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};function Ee(){me.call(this),this.map_=new Map}_e.prototype.equals=function(t){if(!(t instanceof _e))return!1;return this._modelType===t._modelType&&this._scale===t._scale},_e.prototype.compareTo=function(t){var e=t,t=this.getMaximumSignificantDigits(),e=e.getMaximumSignificantDigits();return new F(t).compareTo(new F(e))},_e.prototype.getScale=function(){return this._scale},_e.prototype.isFloating=function(){return this._modelType===_e.FLOATING||this._modelType===_e.FLOATING_SINGLE},_e.prototype.getType=function(){return this._modelType},_e.prototype.toString=function(){var t="UNKNOWN";return this._modelType===_e.FLOATING?t="Floating":this._modelType===_e.FLOATING_SINGLE?t="Floating-Single":this._modelType===_e.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},_e.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return m.isNaN(t)?t:this._modelType!==_e.FLOATING_SINGLE&&this._modelType===_e.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof S){t=arguments[0];if(this._modelType===_e.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}},_e.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===_e.FLOATING?t=16:this._modelType===_e.FLOATING_SINGLE?t=6:this._modelType===_e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},_e.prototype.setScale=function(t){this._scale=Math.abs(t)},_e.prototype.interfaces_=function(){return[e,b]},_e.prototype.getClass=function(){return _e},_e.mostPrecise=function(t,e){return 0<=t.compareTo(e)?t:e},M.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},M.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(_e,M);var Ie=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},I={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Ie.prototype.readResolve=function(){return Ie.nameToTypeMap.get(this._name)},Ie.prototype.toString=function(){return this._name},Ie.prototype.interfaces_=function(){return[e]},Ie.prototype.getClass=function(){return Ie},I.serialVersionUID.get=function(){return-552860263173159e4},I.nameToTypeMap.get=function(){return new ve},Object.defineProperties(Ie,I),_e.Type=Ie,_e.FIXED=new Ie("FIXED"),_e.FLOATING=new Ie("FLOATING"),_e.FLOATING_SINGLE=new Ie("FLOATING SINGLE");var xe=function t(){this._precisionModel=new _e,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?P(arguments[0],L)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof _e&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},N={serialVersionUID:{configurable:!0}};xe.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new S(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new S(t.getMinX(),t.getMinY()),new S(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new S(t.getMinX(),t.getMinY()),new S(t.getMinX(),t.getMaxY()),new S(t.getMaxX(),t.getMaxY()),new S(t.getMaxX(),t.getMinY()),new S(t.getMinX(),t.getMinY())]),null)},xe.prototype.createLineString=function(t){return t?t instanceof Array?new ie(this.getCoordinateSequenceFactory().create(t),this):P(t,G)?new ie(t,this):void 0:new ie(this.getCoordinateSequenceFactory().create([]),this)},xe.prototype.createMultiLineString=function(){return 0===arguments.length?new Zt(null,this):1===arguments.length?new Zt(arguments[0],this):void 0},xe.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(xe.toGeometryArray(t));var a=t.iterator().next();if(1<t.size()){if(a instanceof ue)return this.createMultiPolygon(xe.toPolygonArray(t));if(a instanceof ie)return this.createMultiLineString(xe.toLineStringArray(t));if(a instanceof se)return this.createMultiPoint(xe.toPointArray(t));Z.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},xe.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},xe.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(P(arguments[0],G))return new se(arguments[0],this)}},xe.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},xe.prototype.createPolygon=function(){if(0===arguments.length)return new ue(null,null,this);if(1===arguments.length){if(P(arguments[0],G)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof le){e=arguments[0];return this.createPolygon(e,null)}}else if(2===arguments.length)return new ue(arguments[0],arguments[1],this)},xe.prototype.getSRID=function(){return this._SRID},xe.prototype.createGeometryCollection=function(){return 0===arguments.length?new $t(null,this):1===arguments.length?new $t(arguments[0],this):void 0},xe.prototype.createGeometry=function(t){return new ae(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},xe.prototype.getPrecisionModel=function(){return this._precisionModel},xe.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],G))return new le(arguments[0],this)}},xe.prototype.createMultiPolygon=function(){return 0===arguments.length?new pe(null,this):1===arguments.length?new pe(arguments[0],this):void 0},xe.prototype.createMultiPoint=function(){if(0===arguments.length)return new ce(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new ce(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],G)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());ne.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},xe.prototype.interfaces_=function(){return[e]},xe.prototype.getClass=function(){return xe},xe.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.getDefaultCoordinateSequenceFactory=function(){return ye.instance()},xe.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},N.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(xe,N);function be(t){this.geometryFactory=t||new xe}var Ce=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];be.prototype.read=function(t){var e,t=(e="string"==typeof t?JSON.parse(t):t).type;if(!we[t])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Ce.indexOf(t)?we[t].apply(this,[e.coordinates]):"GeometryCollection"===t?we[t].apply(this,[e.geometries]):we[t].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!Se[e])throw new Error("Geometry is not supported");return Se[e].apply(this,[t])};var we={Feature:function(t){var e,n={};for(e in t)n[e]=t[e];if(t.geometry){var r=t.geometry.type;if(!we[r])throw new Error("Unknown GeoJSON type: "+t.type);n.geometry=this.read(t.geometry)}return t.bbox&&(n.bbox=we.bbox.apply(this,[t.bbox])),n},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new S(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new S(t[0],t[1]),new S(t[2],t[1]),new S(t[2],t[3]),new S(t[0],t[3]),new S(t[0],t[1])])},Point:function(t){t=new S(t[0],t[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(we.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){t=we.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(t)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(we.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=we.coordinates.apply(this,[t[0]]),e=this.geometryFactory.createLinearRing(e),n=[],r=1;r<t.length;++r){var i=t[r],i=we.coordinates.apply(this,[i]),i=this.geometryFactory.createLinearRing(i);n.push(i)}return this.geometryFactory.createPolygon(e,n)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(we.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Se={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Se.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],r=Se.Point.apply(this,[r]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Se.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],r=Se.LineString.apply(this,[r]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Se.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],i=Se.LineString.apply(this,[i]);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],r=Se.Polygon.apply(this,[r]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Se[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},M=function(t){this.geometryFactory=t||new xe,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};M.prototype.read=function(t){t=this.parser.read(t);return this.precisionModel.getType()===_e.FIXED&&this.reducePrecision(t),t},M.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};I=function(){this.parser=new be(this.geometryFactory)};I.prototype.write=function(t){return this.parser.write(t)};function Ne(){}N={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne},Ne.opposite=function(t){return t===Ne.LEFT?Ne.RIGHT:t===Ne.RIGHT?Ne.LEFT:t},N.ON.get=function(){return 0},N.LEFT.get=function(){return 1},N.RIGHT.get=function(){return 2},Object.defineProperties(Ne,N),(g.prototype=new Error).name="EmptyStackException",(y.prototype=new Ct).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};function Te(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}Te.prototype.getCoordinate=function(){return this._minCoord},Te.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Te.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Z.isTrue(0<this._minIndex&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=pt.computeOrientation(this._minCoord,n,e),t=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===pt.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===pt.CLOCKWISE)&&(t=!0),t&&(this._minIndex=this._minIndex-1)},Te.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;t=Ne.LEFT;return n[e].y<n[e+1].y&&(t=Ne.RIGHT),t},Te.prototype.getEdge=function(){return this._orientedDe},Te.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Te.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Te.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Z.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ne.LEFT&&(this._orientedDe=this._minDe.getSym())},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te};function Le(){this.array_=[]}var Oe,Me=((Oe=et)&&(Pe.__proto__=Oe),Pe.prototype=Object.create(Oe&&Oe.prototype),(Pe.prototype.constructor=Pe).prototype.getCoordinate=function(){return this.pt},Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe},Pe.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},Pe);function Pe(t,e){Oe.call(this,Pe.msgWithCoord(t,e)),this.pt=e?new S(e):null,this.name="TopologyException"}Le.prototype.addLast=function(t){this.array_.push(t)},Le.prototype.removeFirst=function(){return this.array_.shift()},Le.prototype.isEmpty=function(){return 0===this.array_.length};function Ae(){this._finder=null,this._dirEdgeList=new Lt,this._nodes=new Lt,this._rightMostCoord=null,this._env=null,this._finder=new Te}Ae.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Ae.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ae.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Me("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Ae.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ne.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ae.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ae.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();1<=e.getDepth(Ne.RIGHT)&&e.getDepth(Ne.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ae.prototype.computeDepths=function(t){var e=new Ut,n=new Le,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();s.isVisited()||(s=s.getNode(),e.contains(s)||(n.addLast(s),e.add(s)))}}},Ae.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},Ae.prototype.getEnvelope=function(){if(null===this._env){for(var t=new X,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Ae.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Ae.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ne.LEFT,t.getDepth(Ne.RIGHT)),e.setDepth(Ne.RIGHT,t.getDepth(Ne.LEFT))},Ae.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);r=r.getSym().getNode();r.isVisited()||e.push(r)}},Ae.prototype.getNodes=function(){return this._nodes},Ae.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ae.prototype.interfaces_=function(){return[b]},Ae.prototype.getClass=function(){return Ae};function Re(){var t;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ne.ON]=n}else if(arguments[0]instanceof Re){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else 3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.init(3),this.location[Ne.ON]=t,this.location[Ne.LEFT]=e,this.location[Ne.RIGHT]=n)}Re.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Re.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==O.NONE)return!1;return!0},Re.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===O.NONE&&(this.location[e]=t)},Re.prototype.isLine=function(){return 1===this.location.length},Re.prototype.merge=function(t){var e;t.location.length>this.location.length&&((e=new Array(3).fill(null))[Ne.ON]=this.location[Ne.ON],e[Ne.LEFT]=O.NONE,e[Ne.RIGHT]=O.NONE,this.location=e);for(var n=0;n<this.location.length;n++)this.location[n]===O.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Re.prototype.getLocations=function(){return this.location},Re.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ne.LEFT];this.location[Ne.LEFT]=this.location[Ne.RIGHT],this.location[Ne.RIGHT]=t},Re.prototype.toString=function(){var t=new R;return 1<this.location.length&&t.append(O.toLocationSymbol(this.location[Ne.LEFT])),t.append(O.toLocationSymbol(this.location[Ne.ON])),1<this.location.length&&t.append(O.toLocationSymbol(this.location[Ne.RIGHT])),t.toString()},Re.prototype.setLocations=function(t,e,n){this.location[Ne.ON]=t,this.location[Ne.LEFT]=e,this.location[Ne.RIGHT]=n},Re.prototype.get=function(t){return t<this.location.length?this.location[t]:O.NONE},Re.prototype.isArea=function(){return 1<this.location.length},Re.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===O.NONE)return!0;return!1},Re.prototype.setLocation=function(){var t,e;1===arguments.length?(e=arguments[0],this.setLocation(Ne.ON,e)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.location[t]=e)},Re.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(O.NONE)},Re.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Re.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re};function Fe(){var t,e,n,r,i,o;this.elt=new Array(2).fill(null),1===arguments.length?Number.isInteger(arguments[0])?(t=arguments[0],this.elt[0]=new Re(t),this.elt[1]=new Re(t)):arguments[0]instanceof Fe&&(e=arguments[0],this.elt[0]=new Re(e.elt[0]),this.elt[1]=new Re(e.elt[1])):2===arguments.length?(e=arguments[0],n=arguments[1],this.elt[0]=new Re(O.NONE),this.elt[1]=new Re(O.NONE),this.elt[e].setLocation(n)):3===arguments.length?(r=arguments[0],i=arguments[1],o=arguments[2],this.elt[0]=new Re(r,i,o),this.elt[1]=new Re(r,i,o)):4===arguments.length&&(n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],this.elt[0]=new Re(O.NONE,O.NONE,O.NONE),this.elt[1]=new Re(O.NONE,O.NONE,O.NONE),this.elt[n].setLocations(r,i,o))}Fe.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Fe.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Fe.prototype.isNull=function(t){return this.elt[t].isNull()},Fe.prototype.setAllLocationsIfNull=function(){var t,e;1===arguments.length?(e=arguments[0],this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.elt[t].setAllLocationsIfNull(e))},Fe.prototype.isLine=function(t){return this.elt[t].isLine()},Fe.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Re(t.elt[e]):this.elt[e].merge(t.elt[e])},Fe.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Fe.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ne.ON)}if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.elt[e].get(t)}},Fe.prototype.toString=function(){var t=new R;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Fe.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Fe.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Fe.prototype.setLocation=function(){var t,e,n;2===arguments.length?(e=arguments[0],n=arguments[1],this.elt[e].setLocation(Ne.ON,n)):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.elt[t].setLocation(e,n))},Fe.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Fe.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Fe.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Re(this.elt[t].location[0]))},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe},Fe.toLineLabel=function(t){for(var e=new Fe(O.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};function De(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Lt,this._pts=new Lt,this._label=new Fe(O.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Lt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}De.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=pt.isCCW(this._ring.getCoordinates())},De.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},De.prototype.computePoints=function(t){var e=this._startDe=t,n=!0;do{if(null===e)throw new Me("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Me("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel()}while(Z.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),(e=this.getNext(e))!==this._startDe)},De.prototype.getLinearRing=function(){return this._ring},De.prototype.getCoordinate=function(t){return this._pts.get(t)},De.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this)}while(e>this._maxNodeDegree&&(this._maxNodeDegree=e),(t=this.getNext(t))!==this._startDe);this._maxNodeDegree*=2},De.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{i=r.length-2;n&&(i=r.length-1);for(var s=i;0<=s;s--)this._pts.add(r[s])}},De.prototype.isHole=function(){return this._isHole},De.prototype.setInResult=function(){for(var t=this._startDe;t.getEdge().setInResult(!0),t=t.getNext(),t!==this._startDe;);},De.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!pt.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},De.prototype.addHole=function(t){this._holes.add(t)},De.prototype.isShell=function(){return null===this._shell},De.prototype.getLabel=function(){return this._label},De.prototype.getEdges=function(){return this._edges},De.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},De.prototype.getShell=function(){return this._shell},De.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],t=arguments[0].getLocation(e,Ne.RIGHT);return t===O.NONE?null:this._label.getLocation(e)===O.NONE?(this._label.setLocation(e,t),null):void 0}},De.prototype.setShell=function(t){null!==(this._shell=t)&&t.addHole(this)},De.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};function je(){var t;this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length||1===arguments.length&&(t=arguments[0],this._label=t)}var ke,Ge,Ue=((Ge=De)&&(ze.__proto__=Ge),((ze.prototype=Object.create(Ge&&Ge.prototype)).constructor=ze).prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},ze.prototype.getNext=function(t){return t.getNextMin()},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze},ze),Ve=((ke=De)&&(Be.__proto__=ke),((Be.prototype=Object.create(ke&&ke.prototype)).constructor=Be).prototype.buildMinimalRings=function(){var t,e=new Lt,n=this._startDe;do{}while(null===n.getMinEdgeRing()&&(t=new Ue(n,this._geometryFactory),e.add(t)),(n=n.getNext())!==this._startDe);return e},Be.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},Be.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){for(var t=this._startDe;t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext(),t!==this._startDe;);},Be.prototype.getNext=function(t){return t.getNext()},Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be);function Be(){var t=arguments[0],e=arguments[1];ke.call(this,t,e)}function ze(){var t=arguments[0],e=arguments[1];Ge.call(this,t,e)}je.prototype.setVisited=function(t){this._isVisited=t},je.prototype.setInResult=function(t){this._isInResult=t},je.prototype.isCovered=function(){return this._isCovered},je.prototype.isCoveredSet=function(){return this._isCoveredSet},je.prototype.setLabel=function(t){this._label=t},je.prototype.getLabel=function(){return this._label},je.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},je.prototype.updateIM=function(t){Z.isTrue(2<=this._label.getGeometryCount(),"found partial label"),this.computeIM(t)},je.prototype.isInResult=function(){return this._isInResult},je.prototype.isVisited=function(){return this._isVisited},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};function qe(){this.nodeMap=new p,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}var Ye,Xe=((Ye=je)&&(We.__proto__=Ye),((We.prototype=Object.create(Ye&&Ye.prototype)).constructor=We).prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},We.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},We.prototype.getCoordinate=function(){return this._coord},We.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},We.prototype.computeIM=function(t){},We.prototype.computeMergedLocation=function(t,e){var n=O.NONE,n=this._label.getLocation(e);return t.isNull(e)||(e=t.getLocation(e),n!==O.BOUNDARY&&(n=e)),n},We.prototype.setLabel=function(){if(2!==arguments.length)return Ye.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new Fe(t,e):this._label.setLocation(t,e)},We.prototype.getEdges=function(){return this._edges},We.prototype.mergeLabel=function(){if(arguments[0]instanceof We){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Fe)for(var e=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(e,n);this._label.getLocation(n)===O.NONE&&this._label.setLocation(n,r)}},We.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},We.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=O.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case O.BOUNDARY:n=O.INTERIOR;break;case O.INTERIOR:default:n=O.BOUNDARY}this._label.setLocation(t,n)},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We},We);function We(){Ye.call(this),this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new Fe(0,O.NONE)}qe.prototype.find=function(t){return this.nodeMap.get(t)},qe.prototype.addNode=function(){if(arguments[0]instanceof S){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Xe){t=arguments[0],e=this.nodeMap.get(t.getCoordinate());return null===e?(this.nodeMap.put(t.getCoordinate(),t),t):(e.mergeLabel(t),e)}},qe.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},qe.prototype.iterator=function(){return this.nodeMap.values().iterator()},qe.prototype.values=function(){return this.nodeMap.values()},qe.prototype.getBoundaryNodes=function(t){for(var e=new Lt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===O.BOUNDARY&&e.add(r)}return e},qe.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};function Je(){}N={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je},Je.isNorthern=function(t){return t===Je.NE||t===Je.NW},Je.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Je.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(e<t?t:e)?3:n},Je.isInHalfPlane=function(t,e){return e===Je.SE?t===Je.SE||t===Je.SW:t===e||t===e+1},Je.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new E("Cannot compute the quadrant for point ( "+t+", "+e+" )");return 0<=t?0<=e?Je.NE:Je.SE:0<=e?Je.NW:Je.SW}if(arguments[0]instanceof S&&arguments[1]instanceof S){t=arguments[0],e=arguments[1];if(e.x===t.x&&e.y===t.y)throw new E("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?Je.NE:Je.SE:e.y>=t.y?Je.NW:Je.SW}},N.NE.get=function(){return 0},N.NW.get=function(){return 1},N.SW.get=function(){return 2},N.SE.get=function(){return 3},Object.defineProperties(Je,N);function He(){var t,e,n,r;this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length?(t=arguments[0],this._edge=t):3===arguments.length?(e=arguments[0],n=arguments[1],r=arguments[2],this._edge=e,this.init(n,r),this._label=null):4===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],this._edge=t,this.init(e,n),this._label=r)}He.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:pt.computeOrientation(t._p0,t._p1,this._p1)},He.prototype.getDy=function(){return this._dy},He.prototype.getCoordinate=function(){return this._p0},He.prototype.setNode=function(t){this._node=t},He.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),r=n.substring(r+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},He.prototype.compareTo=function(t){return this.compareDirection(t)},He.prototype.getDirectedCoordinate=function(){return this._p1},He.prototype.getDx=function(){return this._dx},He.prototype.getLabel=function(){return this._label},He.prototype.getEdge=function(){return this._edge},He.prototype.getQuadrant=function(){return this._quadrant},He.prototype.getNode=function(){return this._node},He.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},He.prototype.computeLabel=function(t){},He.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Je.quadrant(this._dx,this._dy),Z.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},He.prototype.interfaces_=function(){return[b]},He.prototype.getClass=function(){return He};function Ke(){}var $e,Ze=(($e=He)&&(Qe.__proto__=$e),((Qe.prototype=Object.create($e&&$e.prototype)).constructor=Qe).prototype.getNextMin=function(){return this._nextMin},Qe.prototype.getDepth=function(t){return this._depth[t]},Qe.prototype.setVisited=function(t){this._isVisited=t},Qe.prototype.computeDirectedLabel=function(){this._label=new Fe(this._edge.getLabel()),this._isForward||this._label.flip()},Qe.prototype.getNext=function(){return this._next},Qe.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Me("assigned depths do not match",this.getCoordinate());this._depth[t]=e},Qe.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ne.LEFT)===O.INTERIOR&&this._label.getLocation(e,Ne.RIGHT)===O.INTERIOR||(t=!1);return t},Qe.prototype.setNextMin=function(t){this._nextMin=t},Qe.prototype.print=function(t){$e.prototype.print.call(this,t),t.print(" "+this._depth[Ne.LEFT]+"/"+this._depth[Ne.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},Qe.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},Qe.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,O.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,O.EXTERIOR);return t&&e&&n},Qe.prototype.setEdgeRing=function(t){this._edgeRing=t},Qe.prototype.getMinEdgeRing=function(){return this._minEdgeRing},Qe.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},Qe.prototype.setInResult=function(t){this._isInResult=t},Qe.prototype.getSym=function(){return this._sym},Qe.prototype.isForward=function(){return this._isForward},Qe.prototype.getEdge=function(){return this._edge},Qe.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},Qe.prototype.setSym=function(t){this._sym=t},Qe.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},Qe.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ne.LEFT&&(r=-1);var i=Ne.opposite(t),r=e+n*r;this.setDepth(t,e),this.setDepth(i,r)},Qe.prototype.getEdgeRing=function(){return this._edgeRing},Qe.prototype.isInResult=function(){return this._isInResult},Qe.prototype.setNext=function(t){this._next=t},Qe.prototype.isVisited=function(){return this._isVisited},Qe.prototype.interfaces_=function(){return[]},Qe.prototype.getClass=function(){return Qe},Qe.depthFactor=function(t,e){return t===O.EXTERIOR&&e===O.INTERIOR?1:t===O.INTERIOR&&e===O.EXTERIOR?-1:0},Qe);function Qe(){var t=arguments[0],e=arguments[1];$e.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],(this._isForward=e)?this.init(t.getCoordinate(0),t.getCoordinate(1)):(e=t.getNumPoints()-1,this.init(t.getCoordinate(e),t.getCoordinate(e-1))),this.computeDirectedLabel()}Ke.prototype.createNode=function(t){return new Xe(t,null)},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};function tn(){var t;this._edges=new Lt,this._nodes=null,this._edgeEndList=new Lt,0===arguments.length?this._nodes=new qe(new Ke):1===arguments.length&&(t=arguments[0],this._nodes=new qe(t))}tn.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},tn.prototype.find=function(t){return this._nodes.find(t)},tn.prototype.addNode=function(){if(arguments[0]instanceof Xe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof S){t=arguments[0];return this._nodes.addNode(t)}},tn.prototype.getNodeIterator=function(){return this._nodes.iterator()},tn.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},tn.prototype.debugPrintln=function(t){V.out.println(t)},tn.prototype.isBoundaryNode=function(t,e){e=this._nodes.find(e);if(null===e)return!1;e=e.getLabel();return null!==e&&e.getLocation(t)===O.BOUNDARY},tn.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},tn.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&pt.computeOrientation(t,e,r)===pt.COLLINEAR&&Je.quadrant(t,e)===Je.quadrant(n,r)},tn.prototype.getEdgeEnds=function(){return this._edgeEndList},tn.prototype.debugPrint=function(t){V.out.print(t)},tn.prototype.getEdgeIterator=function(){return this._edges.iterator()},tn.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},tn.prototype.insertEdge=function(t){this._edges.add(t)},tn.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},tn.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ze(n,!0),n=new Ze(n,!1);r.setSym(n),n.setSym(r),this.add(r),this.add(n)}},tn.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},tn.prototype.getNodes=function(){return this._nodes.values()},tn.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},tn.prototype.interfaces_=function(){return[]},tn.prototype.getClass=function(){return tn},tn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};function en(){this._geometryFactory=null,this._shellList=new Lt;var t=arguments[0];this._geometryFactory=t}en.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();(i.isHole()?n:e).add(i)}},en.prototype.computePolygons=function(t){for(var e=new Lt,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},en.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Me("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},en.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Lt,i=t.iterator();i.hasNext();){var o,s,a=i.next();2<a.getMaxNodeDegree()?(a.linkDirectedEdgesForMinimalEdgeRings(),o=a.buildMinimalRings(),null!==(s=this.findShell(o))?(this.placePolygonHoles(s,o),e.add(s)):n.addAll(o)):r.add(a)}return r},en.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},en.prototype.buildMaximalEdgeRings=function(t){for(var e=new Lt,n=t.iterator();n.hasNext();){var r=n.next();r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()&&(r=new Ve(r,this._geometryFactory),e.add(r),r.setInResult())}return e},en.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},en.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},en.prototype.findEdgeRingContaining=function(t,e){for(var t=t.getLinearRing(),n=t.getEnvelopeInternal(),r=t.getCoordinateN(0),i=null,o=null,s=e.iterator();s.hasNext();){var a=s.next(),u=a.getLinearRing(),c=u.getEnvelopeInternal();null!==i&&(o=i.getLinearRing().getEnvelopeInternal());var l=!1;c.contains(n)&&pt.isPointInRing(r,u.getCoordinates())&&(l=!0),l&&(null===i||o.contains(c))&&(i=a)}return i},en.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return Z.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},en.prototype.add=function(){var t,e;1===arguments.length?(e=arguments[0],this.add(e.getEdgeEnds(),e.getNodes())):2===arguments.length&&(t=arguments[0],tn.linkResultDirectedEdges(arguments[1]),e=this.buildMaximalEdgeRings(t),t=new Lt,e=this.buildMinimalEdgeRings(e,this._shellList,t),this.sortShellsAndHoles(e,this._shellList,t),this.placeFreeHoles(this._shellList,t))},en.prototype.interfaces_=function(){return[]},en.prototype.getClass=function(){return en};function nn(){}nn.prototype.getBounds=function(){},nn.prototype.interfaces_=function(){return[]},nn.prototype.getClass=function(){return nn};function rn(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}rn.prototype.getItem=function(){return this._item},rn.prototype.getBounds=function(){return this._bounds},rn.prototype.interfaces_=function(){return[nn,e]},rn.prototype.getClass=function(){return rn};function on(){this._size=null,this._items=null,this._size=0,this._items=new Lt,this._items.add(null)}on.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),--this._size,this.reorder(1),t},on.prototype.size=function(){return this._size},on.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},on.prototype.clear=function(){this._size=0,this._items.clear()},on.prototype.isEmpty=function(){return 0===this._size},on.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};function sn(){}sn.prototype.visitItem=function(t){},sn.prototype.interfaces_=function(){return[]},sn.prototype.getClass=function(){return sn};function an(){}an.prototype.insert=function(t,e){},an.prototype.remove=function(t,e){},an.prototype.query=function(){},an.prototype.interfaces_=function(){return[]},an.prototype.getClass=function(){return an};function un(){var t;this._childBoundables=new Lt,this._bounds=null,this._level=null,0===arguments.length||1===arguments.length&&(t=arguments[0],this._level=t)}N={serialVersionUID:{configurable:!0}};un.prototype.getLevel=function(){return this._level},un.prototype.size=function(){return this._childBoundables.size()},un.prototype.getChildBoundables=function(){return this._childBoundables},un.prototype.addChildBoundable=function(t){Z.isTrue(null===this._bounds),this._childBoundables.add(t)},un.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},un.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},un.prototype.interfaces_=function(){return[nn,e]},un.prototype.getClass=function(){return un},N.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(un,N);function cn(){}cn.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},cn.min=function(t){return cn.sort(t),t.get(0)},cn.sort=function(t,e){var n=t.toArray();e?Wt.sort(n,e):Wt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},cn.singletonList=function(t){var e=new Lt;return e.add(t),e};function ln(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}ln.prototype.expandToQueue=function(t,e){var n=ln.isComposite(this._boundable1),r=ln.isComposite(this._boundable2);if(n&&r)return ln.area(this._boundable1)>ln.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,t,e):this.expand(this._boundable2,this._boundable1,t,e),null;if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new E("neither boundable is composite")},ln.prototype.isLeaves=function(){return!(ln.isComposite(this._boundable1)||ln.isComposite(this._boundable2))},ln.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},ln.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),o=new ln(o,e,this._itemDistance);o.getDistance()<r&&n.add(o)}},ln.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},ln.prototype.getDistance=function(){return this._distance},ln.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},ln.prototype.interfaces_=function(){return[b]},ln.prototype.getClass=function(){return ln},ln.area=function(t){return t.getBounds().getArea()},ln.isComposite=function(t){return t instanceof un};function pn(){var t;this._root=null,this._built=!1,this._itemBoundables=new Lt,this._nodeCapacity=null,0===arguments.length?(t=pn.DEFAULT_NODE_CAPACITY,this._nodeCapacity=t):1===arguments.length&&(Z.isTrue(1<(t=arguments[0]),"Node capacity must be greater than 1"),this._nodeCapacity=t)}N={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};pn.prototype.getNodeCapacity=function(){return this._nodeCapacity},pn.prototype.lastNode=function(t){return t.get(t.size()-1)},pn.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof un?t+=this.size(n):n instanceof rn&&(t+=1)}return t}},pn.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof rn&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},pn.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Lt:t}if(1===arguments.length){for(var t=arguments[0],e=new Lt,n=t.getChildBoundables().iterator();n.hasNext();){var r,i=n.next();i instanceof un?null!==(r=this.itemsTree(i))&&e.add(r):i instanceof rn?e.add(i.getItem()):Z.shouldNeverReachHere()}return e.size()<=0?null:e}},pn.prototype.insert=function(t,e){Z.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new rn(t,e))},pn.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Lt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],e=arguments[1],r=arguments[2];if(Z.isTrue(-2<n),e.getLevel()===n)return r.add(e),null;for(var i=e.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof un?this.boundablesAtLevel(n,o,r):(Z.isTrue(o instanceof rn),-1===n&&r.add(o))}return null}},pn.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Lt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){t=arguments[0],e=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e)}else if(3===arguments.length)if(P(arguments[2],sn)&&arguments[0]instanceof Object&&arguments[1]instanceof un)for(var n=arguments[0],r=arguments[2],i=arguments[1].getChildBoundables(),o=0;o<i.size();o++){var s=i.get(o);this.getIntersectsOp().intersects(s.getBounds(),n)&&(s instanceof un?this.query(n,s,r):s instanceof rn?r.visitItem(s.getItem()):Z.shouldNeverReachHere())}else if(P(arguments[2],Ct)&&arguments[0]instanceof Object&&arguments[1]instanceof un)for(var a=arguments[0],u=arguments[2],c=arguments[1].getChildBoundables(),l=0;l<c.size();l++){var p=c.get(l);this.getIntersectsOp().intersects(p.getBounds(),a)&&(p instanceof un?this.query(a,p,u):p instanceof rn?u.add(p.getItem()):Z.shouldNeverReachHere())}},pn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},pn.prototype.getRoot=function(){return this.build(),this._root},pn.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],e=arguments[1],r=arguments[2],i=this.removeItem(e,r);if(i)return!0;for(var o=null,s=e.getChildBoundables().iterator();s.hasNext();){var a=s.next();if(this.getIntersectsOp().intersects(a.getBounds(),n)&&a instanceof un&&(i=this.remove(n,a,r))){o=a;break}}return null!==o&&o.getChildBoundables().isEmpty()&&e.getChildBoundables().remove(o),i}},pn.prototype.createHigherLevels=function(t,e){Z.isTrue(!t.isEmpty());t=this.createParentBoundables(t,e+1);return 1===t.size()?t.get(0):this.createHigherLevels(t,e+1)},pn.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof un&&(t<(n=this.depth(n))&&(t=n))}return t+1}},pn.prototype.createParentBoundables=function(t,e){Z.isTrue(!t.isEmpty());var n=new Lt;n.add(this.createNode(e));t=new Lt(t);cn.sort(t,this.getComparator());for(var r=t.iterator();r.hasNext();){var i=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(i)}return n},pn.prototype.isEmpty=function(){return(this._built?this._root:this._itemBoundables).isEmpty()},pn.prototype.interfaces_=function(){return[e]},pn.prototype.getClass=function(){return pn},pn.compareDoubles=function(t,e){return e<t?1:t<e?-1:0},N.IntersectsOp.get=function(){return fn},N.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},N.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(pn,N);function hn(){}var fn=function(){};hn.prototype.distance=function(t,e){},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn};function dn(){}var gn,yn=function(o){function c(t){t=t||c.DEFAULT_NODE_CAPACITY,o.call(this,t)}o&&(c.__proto__=o);var t={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return((c.prototype=Object.create(o&&o.prototype)).constructor=c).prototype.createParentBoundablesFromVerticalSlices=function(t,e){Z.isTrue(0<t.length);for(var n=new Lt,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},c.prototype.createNode=function(t){return new _n(t)},c.prototype.size=function(){return 0===arguments.length?o.prototype.size.call(this):o.prototype.size.apply(this,arguments)},c.prototype.insert=function(){if(2!==arguments.length)return o.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;o.prototype.insert.call(this,t,e)},c.prototype.getIntersectsOp=function(){return c.intersectsOp},c.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Lt;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},c.prototype.query=function(){if(1===arguments.length){var t=arguments[0];return o.prototype.query.call(this,t)}var e,n,r,i;2===arguments.length?(e=arguments[0],t=arguments[1],o.prototype.query.call(this,e,t)):3===arguments.length&&(P(arguments[2],sn)&&arguments[0]instanceof Object&&arguments[1]instanceof un?(n=arguments[0],r=arguments[1],i=arguments[2],o.prototype.query.call(this,n,r,i)):P(arguments[2],Ct)&&arguments[0]instanceof Object&&arguments[1]instanceof un&&(n=arguments[0],r=arguments[1],i=arguments[2],o.prototype.query.call(this,n,r,i)))},c.prototype.getComparator=function(){return c.yComparator},c.prototype.createParentBoundablesFromVerticalSlice=function(t,e){return o.prototype.createParentBoundables.call(this,t,e)},c.prototype.remove=function(){if(2!==arguments.length)return o.prototype.remove.apply(this,arguments);var t=arguments[0],e=arguments[1];return o.prototype.remove.call(this,t,e)},c.prototype.depth=function(){return 0===arguments.length?o.prototype.depth.call(this):o.prototype.depth.apply(this,arguments)},c.prototype.createParentBoundables=function(t,e){Z.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),t=new Lt(t);cn.sort(t,c.xComparator);n=this.verticalSlices(t,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(n,e)},c.prototype.nearestNeighbour=function(){if(1===arguments.length){if(P(arguments[0],hn)){var t=arguments[0],t=new ln(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(t)}if(arguments[0]instanceof ln){var e=arguments[0];return this.nearestNeighbour(e,m.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof c&&P(arguments[1],hn)){var e=arguments[0],n=arguments[1],n=new ln(this.getRoot(),e.getRoot(),n);return this.nearestNeighbour(n)}if(arguments[0]instanceof ln&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1],o=null,s=new on;for(s.add(r);!s.isEmpty()&&0<i;){var a=s.poll(),u=a.getDistance();if(i<=u)break;a.isLeaves()?(i=u,o=a):a.expandToQueue(s,i)}return[o.getBoundable(0).getItem(),o.getBoundable(1).getItem()]}}else if(3===arguments.length){n=arguments[2],r=new rn(arguments[0],arguments[1]),n=new ln(this.getRoot(),r,n);return this.nearestNeighbour(n)[0]}},c.prototype.interfaces_=function(){return[an,e]},c.prototype.getClass=function(){return c},c.centreX=function(t){return c.avg(t.getMinX(),t.getMaxX())},c.avg=function(t,e){return(t+e)/2},c.centreY=function(t){return c.avg(t.getMinY(),t.getMaxY())},t.STRtreeNode.get=function(){return _n},t.serialVersionUID.get=function(){return 0x39920f7d5f261e0},t.xComparator.get=function(){return{interfaces_:function(){return[w]},compare:function(t,e){return o.compareDoubles(c.centreX(t.getBounds()),c.centreX(e.getBounds()))}}},t.yComparator.get=function(){return{interfaces_:function(){return[w]},compare:function(t,e){return o.compareDoubles(c.centreY(t.getBounds()),c.centreY(e.getBounds()))}}},t.intersectsOp.get=function(){return{interfaces_:function(){return[o.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},t.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(c,t),c}(pn),_n=((gn=un)&&(mn.__proto__=gn),((mn.prototype=Object.create(gn&&gn.prototype)).constructor=mn).prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new X(n.getBounds()):t.expandToInclude(n.getBounds())}return t},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn},mn);function mn(){var t=arguments[0];gn.call(this,t)}dn.prototype.interfaces_=function(){return[]},dn.prototype.getClass=function(){return dn},dn.relativeSign=function(t,e){return t<e?-1:e<t?1:0},dn.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=dn.relativeSign(e.x,n.x),i=dn.relativeSign(e.y,n.y);switch(t){case 0:return dn.compareValue(r,i);case 1:return dn.compareValue(i,r);case 2:return dn.compareValue(i,-r);case 3:return dn.compareValue(-r,i);case 4:return dn.compareValue(-r,-i);case 5:return dn.compareValue(-i,-r);case 6:return dn.compareValue(-i,r);case 7:return dn.compareValue(r,-i)}return Z.shouldNeverReachHere("invalid octant value"),0},dn.compareValue=function(t,e){return t<0?-1:0<t?1:e<0?-1:0<e?1:0};function vn(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new S(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))}vn.prototype.getCoordinate=function(){return this.coord},vn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},vn.prototype.compareTo=function(t){return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:dn.compare(this._segmentOctant,this.coord,t.coord)},vn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},vn.prototype.isInterior=function(){return this._isInterior},vn.prototype.interfaces_=function(){return[b]},vn.prototype.getClass=function(){return vn};function En(){this._nodeMap=new p,this._edge=null;var t=arguments[0];this._edge=t}En.prototype.getSplitCoordinates=function(){var t=new Mt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},En.prototype.addCollapsedNodes=function(){var t=new Lt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},En.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},En.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new F(e+1))}},En.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(r);n.add(new S(t.coord),!1);for(var i=t.segmentIndex+1;i<=e.segmentIndex;i++)n.add(this._edge.getCoordinate(i));r&&n.add(new S(e.coord))},En.prototype.iterator=function(){return this._nodeMap.values().iterator()},En.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},En.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},En.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new F(e[0])),r=i}},En.prototype.getEdge=function(){return this._edge},En.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},En.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(r);r||n--;var i=new Array(n).fill(null),o=0;i[o++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)i[o++]=this._edge.getCoordinate(s);return r&&(i[o]=new S(e.coord)),new Cn(i,this._edge.getData())},En.prototype.add=function(t,e){var n=new vn(this._edge,t,e,this._edge.getSegmentOctant(e)),e=this._nodeMap.get(n);return null!==e?(Z.isTrue(e.coord.equals2D(t),"Found equal nodes with different coordinates"),e):(this._nodeMap.put(n,n),n)},En.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new et("bad split edge start point at "+n);t=t.get(t.size()-1).getCoordinates(),t=t[t.length-1];if(!t.equals2D(e[e.length-1]))throw new et("bad split edge end point at "+t)},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En};function In(){}In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},In.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new E("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return 0<=t?0<=e?r<=n?0:1:r<=n?7:6:0<=e?r<=n?3:2:r<=n?4:5}if(arguments[0]instanceof S&&arguments[1]instanceof S){e=arguments[0],r=arguments[1],n=r.x-e.x,r=r.y-e.y;if(0==n&&0==r)throw new E("Cannot compute the octant for two identical points "+e);return In.octant(n,r)}};function xn(){}xn.prototype.getCoordinates=function(){},xn.prototype.size=function(){},xn.prototype.getCoordinate=function(t){},xn.prototype.isClosed=function(){},xn.prototype.setData=function(t){},xn.prototype.getData=function(){},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn};function bn(){}bn.prototype.addIntersection=function(t,e){},bn.prototype.interfaces_=function(){return[xn]},bn.prototype.getClass=function(){return bn};var Cn=function(){this._nodeList=new En(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Cn.prototype.getCoordinates=function(){return this._pts},Cn.prototype.size=function(){return this._pts.length},Cn.prototype.getCoordinate=function(t){return this._pts[t]},Cn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Cn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Cn.prototype.setData=function(t){this._data=t},Cn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:In.octant(t,e)},Cn.prototype.getData=function(){return this._data},Cn.prototype.addIntersection=function(){var t,e;2===arguments.length?(t=arguments[0],e=arguments[1],this.addIntersectionNode(t,e)):4===arguments.length&&(t=arguments[1],e=arguments[3],e=new S(arguments[0].getIntersection(e)),this.addIntersection(e,t))},Cn.prototype.toString=function(){return H.toLineString(new ge(this._pts))},Cn.prototype.getNodeList=function(){return this._nodeList},Cn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;return r<this._pts.length&&(e=this._pts[r],t.equals2D(e)&&(n=r)),this._nodeList.add(t,n)},Cn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},Cn.prototype.interfaces_=function(){return[bn]},Cn.prototype.getClass=function(){return Cn},Cn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Lt;return Cn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};function wn(){var t,e,n,r;this.p0=null,this.p1=null,0===arguments.length?(this.p0=new S,this.p1=new S):1===arguments.length?(r=arguments[0],this.p0=new S(r.p0),this.p1=new S(r.p1)):2===arguments.length?(this.p0=arguments[0],this.p1=arguments[1]):4===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],this.p0=new S(t,e),this.p1=new S(n,r))}N={serialVersionUID:{configurable:!0}};wn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},wn.prototype.orientationIndex=function(){if(arguments[0]instanceof wn){var t=arguments[0],e=pt.orientationIndex(this.p0,this.p1,t.p0),t=pt.orientationIndex(this.p0,this.p1,t.p1);return 0<=e&&0<=t||e<=0&&t<=0?Math.max(e,t):0}if(arguments[0]instanceof S){t=arguments[0];return pt.orientationIndex(this.p0,this.p1,t)}},wn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},wn.prototype.isVertical=function(){return this.p0.x===this.p1.x},wn.prototype.equals=function(t){if(!(t instanceof wn))return!1;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)},wn.prototype.intersection=function(t){var e=new ut;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},wn.prototype.project=function(){if(arguments[0]instanceof S){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new S(t);var e=this.projectionFactor(t),n=new S;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof wn){var r=arguments[0],t=this.projectionFactor(r.p0),e=this.projectionFactor(r.p1);if(1<=t&&1<=e)return null;if(t<=0&&e<=0)return null;n=this.project(r.p0);t<0&&(n=this.p0),1<t&&(n=this.p1);r=this.project(r.p1);return e<0&&(r=this.p0),1<e&&(r=this.p1),new wn(n,r)}},wn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},wn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},wn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},wn.prototype.distancePerpendicular=function(t){return pt.distancePointLinePerpendicular(t,this.p0,this.p1)},wn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},wn.prototype.midPoint=function(){return wn.midPoint(this.p0,this.p1)},wn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?m.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},wn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=m.MAX_VALUE,i=null,e=this.closestPoint(t.p0),r=e.distance(t.p0);n[0]=e,n[1]=t.p0;e=this.closestPoint(t.p1);(i=e.distance(t.p1))<r&&(r=i,n[0]=e,n[1]=t.p1);e=t.closestPoint(this.p0);(i=e.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=e);t=t.closestPoint(this.p1);return(i=t.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=t),n},wn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return 0<e&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},wn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},wn.prototype.getLength=function(){return this.p0.distance(this.p1)},wn.prototype.compareTo=function(t){var e=t,t=this.p0.compareTo(e.p0);return 0!==t?t:this.p1.compareTo(e.p1)},wn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},wn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},wn.prototype.lineIntersection=function(t){try{return Y.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof z))throw t}return null},wn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},wn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,t=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,t=e*o/s}return new S(n-t,r+a)},wn.prototype.setCoordinates=function(){var t,e;1===arguments.length?(e=arguments[0],this.setCoordinates(e.p0,e.p1)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y)},wn.prototype.segmentFraction=function(t){t=this.projectionFactor(t);return t<0?t=0:(1<t||m.isNaN(t))&&(t=1),t},wn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},wn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},wn.prototype.distance=function(){if(arguments[0]instanceof wn){var t=arguments[0];return pt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof S){t=arguments[0];return pt.distancePointLine(t,this.p0,this.p1)}},wn.prototype.pointAlong=function(t){var e=new S;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},wn.prototype.hashCode=function(){var t=m.doubleToLongBits(this.p0.x);t^=31*m.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),t=m.doubleToLongBits(this.p1.x);return t^=31*m.doubleToLongBits(this.p1.y),e^(Math.trunc(t)^Math.trunc(t>>32))},wn.prototype.interfaces_=function(){return[b,e]},wn.prototype.getClass=function(){return wn},wn.midPoint=function(t,e){return new S((t.x+e.x)/2,(t.y+e.y)/2)},N.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(wn,N);function Sn(){this.tempEnv1=new X,this.tempEnv2=new X,this._overlapSeg1=new wn,this._overlapSeg2=new wn}Sn.prototype.overlap=function(){var t,e,n;2===arguments.length||4===arguments.length&&(t=arguments[1],e=arguments[2],n=arguments[3],arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2))},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn};function Nn(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r}Nn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Nn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;o=Math.trunc((e+n)/2);e<o&&this.computeSelect(t,e,o,r),o<n&&this.computeSelect(t,o,n,r)},Nn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},Nn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Nn.prototype.setId=function(t){this._id=t},Nn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Nn.prototype.getEnvelope=function(){var t,e;return null===this._env&&(t=this._pts[this._start],e=this._pts[this._end],this._env=new X(t,e)),this._env},Nn.prototype.getEndIndex=function(){return this._end},Nn.prototype.getStartIndex=function(){return this._start},Nn.prototype.getContext=function(){return this._context},Nn.prototype.getId=function(){return this._id},Nn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;u=Math.trunc((t+e)/2),c=Math.trunc((r+i)/2);t<u&&(r<c&&this.computeOverlapsInternal(t,u,n,r,c,o),c<i&&this.computeOverlapsInternal(t,u,n,c,i,o)),u<e&&(r<c&&this.computeOverlapsInternal(u,e,n,r,c,o),c<i&&this.computeOverlapsInternal(u,e,n,c,i,o))},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn};function Tn(){}Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.getChainStartIndices=function(t){var e=0,n=new Lt;n.add(new F(e));do{var r=Tn.findChainEnd(t,e)}while(n.add(new F(r)),(e=r)<t.length-1);return Tn.toIntArray(n)},Tn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Je.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Je.quadrant(t[i-1],t[i])===r);)i++;return i-1},Tn.getChains=function(){if(1===arguments.length)return Tn.getChains(arguments[0],null);if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=new Lt,r=Tn.getChainStartIndices(t),i=0;i<r.length-1;i++){var o=new Nn(t,r[i],r[i+1],e);n.add(o)}return n}},Tn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};function Ln(){}Ln.prototype.computeNodes=function(t){},Ln.prototype.getNodedSubstrings=function(){},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln};function On(){var t;this._segInt=null,0===arguments.length||1===arguments.length&&(t=arguments[0],this.setSegmentIntersector(t))}On.prototype.setSegmentIntersector=function(t){this._segInt=t},On.prototype.interfaces_=function(){return[Ln]},On.prototype.getClass=function(){return On};function Mn(){var t,e,n,r;this._quadrantSegments=Mn.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=Mn.CAP_ROUND,this._joinStyle=Mn.JOIN_ROUND,this._mitreLimit=Mn.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=Mn.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length||(1===arguments.length?(e=arguments[0],this.setQuadrantSegments(e)):2===arguments.length?(n=arguments[0],r=arguments[1],this.setQuadrantSegments(n),this.setEndCapStyle(r)):4===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],this.setQuadrantSegments(t),this.setEndCapStyle(e),this.setJoinStyle(n),this.setMitreLimit(r)))}var Pn,An=function(e){function t(t){t?e.call(this,t):e.call(this),this._monoChains=new Lt,this._index=new yn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e);var n={SegmentOverlapAction:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return Cn.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(t){for(var e=Tn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},t.prototype.computeNodes=function(t){for(var e=(this._nodedSegStrings=t).iterator();e.hasNext();)this.add(e.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var t=new Rn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return Rn},Object.defineProperties(t,n),t}(On),Rn=((Pn=Sn)&&(Fn.__proto__=Pn),((Fn.prototype=Object.create(Pn&&Pn.prototype)).constructor=Fn).prototype.overlap=function(){if(4!==arguments.length)return Pn.prototype.overlap.apply(this,arguments);var t=arguments[1],e=arguments[2],n=arguments[3],r=arguments[0].getContext(),e=e.getContext();this._si.processIntersections(r,t,e,n)},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},Fn),N={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};function Fn(){Pn.call(this),this._si=null;var t=arguments[0];this._si=t}Mn.prototype.getEndCapStyle=function(){return this._endCapStyle},Mn.prototype.isSingleSided=function(){return this._isSingleSided},Mn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Mn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Mn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Mn.JOIN_ROUND&&(this._quadrantSegments=Mn.DEFAULT_QUADRANT_SEGMENTS)},Mn.prototype.getJoinStyle=function(){return this._joinStyle},Mn.prototype.setJoinStyle=function(t){this._joinStyle=t},Mn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Mn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Mn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Mn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Mn.prototype.getMitreLimit=function(){return this._mitreLimit},Mn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Mn.prototype.setSingleSided=function(t){this._isSingleSided=t},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Mn.bufferDistanceError=function(t){t=Math.PI/2/t;return 1-Math.cos(t/2)},N.CAP_ROUND.get=function(){return 1},N.CAP_FLAT.get=function(){return 2},N.CAP_SQUARE.get=function(){return 3},N.JOIN_ROUND.get=function(){return 1},N.JOIN_MITRE.get=function(){return 2},N.JOIN_BEVEL.get=function(){return 3},N.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},N.DEFAULT_MITRE_LIMIT.get=function(){return 5},N.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Mn,N);function Dn(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=pt.COUNTERCLOCKWISE,this._inputLine=t||null}N={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Dn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],e=this._inputLine[n];return!!this.isConcave(i,o,e)&&!!this.isShallow(i,o,e,r)&&this.isShallowSampled(i,o,t,n,r)},Dn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Dn.DELETE,r=i=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Dn.prototype.isShallowConcavity=function(t,e,n,r){return pt.computeOrientation(t,e,n)===this._angleOrientation&&pt.distancePointLine(e,t,n)<r},Dn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Dn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Dn.prototype.isConcave=function(t,e,n){return pt.computeOrientation(t,e,n)===this._angleOrientation},Dn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=pt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);for(var e;e=this.deleteShallowConcavities(),e;);return this.collapseLine()},Dn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Dn.DELETE;)e++;return e},Dn.prototype.isShallow=function(t,e,n,r){return pt.distancePointLine(e,t,n)<r},Dn.prototype.collapseLine=function(){for(var t=new Mt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Dn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn},Dn.simplify=function(t,e){return new Dn(t).simplify(e)},N.INIT.get=function(){return 0},N.DELETE.get=function(){return 1},N.KEEP.get=function(){return 1},N.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Dn,N);function jn(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Lt}N={COORDINATE_ARRAY_TYPE:{configurable:!0}};jn.prototype.getCoordinates=function(){return this._ptList.toArray(jn.COORDINATE_ARRAY_TYPE)},jn.prototype.setPrecisionModel=function(t){this._precisionModel=t},jn.prototype.addPt=function(t){t=new S(t);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)},jn.prototype.revere=function(){},jn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;0<=r;r--)this.addPt(t[r])},jn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},jn.prototype.toString=function(){return(new xe).createLineString(this.getCoordinates()).toString()},jn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new S(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},jn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},N.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(jn,N);function kn(){}N={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},kn.toDegrees=function(t){return 180*t/Math.PI},kn.normalize=function(t){for(;t>Math.PI;)t-=kn.PI_TIMES_2;for(;t<=-Math.PI;)t+=kn.PI_TIMES_2;return t},kn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],t=n.x-e.x,e=n.y-e.y;return Math.atan2(e,t)}},kn.isAcute=function(t,e,n){var r=t.x-e.x,t=t.y-e.y;return 0<r*(n.x-e.x)+t*(n.y-e.y)},kn.isObtuse=function(t,e,n){var r=t.x-e.x,t=t.y-e.y;return r*(n.x-e.x)+t*(n.y-e.y)<0},kn.interiorAngle=function(t,e,n){t=kn.angle(e,t),n=kn.angle(e,n);return Math.abs(n-t)},kn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=kn.PI_TIMES_2;kn.PI_TIMES_2<=t&&(t=0)}else{for(;kn.PI_TIMES_2<=t;)t-=kn.PI_TIMES_2;t<0&&(t=0)}return t},kn.angleBetween=function(t,e,n){t=kn.angle(e,t),n=kn.angle(e,n);return kn.diff(t,n)},kn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},kn.toRadians=function(t){return t*Math.PI/180},kn.getTurn=function(t,e){t=Math.sin(e-t);return 0<t?kn.COUNTERCLOCKWISE:t<0?kn.CLOCKWISE:kn.NONE},kn.angleBetweenOriented=function(t,e,n){t=kn.angle(e,t),t=kn.angle(e,n)-t;return t<=-Math.PI?t+kn.PI_TIMES_2:t>Math.PI?t-kn.PI_TIMES_2:t},N.PI_TIMES_2.get=function(){return 2*Math.PI},N.PI_OVER_2.get=function(){return Math.PI/2},N.PI_OVER_4.get=function(){return Math.PI/4},N.COUNTERCLOCKWISE.get=function(){return pt.COUNTERCLOCKWISE},N.CLOCKWISE.get=function(){return pt.CLOCKWISE},N.NONE.get=function(){return pt.COLLINEAR},Object.defineProperties(kn,N);function Gn(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new wn,this._seg1=new wn,this._offset0=new wn,this._offset1=new wn,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new ut,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),8<=e.getQuadrantSegments()&&e.getJoinStyle()===Mn.JOIN_ROUND&&(this._closingSegLengthFactor=Gn.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}N={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Gn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=pt.computeOrientation(this._s0,this._s1,this._s2),t=n===pt.CLOCKWISE&&this._side===Ne.LEFT||n===pt.COUNTERCLOCKWISE&&this._side===Ne.RIGHT;0===n?this.addCollinear(e):t?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Gn.prototype.addLineEndCap=function(t,e){var n=new wn(t,e),r=new wn;this.computeOffsetSegment(n,Ne.LEFT,this._distance,r);var i=new wn;this.computeOffsetSegment(n,Ne.RIGHT,this._distance,i);var n=e.x-t.x,t=e.y-t.y,o=Math.atan2(t,n);switch(this._bufParams.getEndCapStyle()){case Mn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,o+Math.PI/2,o-Math.PI/2,pt.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Mn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Mn.CAP_SQUARE:var s=new S;s.x=Math.abs(this._distance)*Math.cos(o),s.y=Math.abs(this._distance)*Math.sin(o);var a=new S(r.p1.x+s.x,r.p1.y+s.y),s=new S(i.p1.x+s.x,i.p1.y+s.y);this._segList.addPt(a),this._segList.addPt(s)}},Gn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Gn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Y.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof z))throw t;o=new S(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Gn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),s=n.x-t.x,o=n.y-t.y,s=Math.atan2(o,s);r===pt.CLOCKWISE?a<=s&&(a+=2*Math.PI):s<=a&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,s,r,i),this._segList.addPt(n)},Gn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Gn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Mn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Mn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Gn.prototype.createSquare=function(t){this._segList.addPt(new S(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new S(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Gn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Gn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Gn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Gn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Gn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=kn.angle(i,this._seg0.p0),s=kn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,o=kn.normalize(o+s),o=kn.normalize(o+Math.PI),r=r*n,n=n-r*Math.abs(Math.sin(s)),s=i.x+r*Math.cos(o),o=i.y+r*Math.sin(o),o=new S(s,o),i=new wn(i,o),o=i.pointAlongOffset(1,n),n=i.pointAlongOffset(1,-n);this._side===Ne.LEFT?(this._segList.addPt(o),this._segList.addPt(n)):(this._segList.addPt(n),this._segList.addPt(o))},Gn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ne.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,e=Math.sqrt(o*o+s*s),o=i*n*o/e,e=i*n*s/e;r.p0.x=t.p0.x-e,r.p0.y=t.p0.y+o,r.p1.x=t.p1.x-e,r.p1.y=t.p1.y+o},Gn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===pt.CLOCKWISE?-1:1,s=Math.abs(e-n),n=Math.trunc(s/this._filletAngleQuantum+.5);if(n<1)return null;for(var a=s/n,u=0,c=new S;u<s;){var l=e+o*u;c.x=t.x+i*Math.cos(l),c.y=t.y+i*Math.sin(l),this._segList.addPt(c),u+=a}},Gn.prototype.addInsideTurn=function(t,e){var n;this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection()?this._segList.addPt(this._li.getIntersection(0)):(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Gn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR?this._segList.addPt(this._offset0.p1):(this._segList.addPt(this._offset0.p1),0<this._closingSegLengthFactor?(n=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(n),n=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(n)):this._segList.addPt(this._s1),this._segList.addPt(this._offset1.p0)))},Gn.prototype.createCircle=function(t){var e=new S(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Gn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Gn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new jn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Gn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Gn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),2<=this._li.getIntersectionNum()&&(this._bufParams.getJoinStyle()===Mn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Mn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,pt.CLOCKWISE,this._distance))},Gn.prototype.closeRing=function(){this._segList.closeRing()},Gn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn},N.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},N.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},N.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},N.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Gn,N);function Un(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}Un.prototype.getOffsetCurve=function(t,e){if(0===(this._distance=e))return null;var n=e<0,e=Math.abs(e),e=this.getSegGen(e);t.length<=1?this.computePointCurve(t[0],e):this.computeOffsetCurve(t,n,e);e=e.getCoordinates();return n&&St.reverse(e),e},Un.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Dn.simplify(t,-r),e=i.length-1;n.initSideSegments(i[e],i[e-1],Ne.LEFT),n.addFirstSegment();for(var o=e-2;0<=o;o--)n.addNextSegment(i[o],!0)}else{n.addSegments(t,!1);var s=Dn.simplify(t,r),a=s.length-1;n.initSideSegments(s[0],s[1],Ne.LEFT),n.addFirstSegment();for(var u=2;u<=a;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()},Un.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ne.RIGHT&&(r=-r);var i=Dn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Un.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Dn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ne.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Dn.simplify(t,-n),n=s.length-1;e.initSideSegments(s[n],s[n-1],Ne.LEFT);for(var a=n-2;0<=a;a--)e.addNextSegment(s[a],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Un.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Mn.CAP_ROUND:e.createCircle(t);break;case Mn.CAP_SQUARE:e.createSquare(t)}},Un.prototype.getLineCurve=function(t,e){if((this._distance=e)<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),n=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],n):this._bufParams.isSingleSided()?(e=e<0,this.computeSingleSidedBufferCurve(t,e,n)):this.computeLineBufferCurve(t,n),n.getCoordinates()},Un.prototype.getBufferParameters=function(){return this._bufParams},Un.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Un.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Un.copyCoordinates(t);n=this.getSegGen(n);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},Un.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Dn.simplify(t,-r),e=i.length-1;n.initSideSegments(i[e],i[e-1],Ne.LEFT),n.addFirstSegment();for(var o=e-2;0<=o;o--)n.addNextSegment(i[o],!0)}else{var s=Dn.simplify(t,r),a=s.length-1;n.initSideSegments(s[0],s[1],Ne.LEFT),n.addFirstSegment();for(var u=2;u<=a;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()},Un.prototype.getSegGen=function(t){return new Gn(this._precisionModel,this._bufParams,t)},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un},Un.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new S(t[n]);return e};function Vn(){this._subgraphs=null,this._seg=new wn,this._cga=new pt;var t=arguments[0];this._subgraphs=t}N={DepthSegment:{configurable:!0}};Vn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Lt,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(P(arguments[2],Ct)&&arguments[0]instanceof S&&arguments[1]instanceof Ze)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),c=0;c<u.length-1;c++){var l;this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||pt.computeOrientation(this._seg.p0,this._seg.p1,o)===pt.RIGHT||(l=s.getDepth(Ne.LEFT),this._seg.p0.equals(u[c])||(l=s.getDepth(Ne.RIGHT)),l=new Bn(this._seg,l),a.add(l))}else if(P(arguments[2],Ct)&&arguments[0]instanceof S&&P(arguments[1],Ct))for(var p=arguments[0],h=arguments[2],f=arguments[1].iterator();f.hasNext();){var d=f.next();d.isForward()&&this.findStabbedSegments(p,d,h)}},Vn.prototype.getDepth=function(t){t=this.findStabbedSegments(t);return 0===t.size()?0:cn.min(t)._leftDepth},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn},N.DepthSegment.get=function(){return Bn},Object.defineProperties(Vn,N);var Bn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new wn(t),this._leftDepth=e};Bn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;t=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==t||0!=(t=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?t:this._upwardSeg.compareTo(e._upwardSeg)},Bn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Bn.prototype.toString=function(){return this._upwardSeg.toString()},Bn.prototype.interfaces_=function(){return[b]},Bn.prototype.getClass=function(){return Bn};function zn(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null}zn.prototype.area=function(){return zn.area(this.p0,this.p1,this.p2)},zn.prototype.signedArea=function(){return zn.signedArea(this.p0,this.p1,this.p2)},zn.prototype.interpolateZ=function(t){if(null===t)throw new E("Supplied point is null.");return zn.interpolateZ(t,this.p0,this.p1,this.p2)},zn.prototype.longestSideLength=function(){return zn.longestSideLength(this.p0,this.p1,this.p2)},zn.prototype.isAcute=function(){return zn.isAcute(this.p0,this.p1,this.p2)},zn.prototype.circumcentre=function(){return zn.circumcentre(this.p0,this.p1,this.p2)},zn.prototype.area3D=function(){return zn.area3D(this.p0,this.p1,this.p2)},zn.prototype.centroid=function(){return zn.centroid(this.p0,this.p1,this.p2)},zn.prototype.inCentre=function(){return zn.inCentre(this.p0,this.p1,this.p2)},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn},zn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},zn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},zn.det=function(t,e,n,r){return t*r-e*n},zn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,c=r.y-o,l=s*c-a*u,i=t.x-i,o=t.y-o,a=(c*i-a*o)/l,l=(-u*i+s*o)/l;return e.z+a*(n.z-e.z)+l*(r.z-e.z)},zn.longestSideLength=function(t,e,n){var r=t.distance(e),e=e.distance(n),t=n.distance(t),r=r;return r<e&&(r=e),r<t&&(r=t),r},zn.isAcute=function(t,e,n){return!!kn.isAcute(t,e,n)&&!!kn.isAcute(e,n,t)&&!!kn.isAcute(n,t,e)},zn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,n=e.y-i,t=2*zn.det(o,s,a,n),e=zn.det(s,o*o+s*s,n,a*a+n*n),n=zn.det(o,o*o+s*s,a,a*a+n*n);return new S(r-e/t,i+n/t)},zn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,e=new Y(t.x+n/2,t.y+r/2,1),r=new Y(t.x-r+n/2,t.y+n+r/2,1);return new Y(e,r)},zn.angleBisector=function(t,e,n){var r=e.distance(t),r=r/(r+e.distance(n)),e=n.x-t.x,n=n.y-t.y;return new S(t.x+r*e,t.y+r*n)},zn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,e=n.y-t.y,n=n.z-t.z,t=i*n-o*e,n=o*s-r*n,s=r*e-i*s,s=t*t+n*n+s*s;return Math.sqrt(s)/2},zn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,n=(t.y+e.y+n.y)/3;return new S(r,n)},zn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,s=(r*t.y+i*e.y+o*n.y)/s;return new S(a,s)};function qn(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Lt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n}qn.prototype.addPoint=function(t){if(this._distance<=0)return null;t=t.getCoordinates(),t=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(t,O.EXTERIOR,O.INTERIOR)},qn.prototype.addPolygon=function(t){var e=this._distance,n=Ne.LEFT;this._distance<0&&(e=-this._distance,n=Ne.RIGHT);var r=t.getExteriorRing(),i=St.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,O.EXTERIOR,O.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=St.removeRepeatedPoints(s.getCoordinates());0<this._distance&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Ne.opposite(n),O.INTERIOR,O.EXTERIOR)}},qn.prototype.isTriangleErodedCompletely=function(t,e){var n=new zn(t[0],t[1],t[2]),t=n.inCentre();return pt.distancePointLine(t,n.p0,n.p1)<Math.abs(e)},qn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;t=St.removeRepeatedPoints(t.getCoordinates()),t=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(t,O.EXTERIOR,O.INTERIOR)},qn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;n=new Cn(t,new Fe(0,O.BOUNDARY,e,n));this._curveList.add(n)},qn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},qn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<le.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=le.MINIMUM_VALID_SIZE&&pt.isCCW(t)&&(o=i,s=r,n=Ne.opposite(n));e=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(e,o,s)},qn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof ue?this.addPolygon(t):t instanceof ie?this.addLineString(t):t instanceof se?this.addPoint(t):(t instanceof ce||t instanceof Zt||t instanceof pe||t instanceof $t)&&this.addCollection(t)},qn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);t=t.getEnvelopeInternal(),t=Math.min(t.getHeight(),t.getWidth());return e<0&&2*Math.abs(e)>t},qn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};function Yn(){}Yn.prototype.locate=function(t){},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};function Xn(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}Xn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Xn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof $t?(this._subcollectionIterator=new Xn(t),this._subcollectionIterator.next()):t},Xn.prototype.remove=function(){throw new Error(this.getClass().getName())},Xn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Xn.prototype.interfaces_=function(){return[xt]},Xn.prototype.getClass=function(){return Xn},Xn.isAtomic=function(t){return!(t instanceof $t)};function Wn(){this._geom=null;var t=arguments[0];this._geom=t}Wn.prototype.locate=function(t){return Wn.locate(t,this._geom)},Wn.prototype.interfaces_=function(){return[Yn]},Wn.prototype.getClass=function(){return Wn},Wn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&pt.isPointInRing(t,e.getCoordinates())},Wn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Wn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Wn.isPointInRing(t,i))return!1}return!0},Wn.containsPoint=function(t,e){if(e instanceof ue)return Wn.containsPointInPolygon(t,e);if(e instanceof $t)for(var n=new Xn(e);n.hasNext();){var r=n.next();if(r!==e&&Wn.containsPoint(t,r))return!0}return!1},Wn.locate=function(t,e){return!e.isEmpty()&&Wn.containsPoint(t,e)?O.INTERIOR:O.EXTERIOR};function Jn(){this._edgeMap=new p,this._edgeList=null,this._ptInAreaLocation=[O.NONE,O.NONE]}Jn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),t=e-1;return 0===e&&(t=this._edgeList.size()-1),this._edgeList.get(t)},Jn.prototype.propagateSideLabels=function(t){for(var e=O.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ne.LEFT)!==O.NONE&&(e=r.getLocation(t,Ne.LEFT))}if(e===O.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Ne.ON)===O.NONE&&a.setLocation(t,Ne.ON,i),a.isArea(t)){var u=a.getLocation(t,Ne.LEFT),c=a.getLocation(t,Ne.RIGHT);if(c!==O.NONE){if(c!==i)throw new Me("side location conflict",s.getCoordinate());u===O.NONE&&Z.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else Z.isTrue(a.getLocation(t,Ne.LEFT)===O.NONE,"found single null side"),a.setLocation(t,Ne.RIGHT,i),a.setLocation(t,Ne.LEFT,i)}}},Jn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Jn.prototype.print=function(t){V.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Jn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Jn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,n=e.get(n).getLabel().getLocation(t,Ne.LEFT);Z.isTrue(n!==O.NONE,"Found unlabelled area edge");for(var r=n,i=this.iterator();i.hasNext();){var o=i.next().getLabel();Z.isTrue(o.isArea(t),"Found non-area edge");var s=o.getLocation(t,Ne.LEFT),o=o.getLocation(t,Ne.RIGHT);if(s===o)return!1;if(o!==r)return!1;r=s}return!0},Jn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Jn.prototype.iterator=function(){return this.getEdges().iterator()},Jn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Lt(this._edgeMap.values())),this._edgeList},Jn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===O.NONE&&(this._ptInAreaLocation[t]=Wn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Jn.prototype.toString=function(){var t=new R;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Jn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Jn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===O.BOUNDARY&&(e[i]=!0);for(var o,s,a=this.iterator();a.hasNext();)for(var u=a.next(),c=u.getLabel(),l=0;l<2;l++)c.isAnyNull(l)&&(s=O.NONE,s=e[l]?O.EXTERIOR:(o=u.getCoordinate(),this.getLocation(l,o,t)),c.setAllLocationsIfNull(l,s))},Jn.prototype.getDegree=function(){return this._edgeMap.size()},Jn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};function Hn(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=Hn.orientation(t)}var Kn,$n,Zn=(($n=Jn)&&(er.__proto__=$n),((er.prototype=Object.create($n&&$n.prototype)).constructor=er).prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Me("no outgoing dirEdge found",this.getCoordinate());Z.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},er.prototype.insert=function(t){this.insertEdgeEnd(t,t)},er.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),t=n.getQuadrant(),e=r.getQuadrant();return Je.isNorthern(t)&&Je.isNorthern(e)?n:Je.isNorthern(t)||Je.isNorthern(e)?0!==n.getDy()?n:0!==r.getDy()?r:(Z.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},er.prototype.print=function(t){V.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},er.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Lt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},er.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},er.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;0<=n;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},er.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ne.LEFT),r=t.getDepth(Ne.RIGHT),n=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,n)!==r)throw new Me("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var i=arguments[1],o=arguments[2],s=arguments[0];s<i;s++){var a=this._edgeList.get(s);a.setEdgeDepths(Ne.RIGHT,o),o=a.getDepth(Ne.LEFT)}return o}},er.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},er.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;0<=i;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(Z.isTrue(null!==e,"found null for first outgoing dirEdge"),Z.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},er.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},er.prototype.getLabel=function(){return this._label},er.prototype.findCoveredLineEdges=function(){for(var t=O.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=O.INTERIOR;break}if(r.isInResult()){t=O.EXTERIOR;break}}}if(t===O.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===O.INTERIOR):(s.isInResult()&&(i=O.EXTERIOR),a.isInResult()&&(i=O.INTERIOR))}},er.prototype.computeLabelling=function(t){$n.prototype.computeLabelling.call(this,t),this._label=new Fe(O.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),r=0;r<2;r++){var i=n.getLocation(r);i!==O.INTERIOR&&i!==O.BOUNDARY||this._label.setLocation(r,O.INTERIOR)}},er.prototype.interfaces_=function(){return[]},er.prototype.getClass=function(){return er},er),Qn=((Kn=Ke)&&(tr.__proto__=Kn),((tr.prototype=Object.create(Kn&&Kn.prototype)).constructor=tr).prototype.createNode=function(t){return new Xe(t,new Zn)},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr);function tr(){Kn.apply(this,arguments)}function er(){$n.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}Hn.prototype.compareTo=function(t){return Hn.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},Hn.prototype.interfaces_=function(){return[b]},Hn.prototype.getClass=function(){return Hn},Hn.orientation=function(t){return 1===St.increasingDirection(t)},Hn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var p=(u+=i)===s,l=(c+=o)===a;if(p&&!l)return-1;if(!p&&l)return 1;if(p&&l)return 0}};function nr(){this._edges=new Lt,this._ocaMap=new p}nr.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);0<e&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)0<i&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},nr.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},nr.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},nr.prototype.iterator=function(){return this._edges.iterator()},nr.prototype.getEdges=function(){return this._edges},nr.prototype.get=function(t){return this._edges.get(t)},nr.prototype.findEqualEdge=function(t){t=new Hn(t.getCoordinates());return this._ocaMap.get(t)},nr.prototype.add=function(t){this._edges.add(t);var e=new Hn(t.getCoordinates());this._ocaMap.put(e,t)},nr.prototype.interfaces_=function(){return[]},nr.prototype.getClass=function(){return nr};function rr(){}rr.prototype.processIntersections=function(t,e,n,r){},rr.prototype.isDone=function(){},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr};function ir(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0;var t=arguments[this.numTests=0];this._li=t}ir.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ir.isAdjacentSegments(e,r))return!0;if(t.isClosed()){t=t.size()-1;if(0===e&&r===t||0===r&&e===t)return!0}}return!1},ir.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ir.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ir.prototype.getLineIntersector=function(){return this._li},ir.prototype.hasProperIntersection=function(){return this._hasProper},ir.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},ir.prototype.hasIntersection=function(){return this._hasIntersection},ir.prototype.isDone=function(){return!1},ir.prototype.hasInteriorIntersection=function(){return this._hasInterior},ir.prototype.interfaces_=function(){return[rr]},ir.prototype.getClass=function(){return ir},ir.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};function or(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new S(t),this.segmentIndex=e,this.dist=n}or.prototype.getSegmentIndex=function(){return this.segmentIndex},or.prototype.getCoordinate=function(){return this.coord},or.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},or.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},or.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},or.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},or.prototype.getDistance=function(){return this.dist},or.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},or.prototype.interfaces_=function(){return[b]},or.prototype.getClass=function(){return or};var sr=function(){this._nodeMap=new p,this.edge=null;var t=arguments[0];this.edge=t};sr.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},sr.prototype.iterator=function(){return this._nodeMap.values().iterator()},sr.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},sr.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},sr.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],r=0<e.dist||!e.coord.equals2D(r);r||n--;var i=new Array(n).fill(null),o=0;i[o++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)i[o++]=this.edge.pts[s];return r&&(i[o]=e.coord),new hr(i,new Fe(this.edge._label))},sr.prototype.add=function(t,e,n){e=new or(t,e,n),n=this._nodeMap.get(e);return null!==n?n:(this._nodeMap.put(e,e),e)},sr.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr};function ar(){}ar.prototype.getChainStartIndices=function(t){var e=0,n=new Lt;n.add(new F(e));do{var r=this.findChainEnd(t,e)}while(n.add(new F(r)),(e=r)<t.length-1);return ar.toIntArray(n)},ar.prototype.findChainEnd=function(t,e){for(var n=Je.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Je.quadrant(t[r-1],t[r])===n;)r++;return r-1},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar},ar.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};function ur(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new X,this.env2=new X;var t=arguments[0];this.e=t,this.pts=t.getCoordinates(),t=new ar,this.startIndex=t.getChainStartIndices(this.pts)}ur.prototype.getCoordinates=function(){return this.pts},ur.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,t=this.pts[this.startIndex[t+1]].x;return t<e?e:t},ur.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,t=this.pts[this.startIndex[t+1]].x;return e<t?e:t},ur.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],c=arguments[5],t=this.pts[i],e=this.pts[o],n=s.pts[a],r=s.pts[u];if(o-i==1&&u-a==1)return c.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(t,e),this.env2.init(n,r),!this.env1.intersects(this.env2))return null;n=Math.trunc((i+o)/2),r=Math.trunc((a+u)/2);i<n&&(a<r&&this.computeIntersectsForChain(i,n,s,a,r,c),r<u&&this.computeIntersectsForChain(i,n,s,r,u,c)),n<o&&(a<r&&this.computeIntersectsForChain(n,o,s,a,r,c),r<u&&this.computeIntersectsForChain(n,o,s,r,u,c))}},ur.prototype.getStartIndexes=function(){return this.startIndex},ur.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur};var cr=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},N={NULL_VALUE:{configurable:!0}};cr.prototype.getDepth=function(t,e){return this._depth[t][e]},cr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},cr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==cr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===cr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],n=arguments[1];return this._depth[r][n]===cr.NULL_VALUE}},cr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},cr.prototype.getDelta=function(t){return this._depth[t][Ne.RIGHT]-this._depth[t][Ne.LEFT]},cr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?O.EXTERIOR:O.INTERIOR},cr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},cr.prototype.add=function(){var t,e;if(1===arguments.length)for(var n=arguments[0],r=0;r<2;r++)for(var i=1;i<3;i++){var o=n.getLocation(r,i);o!==O.EXTERIOR&&o!==O.INTERIOR||(this.isNull(r,i)?this._depth[r][i]=cr.depthAtLocation(o):this._depth[r][i]+=cr.depthAtLocation(o))}else 3===arguments.length&&(t=arguments[0],e=arguments[1],arguments[2]===O.INTERIOR&&this._depth[t][e]++)},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},cr.depthAtLocation=function(t){return t===O.EXTERIOR?0:t===O.INTERIOR?1:cr.NULL_VALUE},N.NULL_VALUE.get=function(){return-1},Object.defineProperties(cr,N);function lr(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new nr,this._bufParams=t||null}var pr,hr=((pr=je)&&(fr.__proto__=pr),fr.prototype=Object.create(pr&&pr.prototype),(fr.prototype.constructor=fr).prototype.getDepth=function(){return this._depth},fr.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new fr(t,Fe.toLineLabel(this._label))},fr.prototype.isIsolated=function(){return this._isIsolated},fr.prototype.getCoordinates=function(){return this.pts},fr.prototype.setIsolated=function(t){this._isIsolated=t},fr.prototype.setName=function(t){this._name=t},fr.prototype.equals=function(t){if(!(t instanceof fr))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--i])||(r=!1),!n&&!r)return!1;return!0},fr.prototype.getCoordinate=function(){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},fr.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},fr.prototype.computeIM=function(t){fr.updateIM(this._label,t)},fr.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},fr.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},fr.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},fr.prototype.getDepthDelta=function(){return this._depthDelta},fr.prototype.getNumPoints=function(){return this.pts.length},fr.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;0<=e;e--)t.print(this.pts[e]+" ");t.println("")},fr.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new ur(this)),this._mce},fr.prototype.getEnvelope=function(){if(null===this._env){this._env=new X;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},fr.prototype.addIntersection=function(t,e,n,r){var i=new S(t.getIntersection(r)),e=e,t=t.getEdgeDistance(n,r),n=e+1;n<this.pts.length&&(r=this.pts[n],i.equals2D(r)&&(e=n,t=0)),this.eiList.add(i,e,t)},fr.prototype.toString=function(){var t=new R;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},fr.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},fr.prototype.setDepthDelta=function(t){this._depthDelta=t},fr.prototype.getEdgeIntersectionList=function(){return this.eiList},fr.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},fr.prototype.interfaces_=function(){return[]},fr.prototype.getClass=function(){return fr},fr.updateIM=function(){if(2!==arguments.length)return pr.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,Ne.ON),t.getLocation(1,Ne.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,Ne.LEFT),t.getLocation(1,Ne.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,Ne.RIGHT),t.getLocation(1,Ne.RIGHT),2))},fr);function fr(){var t,e;pr.call(this),this.pts=null,this._env=null,this.eiList=new sr(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new cr,this._depthDelta=0,1===arguments.length?(e=arguments[0],fr.call(this,e,null)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.pts=t,this._label=e)}lr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},lr.prototype.insertUniqueEdge=function(t){var e,n,r=this._edgeList.findEqualEdge(t);null!==r?(e=r.getLabel(),n=t.getLabel(),r.isPointwiseEqual(t)||(n=new Fe(t.getLabel())).flip(),e.merge(n),n=lr.depthDelta(n),n=r.getDepthDelta()+n,r.setDepthDelta(n)):(this._edgeList.add(t),t.setDepthDelta(lr.depthDelta(t.getLabel())))},lr.prototype.buildSubgraphs=function(t,e){for(var n=new Lt,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),o=new Vn(n).getDepth(o);i.computeDepth(o),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},lr.prototype.createSubgraphs=function(t){for(var e=new Lt,n=t.getNodes().iterator();n.hasNext();){var r,i=n.next();i.isVisited()||((r=new Ae).create(i),e.add(r))}return cn.sort(e,cn.reverseOrder()),e},lr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},lr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new An,n=new ut;return n.setPrecisionModel(t),e.setSegmentIntersector(new ir(n)),e},lr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Un(n,this._bufParams),r=new qn(t,e,r).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new tn(new Qn),this._graph.addEdges(this._edgeList.getEdges());r=this.createSubgraphs(this._graph),n=new en(this._geomFact);this.buildSubgraphs(r,n);n=n.getPolygons();return n.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(n)},lr.prototype.computeNodedEdges=function(t,e){e=this.getNoder(e);e.computeNodes(t);for(var n=e.getNodedSubstrings().iterator();n.hasNext();){var r=n.next(),i=r.getCoordinates();2===i.length&&i[0].equals2D(i[1])||(i=r.getData(),i=new hr(r.getCoordinates(),new Fe(i)),this.insertUniqueEdge(i))}},lr.prototype.setNoder=function(t){this._workingNoder=t},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr},lr.depthDelta=function(t){var e=t.getLocation(0,Ne.LEFT),t=t.getLocation(0,Ne.RIGHT);return e===O.INTERIOR&&t===O.EXTERIOR?1:e===O.EXTERIOR&&t===O.INTERIOR?-1:0},lr.convertSegStrings=function(t){for(var e=new xe,n=new Lt;t.hasNext();){var r=t.next(),r=e.createLineString(r.getCoordinates());n.add(r)}return e.buildGeometry(n)};function dr(){var t,e,n,r;this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length?(n=arguments[0],r=arguments[1],this._noder=n,this._scaleFactor=r,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()):4===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],this._noder=t,this._scaleFactor=e,this._offsetX=n,this._offsetY=r,this._isScaled=!this.isIntegerPrecision())}dr.prototype.rescale=function(){if(P(arguments[0],It))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&V.out.println(n)}},dr.prototype.scale=function(){if(P(arguments[0],It)){for(var t=arguments[0],e=new Lt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Cn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new S(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return St.removeRepeatedPoints(o)}},dr.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},dr.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},dr.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},dr.prototype.interfaces_=function(){return[Ln]},dr.prototype.getClass=function(){return dr};function gr(){this._li=new ut,this._segStrings=null;var t=arguments[0];this._segStrings=t}N={fact:{configurable:!0}};gr.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new et("found endpt/interior pt intersection at index "+o+" :pt "+n)},gr.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var c=0;c<a.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],p=arguments[1],h=arguments[2],f=arguments[3];if(l===h&&p===f)return null;var d=l.getCoordinates()[p],l=l.getCoordinates()[p+1],p=h.getCoordinates()[f],f=h.getCoordinates()[f+1];if(this._li.computeIntersection(d,l,p,f),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,l)||this.hasInteriorIntersection(this._li,p,f)))throw new et("found non-noded intersection at "+d+"-"+l+" and "+p+"-"+f)}},gr.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},gr.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},gr.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},gr.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new et("found non-noded collapse at "+gr.fact.createLineString([t,e,n]))},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},N.fact.get=function(){return new xe},Object.defineProperties(gr,N);function yr(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new E("Scale factor must be non-zero");1!==e&&(this._pt=new S(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)}N={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};yr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),o=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(o)return!1;e=this.intersectsToleranceSquare(t,e);return Z.isTrue(!(o&&e),"Found bad envelope test"),e},yr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},yr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},yr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},yr.prototype.getCoordinate=function(){return this._originalPt},yr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},yr.prototype.getSafeEnvelope=function(){var t;return null===this._safeEnv&&(t=yr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor,this._safeEnv=new X(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)),this._safeEnv},yr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},yr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},yr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr},N.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(yr,N);function _r(){this.tempEnv1=new X,this.selectedSegment=new wn}_r.prototype.select=function(){var t;1===arguments.length||2===arguments.length&&(t=arguments[1],arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment))},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r};function mr(){this._index=null;var t=arguments[0];this._index=t}N={HotPixelSnapAction:{configurable:!0}};mr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],t=arguments[2],r=e.getSafeEnvelope(),i=new Ir(e,n,t);return this._index.query(r,{interfaces_:function(){return[sn]},visitItem:function(t){t.select(r,i)}}),i.isNodeAdded()}},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},N.HotPixelSnapAction.get=function(){return Ir},Object.defineProperties(mr,N);function vr(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Lt}var Er,Ir=((Er=_r)&&(xr.__proto__=Er),((xr.prototype=Object.create(Er&&Er.prototype)).constructor=xr).prototype.isNodeAdded=function(){return this._isNodeAdded},xr.prototype.select=function(){if(2!==arguments.length)return Er.prototype.select.apply(this,arguments);var t=arguments[1],e=arguments[0].getContext();if(null!==this._parentEdge&&e===this._parentEdge&&t===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(e,t)},xr.prototype.interfaces_=function(){return[]},xr.prototype.getClass=function(){return xr},xr);function xr(){Er.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}vr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},vr.prototype.isDone=function(){return!1},vr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},vr.prototype.interfaces_=function(){return[rr]},vr.prototype.getClass=function(){return vr};function br(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new ut,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}br.prototype.checkCorrectness=function(t){var e=Cn.getNodedSubstrings(t),n=new gr(e);try{n.checkValid()}catch(t){if(!(t instanceof U))throw t;t.printStackTrace()}},br.prototype.getNodedSubstrings=function(){return Cn.getNodedSubstrings(this._nodedSegStrings)},br.prototype.snapRound=function(t,e){e=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(e),this.computeVertexSnaps(t)},br.prototype.findInteriorIntersections=function(t,e){e=new vr(e);return this._noder.setSegmentIntersector(e),this._noder.computeNodes(t),e.getInteriorIntersections()},br.prototype.computeVertexSnaps=function(){if(P(arguments[0],It))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Cn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new yr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},br.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new An,this._pointSnapper=new mr(this._noder.getIndex()),this.snapRound(t,this._li)},br.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),n=new yr(n,this._scaleFactor,this._li);this._pointSnapper.snap(n)}},br.prototype.interfaces_=function(){return[Ln]},br.prototype.getClass=function(){return br};function Cr(){var t,e;this._argGeom=null,this._distance=null,this._bufParams=new Mn,this._resultGeometry=null,this._saveException=null,1===arguments.length?(e=arguments[0],this._argGeom=e):2===arguments.length&&(t=arguments[0],e=arguments[1],this._argGeom=t,this._bufParams=e)}N={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Cr.prototype.bufferFixedPrecision=function(t){var e=new dr(new br(new _e(1)),t.getScale()),n=new lr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Cr.prototype.bufferReducedPrecision=function(){var t;if(0===arguments.length){for(var e=Cr.MAX_PRECISION_DIGITS;0<=e;e--){try{this.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Me))throw e;this._saveException=e}if(null!==this._resultGeometry)return null}throw this._saveException}1===arguments.length&&(t=arguments[0],t=Cr.precisionScaleFactor(this._argGeom,this._distance,t),t=new _e(t),this.bufferFixedPrecision(t))},Cr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===_e.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Cr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Cr.prototype.bufferOriginalPrecision=function(){try{var t=new lr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof et))throw t;this._saveException=t}},Cr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Cr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Cr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new Cr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ft&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new Cr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Mn&&arguments[0]instanceof ft&&"number"==typeof arguments[1]){var i=arguments[1];return new Cr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){n=arguments[1],r=arguments[2],e=arguments[3],i=new Cr(arguments[0]);return i.setQuadrantSegments(r),i.setEndCapStyle(e),i.getResultGeometry(n)}},Cr.precisionScaleFactor=function(t,e,n){t=t.getEnvelopeInternal(),e=A.max(Math.abs(t.getMaxX()),Math.abs(t.getMaxY()),Math.abs(t.getMinX()),Math.abs(t.getMinY()))+2*(0<e?e:0),e=n-Math.trunc(Math.log(e)/Math.log(10)+1);return Math.pow(10,e)},N.CAP_ROUND.get=function(){return Mn.CAP_ROUND},N.CAP_BUTT.get=function(){return Mn.CAP_FLAT},N.CAP_FLAT.get=function(){return Mn.CAP_FLAT},N.CAP_SQUARE.get=function(){return Mn.CAP_SQUARE},N.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Cr,N);function wr(){this._pt=[new S,new S],this._distance=m.NaN,this._isNull=!0}wr.prototype.getCoordinates=function(){return this._pt},wr.prototype.getCoordinate=function(t){return this._pt[t]},wr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;t=e.distance(n);t<this._distance&&this.initialize(e,n,t)}},wr.prototype.initialize=function(){var t,e,n;0===arguments.length?this._isNull=!0:2===arguments.length?(e=arguments[0],n=arguments[1],this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(n),this._distance=e.distance(n),this._isNull=!1):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=n,this._isNull=!1)},wr.prototype.getDistance=function(){return this._distance},wr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;t=e.distance(n);t>this._distance&&this.initialize(e,n,t)}},wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr};function Sr(){}Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr},Sr.computeDistance=function(){if(arguments[2]instanceof wr&&arguments[0]instanceof ie&&arguments[1]instanceof S)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new wn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof wr&&arguments[0]instanceof ue&&arguments[1]instanceof S){var s=arguments[0],a=arguments[1],u=arguments[2];Sr.computeDistance(s.getExteriorRing(),a,u);for(var c=0;c<s.getNumInteriorRing();c++)Sr.computeDistance(s.getInteriorRingN(c),a,u)}else if(arguments[2]instanceof wr&&arguments[0]instanceof ft&&arguments[1]instanceof S){var l=arguments[0],p=arguments[1],h=arguments[2];if(l instanceof ie)Sr.computeDistance(l,p,h);else if(l instanceof ue)Sr.computeDistance(l,p,h);else if(l instanceof $t)for(var f=l,d=0;d<f.getNumGeometries();d++){var g=f.getGeometryN(d);Sr.computeDistance(g,p,h)}else h.setMinimum(l.getCoordinate(),p)}else{var y,_;arguments[2]instanceof wr&&arguments[0]instanceof wn&&arguments[1]instanceof S&&(y=arguments[1],_=arguments[2],l=arguments[0].closestPoint(y),_.setMinimum(l,y))}};function Nr(t){this._maxPtDist=new wr,this._inputGeom=t||null}N={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Nr.prototype.computeMaxMidpointDistance=function(t){var e=new Lr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Nr.prototype.computeMaxVertexDistance=function(t){var e=new Tr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Nr.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Nr.prototype.getDistancePoints=function(){return this._maxPtDist},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},N.MaxPointDistanceFilter.get=function(){return Tr},N.MaxMidpointDistanceFilter.get=function(){return Lr},Object.defineProperties(Nr,N);var Tr=function(t){this._maxPtDist=new wr,this._minPtDist=new wr,this._geom=t||null};Tr.prototype.filter=function(t){this._minPtDist.initialize(),Sr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Tr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Tr.prototype.interfaces_=function(){return[gt]},Tr.prototype.getClass=function(){return Tr};var Lr=function(t){this._maxPtDist=new wr,this._minPtDist=new wr,this._geom=t||null};Lr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),e=t.getCoordinate(e),e=new S((n.x+e.x)/2,(n.y+e.y)/2);this._minPtDist.initialize(),Sr.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Lr.prototype.isDone=function(){return!1},Lr.prototype.isGeometryChanged=function(){return!1},Lr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Lr.prototype.interfaces_=function(){return[Kt]},Lr.prototype.getClass=function(){return Lr};function Or(t){this._comps=t||null}Or.prototype.filter=function(t){t instanceof ue&&this._comps.add(t)},Or.prototype.interfaces_=function(){return[Ht]},Or.prototype.getClass=function(){return Or},Or.getPolygons=function(){if(1===arguments.length)return Or.getPolygons(arguments[0],new Lt);if(2===arguments.length){var t=arguments[0],e=arguments[1];return t instanceof ue?e.add(t):t instanceof $t&&t.apply(new Or(e)),e}};function Mr(){var t,e;this._lines=null,this._isForcedToLineString=!1,1===arguments.length?(e=arguments[0],this._lines=e):2===arguments.length&&(t=arguments[0],e=arguments[1],this._lines=t,this._isForcedToLineString=e)}Mr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof le){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof ie&&this._lines.add(t)},Mr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Mr.prototype.interfaces_=function(){return[ht]},Mr.prototype.getClass=function(){return Mr},Mr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Mr.getLines(t))}if(2===arguments.length){var e=arguments[0],t=arguments[1];return e.getFactory().buildGeometry(Mr.getLines(e,t))}},Mr.getLines=function(){if(1===arguments.length)return Mr.getLines(arguments[0],!1);if(2===arguments.length){if(P(arguments[0],It)&&P(arguments[1],It)){for(var t=arguments[1],e=arguments[0].iterator();e.hasNext();){var n=e.next();Mr.getLines(n,t)}return t}if(arguments[0]instanceof ft&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1],o=new Lt;return r.apply(new Mr(o,i)),o}if(arguments[0]instanceof ft&&P(arguments[1],It)){var s=arguments[0],a=arguments[1];return s instanceof ie?a.add(s):s.apply(new Mr(a)),a}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&P(arguments[0],It)&&P(arguments[1],It)){for(var u=arguments[1],c=arguments[2],l=arguments[0].iterator();l.hasNext();){var p=l.next();Mr.getLines(p,u,c)}return u}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ft&&P(arguments[1],It)){s=arguments[1],a=arguments[2];return arguments[0].apply(new Mr(s,a)),s}}};function Pr(){if(this._boundaryRule=yt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];if(null===t)throw new E("Rule must be non-null");this._boundaryRule=t}}Pr.prototype.locateInternal=function(){if(arguments[0]instanceof S&&arguments[1]instanceof ue){var t=arguments[0],e=arguments[1];if(e.isEmpty())return O.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===O.EXTERIOR)return O.EXTERIOR;if(r===O.BOUNDARY)return O.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),o=this.locateInPolygonRing(t,o);if(o===O.INTERIOR)return O.EXTERIOR;if(o===O.BOUNDARY)return O.BOUNDARY}return O.INTERIOR}if(arguments[0]instanceof S&&arguments[1]instanceof ie){n=arguments[0],r=arguments[1];if(!r.getEnvelopeInternal().intersects(n))return O.EXTERIOR;var s=r.getCoordinates();return r.isClosed()||!n.equals(s[0])&&!n.equals(s[s.length-1])?pt.isOnLine(n,s)?O.INTERIOR:O.EXTERIOR:O.BOUNDARY}if(arguments[0]instanceof S&&arguments[1]instanceof se){s=arguments[0];return arguments[1].getCoordinate().equals2D(s)?O.INTERIOR:O.EXTERIOR}},Pr.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?pt.locatePointInRing(t,e.getCoordinates()):O.EXTERIOR},Pr.prototype.intersects=function(t,e){return this.locate(t,e)!==O.EXTERIOR},Pr.prototype.updateLocationInfo=function(t){t===O.INTERIOR&&(this._isIn=!0),t===O.BOUNDARY&&this._numBoundaries++},Pr.prototype.computeLocation=function(t,e){if(e instanceof se&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof ie)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ue)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Zt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof pe)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof $t)for(var u=new Xn(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Pr.prototype.locate=function(t,e){return e.isEmpty()?O.EXTERIOR:e instanceof ie||e instanceof ue?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?O.BOUNDARY:0<this._numBoundaries||this._isIn?O.INTERIOR:O.EXTERIOR)},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr};function Ar(){var t,e,n;this._component=null,this._segIndex=null,this._pt=null,2===arguments.length?Ar.call(this,arguments[0],Ar.INSIDE_AREA,arguments[1]):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this._component=t,this._segIndex=e,this._pt=n)}N={INSIDE_AREA:{configurable:!0}};Ar.prototype.isInsideArea=function(){return this._segIndex===Ar.INSIDE_AREA},Ar.prototype.getCoordinate=function(){return this._pt},Ar.prototype.getGeometryComponent=function(){return this._component},Ar.prototype.getSegmentIndex=function(){return this._segIndex},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},N.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ar,N);function Rr(t){this._pts=t||null}Rr.prototype.filter=function(t){t instanceof se&&this._pts.add(t)},Rr.prototype.interfaces_=function(){return[Ht]},Rr.prototype.getClass=function(){return Rr},Rr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof se?cn.singletonList(t):Rr.getPoints(t,new Lt)}if(2===arguments.length){var e=arguments[0],t=arguments[1];return e instanceof se?t.add(e):e instanceof $t&&e.apply(new Rr(t)),t}};function Fr(){this._locations=null;var t=arguments[0];this._locations=t}Fr.prototype.filter=function(t){(t instanceof se||t instanceof ie||t instanceof ue)&&this._locations.add(new Ar(t,0,t.getCoordinate()))},Fr.prototype.interfaces_=function(){return[Ht]},Fr.prototype.getClass=function(){return Fr},Fr.getLocations=function(t){var e=new Lt;return t.apply(new Fr(e)),e};function Dr(){var t,e,n;this._geom=null,this._terminateDistance=0,this._ptLocator=new Pr,this._minDistanceLocation=null,this._minDistance=m.MAX_VALUE,2===arguments.length?(e=arguments[0],n=arguments[1],this._geom=[e,n],this._terminateDistance=0):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e,this._terminateDistance=n)}Dr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Or.getPolygons(this._geom[e]);if(0<i.size()){t=Fr.getLocations(this._geom[r]);if(this.computeContainmentDistance(t,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&P(arguments[0],Ct)&&P(arguments[1],Ct)){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=0;u<o.size();u++)for(var c=o.get(u),l=0;l<s.size();l++)if(this.computeContainmentDistance(c,s.get(l),a),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ar&&arguments[1]instanceof ue){i=arguments[0],r=arguments[1],e=arguments[2],n=i.getCoordinate();if(O.EXTERIOR!==this._ptLocator.locate(n,r))return e[this._minDistance=0]=i,e[1]=new Ar(r,n),null}},Dr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Dr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Mr.getLines(this._geom[0]),n=Mr.getLines(this._geom[1]),r=Rr.getPoints(this._geom[0]),i=Rr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Dr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Dr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Dr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Dr.prototype.computeMinDistance=function(){if(0===arguments.length)return null!==this._minDistanceLocation?null:(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance?null:void this.computeFacetDistance());if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof ie&&arguments[1]instanceof se){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var s=pt.distancePointLine(i,r[o],r[o+1]);if(s<this._minDistance&&(this._minDistance=s,s=new wn(r[o],r[o+1]).closestPoint(i),n[0]=new Ar(t,o,s),n[1]=new Ar(e,0,i)),this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof ie&&arguments[1]instanceof ie){var a=arguments[0],u=arguments[1],c=arguments[2];if(a.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var l=a.getCoordinates(),p=u.getCoordinates(),h=0;h<l.length-1;h++)for(var f=0;f<p.length-1;f++){var d,g=pt.distanceLineLine(l[h],l[h+1],p[f],p[f+1]);if(g<this._minDistance&&(this._minDistance=g,d=new wn(l[h],l[h+1]),g=new wn(p[f],p[f+1]),g=d.closestPoints(g),c[0]=new Ar(a,h,g[0]),c[1]=new Ar(u,f,g[1])),this._minDistance<=this._terminateDistance)return null}}},Dr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Ar(i,0,i.getCoordinate()),n[1]=new Ar(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Dr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new E("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Dr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.distance=function(t,e){return new Dr(t,e).distance()},Dr.isWithinDistance=function(t,e,n){return new Dr(t,e,n).distance()<=n},Dr.nearestPoints=function(t,e){return new Dr(t,e).nearestPoints()};function jr(){this._pt=[new S,new S],this._distance=m.NaN,this._isNull=!0}jr.prototype.getCoordinates=function(){return this._pt},jr.prototype.getCoordinate=function(t){return this._pt[t]},jr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;t=e.distance(n);t<this._distance&&this.initialize(e,n,t)}},jr.prototype.initialize=function(){var t,e,n;0===arguments.length?this._isNull=!0:2===arguments.length?(e=arguments[0],n=arguments[1],this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(n),this._distance=e.distance(n),this._isNull=!1):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=n,this._isNull=!1)},jr.prototype.toString=function(){return H.toLineString(this._pt[0],this._pt[1])},jr.prototype.getDistance=function(){return this._distance},jr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;t=e.distance(n);t>this._distance&&this.initialize(e,n,t)}},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr};function kr(){}kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.computeDistance=function(){if(arguments[2]instanceof jr&&arguments[0]instanceof ie&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new wn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof jr&&arguments[0]instanceof ue&&arguments[1]instanceof S){var a=arguments[0],u=arguments[1],c=arguments[2];kr.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)kr.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof jr&&arguments[0]instanceof ft&&arguments[1]instanceof S){var p=arguments[0],h=arguments[1],f=arguments[2];if(p instanceof ie)kr.computeDistance(p,h,f);else if(p instanceof ue)kr.computeDistance(p,h,f);else if(p instanceof $t)for(var d=p,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);kr.computeDistance(y,h,f)}else f.setMinimum(p.getCoordinate(),h)}else{var _;arguments[2]instanceof jr&&arguments[0]instanceof wn&&arguments[1]instanceof S&&(_=arguments[1],t=arguments[2],p=arguments[0].closestPoint(_),t.setMinimum(p,_))}};function Gr(){this._g0=null,this._g1=null,this._ptDist=new jr;var t=arguments[this._densifyFrac=0],e=arguments[1];this._g0=t,this._g1=e}N={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Gr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Gr.prototype.setDensifyFraction=function(t){if(1<t||t<=0)throw new E("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Gr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Gr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Gr.prototype.computeOrientedDistance=function(t,e,n){var r=new Ur(e);t.apply(r),n.setMaximum(r.getMaxPointDistance()),0<this._densifyFrac&&(e=new Vr(e,this._densifyFrac),t.apply(e),n.setMaximum(e.getMaxPointDistance()))},Gr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.distance=function(){if(2===arguments.length)return new Gr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Gr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},N.MaxPointDistanceFilter.get=function(){return Ur},N.MaxDensifiedByFractionDistanceFilter.get=function(){return Vr},Object.defineProperties(Gr,N);var Ur=function(){this._maxPtDist=new jr,this._minPtDist=new jr,this._euclideanDist=new kr,this._geom=null;var t=arguments[0];this._geom=t};Ur.prototype.filter=function(t){this._minPtDist.initialize(),kr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ur.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ur.prototype.interfaces_=function(){return[gt]},Ur.prototype.getClass=function(){return Ur};var Vr=function(){this._maxPtDist=new jr,this._minPtDist=new jr,this._geom=null;var t=arguments[this._numSubSegs=0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Vr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),e=t.getCoordinate(e),r=(e.x-n.x)/this._numSubSegs,i=(e.y-n.y)/this._numSubSegs,o=0;o<this._numSubSegs;o++){var s=n.x+o*r,a=n.y+o*i,a=new S(s,a);this._minPtDist.initialize(),kr.computeDistance(this._geom,a,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Vr.prototype.isDone=function(){return!1},Vr.prototype.isGeometryChanged=function(){return!1},Vr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Vr.prototype.interfaces_=function(){return[Kt]},Vr.prototype.getClass=function(){return Vr};function Br(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null}N={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Br.prototype.checkMaximumDistance=function(t,e,n){e=new Gr(e,t);e.setDensifyFraction(.25),this._maxDistanceFound=e.orientedDistance(),this._maxDistanceFound>n&&(this._isValid=!1,e=e.getCoordinates(),this._errorLocation=e[1],this._errorIndicator=t.getFactory().createLineString(e),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+H.toLineString(e[0],e[1])+")")},Br.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Br.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(0<this._bufDistance?this.checkPositiveValid():this.checkNegativeValid(),Br.VERBOSE&&V.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Br.prototype.checkNegativeValid=function(){if(!(this._input instanceof ue||this._input instanceof pe||this._input instanceof $t))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.checkMinimumDistance=function(t,e,n){e=new Dr(t,e,n);this._minDistanceFound=e.distance(),this._minDistanceFound<n&&(this._isValid=!1,n=e.nearestPoints(),this._errorLocation=e.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(n),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+H.toLineString(n[0],n[1])+" )")},Br.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.getPolygonLines=function(t){for(var e=new Lt,n=new Mr(e),r=Or.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Br.prototype.getErrorMessage=function(){return this._errMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},N.VERBOSE.get=function(){return!1},N.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,N);function zr(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null}N={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};zr.prototype.isValid=function(){return this.checkPolygonal(),this._isValid&&(this.checkExpectedEmpty(),this._isValid&&(this.checkEnvelope(),this._isValid&&(this.checkArea(),this._isValid&&(this.checkDistance(),this._isValid))))},zr.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*zr.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new X(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new X(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},zr.prototype.checkDistance=function(){var t=new Br(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},zr.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();0<this._distance&&e<t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},zr.prototype.checkPolygonal=function(){this._result instanceof ue||this._result instanceof pe||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},zr.prototype.getErrorIndicator=function(){return this._errorIndicator},zr.prototype.getErrorLocation=function(){return this._errorLocation},zr.prototype.checkExpectedEmpty=function(){return 2<=this._input.getDimension()||0<this._distance?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},zr.prototype.report=function(t){if(!zr.VERBOSE)return null;V.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},zr.prototype.getErrorMessage=function(){return this._errorMsg},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr},zr.isValidMsg=function(t,e,n){n=new zr(t,e,n);return n.isValid()?null:n.getErrorMessage()},zr.isValid=function(t,e,n){return!!new zr(t,e,n).isValid()},N.VERBOSE.get=function(){return!1},N.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zr,N);function qr(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}qr.prototype.getCoordinates=function(){return this._pts},qr.prototype.size=function(){return this._pts.length},qr.prototype.getCoordinate=function(t){return this._pts[t]},qr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},qr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:In.octant(this.getCoordinate(t),this.getCoordinate(t+1))},qr.prototype.setData=function(t){this._data=t},qr.prototype.getData=function(){return this._data},qr.prototype.toString=function(){return H.toLineString(new ge(this._pts))},qr.prototype.interfaces_=function(){return[xn]},qr.prototype.getClass=function(){return qr};function Yr(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Lt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null}Yr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Yr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Yr.prototype.getIntersectionSegments=function(){return this._intSegments},Yr.prototype.count=function(){return this._intersectionCount},Yr.prototype.getIntersections=function(){return this._intersections},Yr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Yr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Yr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],t=t.getCoordinates()[e+1],e=n.getCoordinates()[r],r=n.getCoordinates()[r+1];this._li.computeIntersection(i,t,e,r),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=t,this._intSegments[2]=e,this._intSegments[3]=r,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Yr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Yr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Yr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Yr.prototype.interfaces_=function(){return[rr]},Yr.prototype.getClass=function(){return Yr},Yr.createAllIntersectionsFinder=function(t){t=new Yr(t);return t.setFindAllIntersections(!0),t},Yr.createAnyIntersectionFinder=function(t){return new Yr(t)},Yr.createIntersectionCounter=function(t){t=new Yr(t);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};function Xr(){this._li=new ut,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t}Xr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Xr.prototype.getIntersections=function(){return this._segInt.getIntersections()},Xr.prototype.isValid=function(){return this.execute(),this._isValid},Xr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Xr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Yr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new An;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Xr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Me(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Xr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+H.toLineString(t[0],t[1])+" and "+H.toLineString(t[2],t[3])},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr},Xr.computeIntersections=function(t){t=new Xr(t);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};function Wr(){this._nv=null;var t=arguments[0];this._nv=new Xr(Wr.toSegmentStrings(t))}Wr.prototype.checkValid=function(){this._nv.checkValid()},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr},Wr.toSegmentStrings=function(t){for(var e=new Lt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new qr(r.getCoordinates(),r))}return e},Wr.checkValid=function(t){new Wr(t).checkValid()};function Jr(t){this._mapOp=t}Jr.prototype.map=function(t){for(var e=new Lt,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(xe.toGeometryArray(e))},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr},Jr.map=function(t,e){return new Jr(e).map(t)};function Hr(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Lt,this._resultLineList=new Lt;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n}Hr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Hr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Hr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Hr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Fi.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Hr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();n.isLineEdge()&&!r.isCoveredSet()&&(n=this._op.isCoveredByA(n.getCoordinate()),r.setCovered(n))}},Hr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Hr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Hr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(Z.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Fi.isResultOfOp(r,e)&&e===Fi.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};function Kr(){this._op=null,this._geometryFactory=null,this._resultPointList=new Lt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e}Kr.prototype.filterCoveredNodeToPoint=function(t){t=t.getCoordinate();this._op.isCoveredByLA(t)||(t=this._geometryFactory.createPoint(t),this._resultPointList.add(t))},Kr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n,r=e.next();r.isInResult()||r.isIncidentEdgeInResult()||0!==r.getEdges().getDegree()&&t!==Fi.INTERSECTION||(n=r.getLabel(),Fi.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(r))}},Kr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr};function $r(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}$r.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},$r.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof le&&!r.isEmpty()||(n=!1);for(var i=new Lt,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof le||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new Lt;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},$r.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},$r.prototype.getInputGeometry=function(){return this._inputGeom},$r.prototype.transformMultiLineString=function(t,e){for(var n=new Lt,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},$r.prototype.transformCoordinates=function(t,e){return this.copy(t)},$r.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},$r.prototype.transformMultiPoint=function(t,e){for(var n=new Lt,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},$r.prototype.transformMultiPolygon=function(t,e){for(var n=new Lt,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},$r.prototype.copy=function(t){return t.copy()},$r.prototype.transformGeometryCollection=function(t,e){for(var n=new Lt,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(xe.toGeometryArray(n)):this._factory.buildGeometry(n)},$r.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof se)return this.transformPoint(t,null);if(t instanceof ce)return this.transformMultiPoint(t,null);if(t instanceof le)return this.transformLinearRing(t,null);if(t instanceof ie)return this.transformLineString(t,null);if(t instanceof Zt)return this.transformMultiLineString(t,null);if(t instanceof ue)return this.transformPolygon(t,null);if(t instanceof pe)return this.transformMultiPolygon(t,null);if(t instanceof $t)return this.transformGeometryCollection(t,null);throw new E("Unknown Geometry subtype: "+t.getClass().getName())},$r.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);t=n.size();return 0<t&&t<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r};function Zr(){var t,e;this._snapTolerance=0,this._srcPts=null,this._seg=new wn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof ie&&"number"==typeof arguments[1]?(e=arguments[1],Zr.call(this,arguments[0].getCoordinates(),e)):arguments[0]instanceof Array&&"number"==typeof arguments[1]&&(t=arguments[0],e=arguments[1],this._srcPts=t,this._isClosed=Zr.isClosed(t),this._snapTolerance=e)}Zr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),i=this.findSnapForVertex(i,e);null!==i&&(t.set(r,new S(i)),0===r&&this._isClosed&&t.set(t.size()-1,new S(i)))}},Zr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Zr.prototype.snapTo=function(t){var e=new Mt(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Zr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);0<=o&&t.add(o+1,new S(i),!1)}},Zr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=m.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Zr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};function Qr(t){this._srcGeom=t||null}N={SNAP_PRECISION_FACTOR:{configurable:!0}};Qr.prototype.snapTo=function(t,e){t=this.extractTargetCoordinates(t);return new ni(e,t).transform(this._srcGeom)},Qr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),t=new ni(t,n,!0).transform(this._srcGeom),n=t;return e&&P(n,oe)&&(n=t.buffer(0)),n},Qr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Qr.prototype.extractTargetCoordinates=function(t){for(var e=new f,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Qr.prototype.computeMinimumSegmentLength=function(t){for(var e=m.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.snap=function(t,e,n){var r=new Array(2).fill(null),t=new Qr(t);r[0]=t.snapTo(e,n);e=new Qr(e);return r[1]=e.snapTo(r[0],n),r},Qr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Qr.computeSizeBasedSnapTolerance(t),t=t.getPrecisionModel();return t.getType()!==_e.FIXED||e<(n=1/t.getScale()*2/1.415)&&(e=n),e}if(2===arguments.length){var n=arguments[0],e=arguments[1];return Math.min(Qr.computeOverlaySnapTolerance(n),Qr.computeOverlaySnapTolerance(e))}},Qr.computeSizeBasedSnapTolerance=function(t){t=t.getEnvelopeInternal();return Math.min(t.getHeight(),t.getWidth())*Qr.SNAP_PRECISION_FACTOR},Qr.snapToSelf=function(t,e,n){return new Qr(t).snapToSelf(e,n)},N.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Qr,N);function ti(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null}var ei,ni=((ei=$r)&&(ri.__proto__=ei),((ri.prototype=Object.create(ei&&ei.prototype)).constructor=ri).prototype.snapLine=function(t,e){t=new Zr(t,this._snapTolerance);return t.setAllowSnappingToSourceVertices(this._isSelfSnap),t.snapTo(e)},ri.prototype.transformCoordinates=function(t,e){t=t.toCoordinateArray(),t=this.snapLine(t,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(t)},ri.prototype.interfaces_=function(){return[]},ri.prototype.getClass=function(){return ri},ri);function ri(t,e,n){ei.call(this),this._snapTolerance=t||null,this._snapPts=e||null,this._isSelfSnap=void 0!==n&&n}ti.prototype.getCommon=function(){return m.longBitsToDouble(this._commonBits)},ti.prototype.add=function(t){t=m.doubleToLongBits(t);return this._isFirst?(this._commonBits=t,this._commonSignExp=ti.signExpBits(this._commonBits),this._isFirst=!1,null):ti.signExpBits(t)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=ti.numCommonMostSigMantissaBits(this._commonBits,t),void(this._commonBits=ti.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},ti.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=m.longBitsToDouble(t),t="0000000000000000000000000000000000000000000000000000000000000000"+m.toBinaryString(t),t=t.substring(t.length-64);return t.substring(0,1)+"  "+t.substring(1,12)+"(exp) "+t.substring(12)+" [ "+e+" ]"}},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ti.getBit=function(t,e){return 0!=(t&1<<e)?1:0},ti.signExpBits=function(t){return t>>52},ti.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},ti.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;0<=r;r--){if(ti.getBit(t,r)!==ti.getBit(e,r))return n;n++}return 52};function ii(){this._commonCoord=null,this._ccFilter=new oi}N={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ii.prototype.addCommonBits=function(t){var e=new si(this._commonCoord);t.apply(e),t.geometryChanged()},ii.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new S(this._commonCoord);e.x=-e.x,e.y=-e.y;e=new si(e);return t.apply(e),t.geometryChanged(),t},ii.prototype.getCommonCoordinate=function(){return this._commonCoord},ii.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},N.CommonCoordinateFilter.get=function(){return oi},N.Translater.get=function(){return si},Object.defineProperties(ii,N);var oi=function(){this._commonBitsX=new ti,this._commonBitsY=new ti};oi.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},oi.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},oi.prototype.interfaces_=function(){return[gt]},oi.prototype.getClass=function(){return oi};var si=function(){this.trans=null;var t=arguments[0];this.trans=t};si.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},si.prototype.isDone=function(){return!1},si.prototype.isGeometryChanged=function(){return!0},si.prototype.interfaces_=function(){return[Kt]},si.prototype.getClass=function(){return si};function ai(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()}ai.prototype.selfSnap=function(t){return new Qr(t).snapTo(t,this._snapTolerance)},ai.prototype.removeCommonBits=function(t){this._cbr=new ii,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ai.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ai.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),t=Fi.overlayOp(e[0],e[1],t);return this.prepareResult(t)},ai.prototype.checkValid=function(t){t.isValid()||V.out.println("Snapped geometry is invalid")},ai.prototype.computeSnapTolerance=function(){this._snapTolerance=Qr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ai.prototype.snap=function(t){t=this.removeCommonBits(t);return Qr.snap(t[0],t[1],this._snapTolerance)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai},ai.overlayOp=function(t,e,n){return new ai(t,e).getResultGeometry(n)},ai.union=function(t,e){return ai.overlayOp(t,e,Fi.UNION)},ai.intersection=function(t,e){return ai.overlayOp(t,e,Fi.INTERSECTION)},ai.symDifference=function(t,e){return ai.overlayOp(t,e,Fi.SYMDIFFERENCE)},ai.difference=function(t,e){return ai.overlayOp(t,e,Fi.DIFFERENCE)};function ui(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e}ui.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Fi.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof et))throw t;r=t}if(!n)try{e=ai.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof et?r:t}return e},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui},ui.overlayOp=function(t,e,n){return new ui(t,e).getResultGeometry(n)},ui.union=function(t,e){return ui.overlayOp(t,e,Fi.UNION)},ui.intersection=function(t,e){return ui.overlayOp(t,e,Fi.INTERSECTION)},ui.symDifference=function(t,e){return ui.overlayOp(t,e,Fi.SYMDIFFERENCE)},ui.difference=function(t,e){return ui.overlayOp(t,e,Fi.DIFFERENCE)};function ci(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}ci.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};function li(){var t,e,n;this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length?(e=arguments[0],n=arguments[1],this._eventType=li.DELETE,this._xValue=e,this._insertEvent=n):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this._eventType=li.INSERT,this._label=t,this._xValue=e,this._obj=n)}N={INSERT:{configurable:!0},DELETE:{configurable:!0}};li.prototype.isDelete=function(){return this._eventType===li.DELETE},li.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},li.prototype.getObject=function(){return this._obj},li.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},li.prototype.getInsertEvent=function(){return this._insertEvent},li.prototype.isInsert=function(){return this._eventType===li.INSERT},li.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},li.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},li.prototype.interfaces_=function(){return[b]},li.prototype.getClass=function(){return li},N.INSERT.get=function(){return 1},N.DELETE.get=function(){return 2},Object.defineProperties(li,N);function pi(){}pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi};function hi(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n}hi.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(hi.isAdjacentSegments(e,r))return!0;if(t.isClosed()){t=t.getNumPoints()-1;if(0===e&&r===t||0===r&&e===t)return!0}}return!1},hi.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},hi.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},hi.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},hi.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},hi.prototype.hasProperIntersection=function(){return this._hasProper},hi.prototype.hasIntersection=function(){return this._hasIntersection},hi.prototype.isDone=function(){return this._isDone},hi.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},hi.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},hi.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi},hi.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};function fi(){this._min=m.POSITIVE_INFINITY,this._max=m.NEGATIVE_INFINITY}var di,gi=((di=pi)&&(yi.__proto__=di),((yi.prototype=Object.create(di&&di.prototype)).constructor=yi).prototype.prepareEvents=function(){cn.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},yi.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else{var r,i,o;3===arguments.length&&(arguments[2]instanceof hi&&P(arguments[0],Ct)&&P(arguments[1],Ct)?(r=arguments[0],i=arguments[1],o=arguments[2],this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)):"boolean"==typeof arguments[2]&&P(arguments[0],Ct)&&arguments[1]instanceof hi&&(i=arguments[0],o=arguments[1],arguments[2]?this.addEdges(i,null):this.addEdges(i),this.computeIntersections(o)))}},yi.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ci(n,i),o=new li(e,n.getMinX(i),o);this.events.add(o),this.events.add(new li(n.getMaxX(i),o))}},yi.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s,a=this.events.get(o);a.isInsert()&&(s=a.getObject(),n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++))}},yi.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi},yi),N={NodeComparator:{configurable:!0}};function yi(){di.call(this),this.events=new Lt,this.nOverlaps=null}fi.prototype.getMin=function(){return this._min},fi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},fi.prototype.getMax=function(){return this._max},fi.prototype.toString=function(){return H.toLineString(new S(this._min,0),new S(this._max,0))},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},N.NodeComparator.get=function(){return _i},Object.defineProperties(fi,N);var _i=function(){};_i.prototype.compare=function(t,e){t=(t._min+t._max)/2,e=(e._min+e._max)/2;return t<e?-1:e<t?1:0},_i.prototype.interfaces_=function(){return[w]},_i.prototype.getClass=function(){return _i};function mi(){this._leaves=new Lt,this._root=null,this._level=0}var vi,Ei,Ii=((Ei=fi)&&(Ci.__proto__=Ei),((Ci.prototype=Object.create(Ei&&Ei.prototype)).constructor=Ci).prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Ci),xi=((vi=fi)&&(bi.__proto__=vi),((bi.prototype=Object.create(vi&&vi.prototype)).constructor=bi).prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},bi.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},bi.prototype.interfaces_=function(){return[]},bi.prototype.getClass=function(){return bi},bi);function bi(){vi.call(this),this._node1=null,this._node2=null;var t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)}function Ci(){Ei.call(this),this._item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._min=t,this._max=e,this._item=n}mi.prototype.buildTree=function(){cn.sort(this._leaves,new fi.NodeComparator);for(var t,e=this._leaves,n=new Lt;;){if(this.buildLevel(e,n),1===n.size())return n.get(0);t=e,e=n,n=t}},mi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Ii(t,e,n))},mi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},mi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},mi.prototype.printNode=function(t){V.out.println(H.toLineString(new S(t._min,this._level),new S(t._max,this._level)))},mi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},mi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);null===(n+1<t.size()?t.get(n):null)?e.add(r):(r=new xi(t.get(n),t.get(n+1)),e.add(r))}},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi};function wi(){this._items=new Lt}wi.prototype.visitItem=function(t){this._items.add(t)},wi.prototype.getItems=function(){return this._items},wi.prototype.interfaces_=function(){return[sn]},wi.prototype.getClass=function(){return wi};function Si(){this._index=null;var t=arguments[0];if(!P(t,oe))throw new E("Argument must be Polygonal");this._index=new Ti(t)}N={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Si.prototype.locate=function(t){var e=new lt(t),n=new Ni(e);return this._index.query(t.y,t.y,n),e.getLocation()},Si.prototype.interfaces_=function(){return[Yn]},Si.prototype.getClass=function(){return Si},N.SegmentVisitor.get=function(){return Ni},N.IntervalIndexedGeometry.get=function(){return Ti},Object.defineProperties(Si,N);var Ni=function(){this._counter=null;var t=arguments[0];this._counter=t};Ni.prototype.visitItem=function(t){this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))},Ni.prototype.interfaces_=function(){return[sn]},Ni.prototype.getClass=function(){return Ni};var Ti=function(){this._index=new mi;var t=arguments[0];this.init(t)};Ti.prototype.init=function(t){for(var e=Mr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Ti.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new wn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Ti.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new wi;return this._index.query(t,e,n),n.getItems()}3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this._index.query(t,e,n))},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti};function Li(){var t,e,n,r;this._li=new ut,this._resultPrecisionModel=null,this._arg=null,1===arguments.length?(t=arguments[0],this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Mi(0,t)):2===arguments.length?(r=arguments[1],e=yt.OGC_SFS_BOUNDARY_RULE,0<=(n=arguments[0]).getPrecisionModel().compareTo(r.getPrecisionModel())?this.setComputationPrecision(n.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Mi(0,n,e),this._arg[1]=new Mi(1,r,e)):3===arguments.length&&(n=arguments[1],r=arguments[2],0<=(e=arguments[0]).getPrecisionModel().compareTo(n.getPrecisionModel())?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Mi(0,e,r),this._arg[1]=new Mi(1,n,r))}var Oi,Mi=((Oi=tn)&&(Pi.__proto__=Oi),((Pi.prototype=Object.create(Oi&&Oi.prototype)).constructor=Pi).prototype.insertBoundaryPoint=function(t,e){var n=this._nodes.addNode(e).getLabel(),e=1;n.getLocation(t,Ne.ON)===O.BOUNDARY&&e++;e=Pi.determineBoundary(this._boundaryNodeRule,e);n.setLocation(t,e)},Pi.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],t=new hi(arguments[0],!0,!1);t.setIsDoneIfProperInt(r);e=this.createEdgeSetIntersector(),r=this._parentGeom instanceof le||this._parentGeom instanceof ue||this._parentGeom instanceof pe,r=n||!r;return e.computeIntersections(this._edges,t,r),this.addSelfIntersectionNodes(this._argIndex),t}},Pi.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},Pi.prototype.computeEdgeIntersections=function(t,e,n){n=new hi(e,n,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n},Pi.prototype.getGeometry=function(){return this._parentGeom},Pi.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},Pi.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},Pi.prototype.addPoint=function(){var t;arguments[0]instanceof se?(t=arguments[0].getCoordinate(),this.insertPoint(this._argIndex,t,O.INTERIOR)):arguments[0]instanceof S&&(t=arguments[0],this.insertPoint(this._argIndex,t,O.INTERIOR))},Pi.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),O.EXTERIOR,O.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,O.INTERIOR,O.EXTERIOR)}},Pi.prototype.addEdge=function(t){this.insertEdge(t);t=t.getCoordinates();this.insertPoint(this._argIndex,t[0],O.BOUNDARY),this.insertPoint(this._argIndex,t[t.length-1],O.BOUNDARY)},Pi.prototype.addLineString=function(t){var e=St.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new hr(e,new Fe(this._argIndex,O.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),Z.isTrue(2<=e.length,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},Pi.prototype.getInvalidPoint=function(){return this._invalidPoint},Pi.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},Pi.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},Pi.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===O.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},Pi.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=St.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;pt.isCCW(r)&&(i=n,o=e);o=new hr(r,new Fe(this._argIndex,O.BOUNDARY,i,o));this._lineEdgeMap.put(t,o),this.insertEdge(o),this.insertPoint(this._argIndex,r[0],O.BOUNDARY)},Pi.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),e=r.getLabel();null===e?r._label=new Fe(t,n):e.setLocation(t,n)},Pi.prototype.createEdgeSetIntersector=function(){return new gi},Pi.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},Pi.prototype.add=function(){if(1!==arguments.length)return Oi.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof pe&&(this._useBoundaryDeterminationRule=!1),t instanceof ue)this.addPolygon(t);else if(t instanceof ie)this.addLineString(t);else if(t instanceof se)this.addPoint(t);else if(t instanceof ce)this.addCollection(t);else if(t instanceof Zt)this.addCollection(t);else if(t instanceof pe)this.addCollection(t);else{if(!(t instanceof $t))throw new Error(t.getClass().getName());this.addCollection(t)}},Pi.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Pi.prototype.locate=function(t){return P(this._parentGeom,oe)&&50<this._parentGeom.getNumGeometries()?(null===this._areaPtLocator&&(this._areaPtLocator=new Si(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},Pi.prototype.findEdge=function(){if(1!==arguments.length)return Oi.prototype.findEdge.apply(this,arguments);var t=arguments[0];return this._lineEdgeMap.get(t)},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.determineBoundary=function(t,e){return t.isInBoundary(e)?O.BOUNDARY:O.INTERIOR},Pi);function Pi(){var t,e,n;Oi.call(this),this._parentGeom=null,this._lineEdgeMap=new ve,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Pr,2===arguments.length?(t=arguments[0],n=arguments[1],e=yt.OGC_SFS_BOUNDARY_RULE,this._argIndex=t,this._parentGeom=n,this._boundaryNodeRule=e,null!==n&&this.add(n)):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=n,null!==e&&this.add(e))}Li.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Li.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li};function Ai(){}Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai},Ai.map=function(){if(arguments[0]instanceof ft&&P(arguments[1],Ai.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Lt,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(P(arguments[0],It)&&P(arguments[1],Ai.MapOp)){for(var o=arguments[0],s=arguments[1],a=new Lt,u=o.iterator();u.hasNext();){var c=u.next(),c=s.map(c);null!==c&&a.add(c)}return a}},Ai.MapOp=function(){};var Ri,Fi=((Ri=Li)&&(Di.__proto__=Ri),((Di.prototype=Object.create(Ri&&Ri.prototype)).constructor=Di).prototype.insertUniqueEdge=function(t){var e,n,r=this._edgeList.findEqualEdge(t);null!==r?(e=r.getLabel(),n=t.getLabel(),r.isPointwiseEqual(t)||(n=new Fe(t.getLabel())).flip(),(r=r.getDepth()).isNull()&&r.add(e),r.add(n),e.merge(n)):this._edgeList.add(t)},Di.prototype.getGraph=function(){return this._graph},Di.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},Di.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},Di.prototype.computeGeometry=function(t,e,n,r){var i=new Lt;return i.addAll(t),i.addAll(e),i.addAll(n),i.isEmpty()?Di.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(i)},Di.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},Di.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==O.EXTERIOR)return!0}return!1},Di.prototype.replaceCollapsedEdges=function(){for(var t=new Lt,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},Di.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},Di.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},Di.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},Di.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Lt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Wr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();e=new en(this._geomFact);e.add(this._graph),this._resultPolyList=e.getPolygons();e=new Hr(this,this._geomFact,this._ptLocator);this._resultLineList=e.build(t);e=new Kr(this,this._geomFact,this._ptLocator);this._resultPointList=e.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},Di.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},Di.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},Di.prototype.findResultAreaEdges=function(t){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&Di.isResultOfOp(r.getLocation(0,Ne.RIGHT),r.getLocation(1,Ne.RIGHT),t)&&n.setInResult(!0)}},Di.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(Z.isTrue(!r.isNull(i,Ne.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ne.LEFT,r.getLocation(i,Ne.LEFT)),Z.isTrue(!r.isNull(i,Ne.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ne.RIGHT,r.getLocation(i,Ne.RIGHT))))}}},Di.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},Di.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},Di.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di);function Di(){var t=arguments[0],e=arguments[1];Ri.call(this,t,e),this._ptLocator=new Pr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new nr,this._resultPolyList=new Lt,this._resultLineList=new Lt,this._resultPointList=new Lt,this._graph=new tn(new Qn),this._geomFact=t.getFactory()}Fi.overlayOp=function(t,e,n){return new Fi(t,e).getResultGeometry(n)},Fi.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Fi.createEmptyResult(Fi.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Jr.map(t,{interfaces_:function(){return[Ai.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ui.overlayOp(t,e,Fi.INTERSECTION)},Fi.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Fi.createEmptyResult(Fi.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ui.overlayOp(t,e,Fi.SYMDIFFERENCE)},Fi.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Fi.INTERSECTION:o=Math.min(r,i);break;case Fi.UNION:o=Math.max(r,i);break;case Fi.DIFFERENCE:o=r;break;case Fi.SYMDIFFERENCE:o=Math.max(r,i)}return o},Fi.createEmptyResult=function(t,e,n,r){var i=null;switch(Fi.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Fi.difference=function(t,e){return t.isEmpty()?Fi.createEmptyResult(Fi.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ui.overlayOp(t,e,Fi.DIFFERENCE))},Fi.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),t=t.getLocation(1);return Fi.isResultOfOp(n,t,e)}if(3===arguments.length){var r=arguments[0],i=arguments[1];switch(r===O.BOUNDARY&&(r=O.INTERIOR),i===O.BOUNDARY&&(i=O.INTERIOR),arguments[2]){case Fi.INTERSECTION:return r===O.INTERIOR&&i===O.INTERIOR;case Fi.UNION:return r===O.INTERIOR||i===O.INTERIOR;case Fi.DIFFERENCE:return r===O.INTERIOR&&i!==O.INTERIOR;case Fi.SYMDIFFERENCE:return r===O.INTERIOR&&i!==O.INTERIOR||r!==O.INTERIOR&&i===O.INTERIOR}return!1}},Fi.INTERSECTION=1,Fi.UNION=2,Fi.DIFFERENCE=3,Fi.SYMDIFFERENCE=4;function ji(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Pr,this._seg=new wn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)}ji.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},ji.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?O.BOUNDARY:this._ptLocator.locate(t,this._g)},ji.prototype.extractLinework=function(t){var e=new ki;t.apply(e);e=e.getLinework(),e=xe.toLineStringArray(e);return t.getFactory().createMultiLineString(e)},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji};var ki=function(){this._linework=null,this._linework=new Lt};ki.prototype.getLinework=function(){return this._linework},ki.prototype.filter=function(t){if(t instanceof ue){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},ki.prototype.interfaces_=function(){return[Ht]},ki.prototype.getClass=function(){return ki};function Gi(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t}Gi.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Gi.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Gi.prototype.getPoints=function(t){for(var e=new Lt,n=Mr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Gi.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),i=n*i/s,o=n*o/s,s=(e.x+t.x)/2,e=(e.y+t.y)/2;this._doLeft&&(t=new S(s-o,e+i),r.add(t)),this._doRight&&(i=new S(s+o,e-i),r.add(i))},Gi.prototype.interfaces_=function(){return[]},Gi.prototype.getClass=function(){return Gi};function Ui(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=Ui.TOLERANCE,this._testCoords=new Lt;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=Ui.computeBoundaryDistanceTolerance(t,e),this._geom=[t,e,n],this._locFinder=[new ji(this._geom[0],this._boundaryDistanceTolerance),new ji(this._geom[1],this._boundaryDistanceTolerance),new ji(this._geom[2],this._boundaryDistanceTolerance)]}N={TOLERANCE:{configurable:!0}};Ui.prototype.reportResult=function(t,e,n){V.out.println("Overlay result invalid - A:"+O.toLocationSymbol(e[0])+" B:"+O.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+O.toLocationSymbol(e[2]))},Ui.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ui.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Ui.hasLocation(this._location,O.BOUNDARY)||this.isValidResult(r,this._location)}},Ui.prototype.addTestPts=function(t){t=new Gi(t);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))},Ui.prototype.isValidResult=function(t,e){var n=Fi.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===O.INTERIOR);return r||this.reportResult(t,e,n),r},Ui.prototype.getInvalidLocation=function(){return this._invalidLocation},Ui.prototype.interfaces_=function(){return[]},Ui.prototype.getClass=function(){return Ui},Ui.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Ui.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Qr.computeSizeBasedSnapTolerance(t),Qr.computeSizeBasedSnapTolerance(e))},Ui.isValid=function(t,e,n,r){return new Ui(t,e,r).isValid(n)},N.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ui,N);function Vi(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=Vi.extractFactory(t),this._inputGeoms=t}Vi.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Vi.prototype.combine=function(){for(var t=new Lt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Vi.prototype.interfaces_=function(){return[]},Vi.prototype.getClass=function(){return Vi},Vi.combine=function(){return 1===arguments.length?new Vi(arguments[0]).combine():2===arguments.length?new Vi(Vi.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Vi(Vi.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Vi.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Vi.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Lt;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],t=arguments[1],e=arguments[2],n=new Lt;return n.add(r),n.add(t),n.add(e),n}};function Bi(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Lt)}N={STRTREE_NODE_CAPACITY:{configurable:!0}};Bi.prototype.reduceToGeometries=function(t){for(var e=new Lt,n=t.iterator();n.hasNext();){var r=n.next(),i=null;P(r,Ct)?i=this.unionTree(r):r instanceof ft&&(i=r),e.add(i)}return e},Bi.prototype.extractByEnvelope=function(t,e,n){for(var r=new Lt,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);(o.getEnvelopeInternal().intersects(t)?r:n).add(o)}return this._geomFactory.buildGeometry(r)},Bi.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Vi.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);r=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,r)},Bi.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new yn(Bi.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Bi.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],t=arguments[2];if(t-n<=1){var r=Bi.getGeometry(e,n);return this.unionSafe(r,null)}if(t-n==2)return this.unionSafe(Bi.getGeometry(e,n),Bi.getGeometry(e,n+1));r=Math.trunc((t+n)/2),n=this.binaryUnion(e,n,r),t=this.binaryUnion(e,r,t);return this.unionSafe(n,t)}},Bi.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();)var r=n.next(),e=null===e?r.copy():e.union(r);return e},Bi.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Bi.prototype.unionActual=function(t,e){return Bi.restrictToPolygons(t.union(e))},Bi.prototype.unionTree=function(t){t=this.reduceToGeometries(t);return this.binaryUnion(t)},Bi.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Lt,t=this.extractByEnvelope(n,t,r),e=this.extractByEnvelope(n,e,r),e=this.unionActual(t,e);return r.add(e),Vi.combine(r)},Bi.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],t=arguments[1];return e.getFactory().createGeometryCollection([e,t]).buffer(0)}},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi},Bi.restrictToPolygons=function(t){if(P(t,oe))return t;var e=Or.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(xe.toPolygonArray(e))},Bi.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Bi.union=function(t){return new Bi(t).union()},N.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Bi,N);function zi(){}zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi},zi.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Fi.createEmptyResult(Fi.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ui.overlayOp(t,e,Fi.UNION)},t.GeoJSONReader=M,t.GeoJSONWriter=I,t.OverlayOp=Fi,t.UnionOp=zi,t.BufferOp=Cr,Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==e?n:r.jsts={})},{}],167:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],168:[function(t,e,n){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n,r=arguments[e];for(n in r)i.call(r,n)&&(t[n]=r[n])}return t};var i=Object.prototype.hasOwnProperty},{}],169:[function(t,e,n){"use strict";var r=t("lodash.isequal"),i=t("@mapbox/geojson-normalize"),o=t("hat"),s=t("./lib/features_at"),a=t("./lib/string_sets_are_equal"),l=t("@mapbox/geojsonhint"),p=t("./constants"),h=t("./lib/string_set"),f=t("./lib/change_style_property"),d={Polygon:t("./feature_types/polygon"),LineString:t("./feature_types/line_string"),Point:t("./feature_types/point"),MultiPolygon:t("./feature_types/multi_feature"),MultiLineString:t("./feature_types/multi_feature"),MultiPoint:t("./feature_types/multi_feature")};e.exports=function(u,c){return c.modes=p.modes,c.getFeatureIdsAt=function(t){return s.click({point:t},null,u).map(function(t){return t.properties.id})},c.getSelectedIds=function(){return u.store.getSelectedIds()},c.getSelected=function(){return{type:p.geojsonTypes.FEATURE_COLLECTION,features:u.store.getSelectedIds().map(function(t){return u.store.get(t)}).map(function(t){return t.toGeoJSON()})}},c.getSelectedPoints=function(){return{type:p.geojsonTypes.FEATURE_COLLECTION,features:u.store.getSelectedCoordinates().map(function(t){return{type:p.geojsonTypes.FEATURE,properties:{},geometry:{type:p.geojsonTypes.POINT,coordinates:t.coordinates}}})}},c.set=function(t){if(void 0===t.type||t.type!==p.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(t.features))throw new Error("Invalid FeatureCollection");var e=u.store.createRenderBatch(),n=u.store.getAllIds().slice(),t=c.add(t),r=new h(t);return(n=n.filter(function(t){return!r.has(t)})).length&&c.delete(n),e(),t},c.add=function(t){var e=l.hint(t,{precisionWarning:!1}).filter(function(t){return"message"!==t.level&&void 0!==t.line});if(e.length)throw new Error(e[0].message);t=JSON.parse(JSON.stringify(i(t))).features.map(function(t){if(t.id=t.id||o(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===u.store.get(t.id)||u.store.get(t.id).type!==t.geometry.type){var e=d[t.geometry.type];if(void 0===e)throw new Error("Invalid geometry type: "+t.geometry.type+".");e=new e(u,t);u.store.add(e)}else{e=u.store.get(t.id);e.properties=t.properties,r(e.getCoordinates(),t.geometry.coordinates)||e.incomingCoords(t.geometry.coordinates)}return t.id});return u.store.render(),t},c.get=function(t){t=u.store.get(t);if(t)return t.toGeoJSON()},c.getAll=function(){return{type:p.geojsonTypes.FEATURE_COLLECTION,features:u.store.getAll().map(function(t){return t.toGeoJSON()})}},c.delete=function(t){return u.store.delete(t,{silent:!0}),c.getMode()!==p.modes.DIRECT_SELECT||u.store.getSelectedIds().length?u.store.render():u.events.changeMode(p.modes.SIMPLE_SELECT,void 0,{silent:!0}),c},c.deleteAll=function(){return u.store.delete(u.store.getAllIds(),{silent:!0}),c.getMode()===p.modes.DIRECT_SELECT?u.events.changeMode(p.modes.SIMPLE_SELECT,void 0,{silent:!0}):u.store.render(),c},c.changeMode=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return!1==!!u.options.drawEnabled||(t===p.modes.SIMPLE_SELECT&&c.getMode()===p.modes.SIMPLE_SELECT?a(e.featureIds||[],u.store.getSelectedIds())||(u.store.setSelected(e.featureIds,{silent:!0}),u.store.render()):t===p.modes.DIRECT_SELECT&&c.getMode()===p.modes.DIRECT_SELECT&&e.featureId===u.store.getSelectedIds()[0]||u.events.changeMode(t,e,{silent:!0})),c},c.getMode=function(){return u.events.getMode()},c.trash=function(){return u.events.trash({silent:!0}),c},c.combineFeatures=function(){return u.events.combineFeatures({silent:!0}),c},c.uncombineFeatures=function(){return u.events.uncombineFeatures({silent:!0}),c},c.unionPolygon=function(){return u.events.unionPolygon({silent:!0}),c},c.unionLine=function(){return u.events.unionLine({silent:!0}),c},c.splitLine=function(){return u.events.splitLine({silent:!0}),c},c.curveLine=function(){return u.events.curveLine({silent:!0}),c},c.setFeatureProperty=function(t,e,n,r){return u.store.setFeatureProperty(t,e,n),r&&u.store.render(),c},c.setCustomStyle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=void 0!==e.featureIds?e.featureIds:u.store.getSelectedIds();if(!Array.isArray(n))throw new Error("Invalid featureIds");if(0<n.length){for(var r=n.map(function(t){return u.store.get(t)}).map(function(t){return t.toGeoJSON()}),i=0,o=n.length;i<o;i++){var s=n[i],a=u.store.get(s);f.setStyleProperties(a,t),u.store.featureChanged(s)}u.store.render(),u.map.fire(p.events.UPDATE,{action:p.updateActions.CHANGE_PROPERTIES,prevFeatures:r,features:n.map(function(t){return u.store.get(t)}).map(function(t){return t.toGeoJSON()})}),void 0!==e.cancelSelected&&(!e.cancelSelected&&1)||u.events.changeMode(p.modes.SIMPLE_SELECT,void 0,{silent:!0})}return c},c.cancelCustomStyle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=void 0!==t.featureIds?t.featureIds:u.store.getSelectedIds();if(!Array.isArray(e))throw new Error("Invalid featureIds");if(0<e.length){for(var n=e.map(function(t){return u.store.get(t)}).map(function(t){return t.toGeoJSON()}),r=0,i=e.length;r<i;r++){var o=e[r],s=u.store.get(o);f.deleteAllStyleProperties(s),u.store.featureChanged(o)}u.store.render(),u.map.fire(p.events.UPDATE,{action:p.updateActions.CHANGE_PROPERTIES,prevFeatures:n,features:e.map(function(t){return u.store.get(t)}).map(function(t){return t.toGeoJSON()})}),void 0!==t.cancelSelected&&(!t.cancelSelected&&1)||u.events.changeMode(p.modes.SIMPLE_SELECT,void 0,{silent:!0})}return c},c}},{"./constants":170,"./feature_types/line_string":195,"./feature_types/multi_feature":196,"./feature_types/point":200,"./feature_types/polygon":201,"./lib/change_style_property":207,"./lib/features_at":216,"./lib/string_set":226,"./lib/string_sets_are_equal":227,"@mapbox/geojson-normalize":6,"@mapbox/geojsonhint":7,hat:48,"lodash.isequal":50}],170:[function(t,e,n){"use strict";e.exports={classes:{CONTROL_BASE:"minemap-ctrl",CONTROL_PREFIX:"minemap-ctrl-",CONTROL_BUTTON:"minemap-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"minemap-draw_line",CONTROL_BUTTON_POLYGON:"minemap-draw_polygon",CONTROL_BUTTON_POINT:"minemap-draw_point",CONTROL_BUTTON_TRASH:"minemap-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"minemap-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"minemap-draw_uncombine",CONTROL_GROUP:"minemap-ctrl-group",ATTRIBUTION:"minemap-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"minemap-draw_boxselect"},sources:{HOT:"minemap-draw-hot",COLD:"minemap-draw-cold",POLYGON_LINE_COLD:"minemap-draw-polygon-line-cold",POLYGON_LINE_HOT:"minemap-draw-polygon-line-hot"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point",CIRCLE:"circle",RECTANGLE:"rectangle",TRIANGLE:"triangle",SECTOR:"sector",ELLIPSE:"ellipse",ARC:"arc",LINE_ARROW:"line_arrow",THIN_STRAIGHT_ARROW:"thin_straight_arrow",THIN_TAIL_ARROW:"thin_tail_arrow",ATTACK_ARROW:"attack_arrow",OFFENSIVE_ARROW:"offensive_arrow",OFFENSIVE_TAIL_ARROW:"offensive_tail_arrow",PINCER_ATTACK_ARROW:"pincer_attack_arrow",CURVE_POLYGON:"curve_polygon"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_CIRCLE:"draw_circle",DRAW_RECTANGLE:"draw_rectangle",DRAW_TRIANGLE:"draw_triangle",DRAW_SECTOR:"draw_sector",DRAW_ELLIPSE:"draw_ellipse",DRAW_ARC:"draw_arc",DRAW_ICON:"draw_icon",DRAW_POINT:"draw_point",SPLIT_POLYGON:"split_polygon",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",FREE_DRAWING:"free_drawing",DRAW_LINE_ARROW:"draw_line_arrow",DRAW_THIN_STRAIGHT_ARROW:"draw_thin_straight_arrow",DRAW_THIN_TAIL_ARROW:"draw_thin_tail_arrow",DRAW_ATTACK_ARROW:"draw_attack_arrow",DRAW_OFFENSIVE_ARROW:"draw_offensive_arrow",DRAW_OFFENSIVE_TAIL_ARROW:"draw_offensive_tail_arrow",DRAW_PINCER_ATTACK_ARROW:"draw_pincer_attack_arrow",DRAW_CURVE_POLYGON:"draw_curve_polygon",DRAW_TEXT:"draw_text",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",SELECTION_MOVE_CHANGE:"draw.selectmovechange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine",REPLACE:"draw.replace",RECORD_CREATE:"edit.record.create",UNDO:"edit.undo",REDO:"edit.redo",SELECTED:"edit.selected",UNSELECTED:"edit.unselected"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates",CHANGE_PROPERTIES:"change_properties"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},customStyle:{OPEN:"true",CLOSE:"false"},interactions:["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270,MAXZOOM:22,MINZOOM:1}},{}],171:[function(t,e,n){"use strict";var r=t("../constants");e.exports=function(t,e,n){if(!1!=!!t.draw.options.drawEnabled)switch(e){case"text":t.draw&&t.draw.changeMode(r.modes.DRAW_TEXT,n);break;case"icon":t.draw&&t.draw.changeMode(r.modes.DRAW_ICON,n);break;case"point":t.draw&&t.draw.changeMode(r.modes.DRAW_POINT,n);break;case"line":t.draw&&t.draw.changeMode(r.modes.DRAW_LINE_STRING,n);break;case"polygon":t.draw&&t.draw.changeMode(r.modes.DRAW_POLYGON,n);break;case"rectangle":t.draw&&t.draw.changeMode(r.modes.DRAW_RECTANGLE,n);break;case"triangle":t.draw&&t.draw.changeMode(r.modes.DRAW_TRIANGLE,n);break;case"circle":t.draw&&t.draw.changeMode(r.modes.DRAW_CIRCLE,n);break;case"sector":t.draw&&t.draw.changeMode(r.modes.DRAW_SECTOR,n);break;case"ellipse":t.draw&&t.draw.changeMode(r.modes.DRAW_ELLIPSE,n);break;case"arc":t.draw&&t.draw.changeMode(r.modes.DRAW_ARC,n);break;case"trash":t.draw&&t.draw.trash();break;case"combine":t.draw&&t.draw.combineFeatures();break;case"uncombine":t.draw&&t.draw.uncombineFeatures();break;case"union_polygon":t.draw&&t.draw.unionPolygon();break;case"split_polygon":t.draw&&t.draw.changeMode(r.modes.SPLIT_POLYGON,n);break;case"union_line":t.draw&&t.draw.unionLine();break;case"split_line":t.draw&&t.draw.splitLine();break;case"curve_line":t.draw&&t.draw.curveLine();break;case"free_drawing":t.draw&&t.draw.changeMode(r.modes.FREE_DRAWING,n);break;case"line_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_LINE_ARROW,n);break;case"thin_straight_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_THIN_STRAIGHT_ARROW,n);break;case"thin_tail_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_THIN_TAIL_ARROW,n);break;case"attack_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_ATTACK_ARROW,n);break;case"offensive_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_OFFENSIVE_ARROW,n);break;case"offensive_tail_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_OFFENSIVE_TAIL_ARROW,n);break;case"pincer_attack_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_PINCER_ATTACK_ARROW,n);break;case"curve_polygon":t.draw&&t.draw.changeMode(r.modes.DRAW_CURVE_POLYGON,n);break;case"undo":t.event&&t.event.undoHistory();break;case"redo":t.event&&t.event.redoHistory();break;case"static":t.draw&&t.draw.changeMode(r.modes.STATIC)}}},{"../constants":170}],172:[function(t,e,n){"use strict";var r=t("../setup"),i=t("../options"),o=t("../api"),s=t("../constants");e.exports=function(t){var e,n;n=this,t={options:e=i(e=t)},n=o(t,n),t.api=n,t=r(t),n.onAdd=t.onAdd,n.onRemove=t.onRemove,n.types=s.types,n.options=e}},{"../api":169,"../constants":170,"../options":258,"../setup":260}],173:[function(t,e,n){"use strict";var l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=t("xtend"),o=t("./draw"),s=t("./events"),a=t("./history/history"),u=t("../constants"),p=t("./btn_ctrl");e.exports=function(c){c.map=null,c.options={},c.controlPosition=void 0,c.events=null,c.draw=null,c.history=null,c.container=null;function r(){return{options:c.options||{},controlPosition:c.controlPosition||void 0,draw:(t=c.draw)?i({add:t.add,get:t.get,getFeatureIdsAt:t.getFeatureIdsAt,getSelectedIds:t.getSelectedIds,getSelected:t.getSelected,getSelectedPoints:t.getSelectedPoints,getAll:t.getAll,delete:t.delete,deleteAll:t.deleteAll,set:t.set,trash:t.trash}):null};var t}return{init:function(t,e,n){n=2<arguments.length&&void 0!==n?n:void 0;return c.draw=new o(e),c.map=t,c.map.addControl(c.draw,n),c.options=e,c.controlPosition=n,c.container=t.getContainer(),c.history&&(c.history=null),c.event&&(c.event.removeEventListeners(),c.event=null),c.history=new a,c.event=new s(c.draw,c.map,c.history,c.container),c.event.addEventListeners(),r()},setOptions:function(t){return c.draw&&c.map&&(c.map.removeControl(c.draw),c.draw=null),c.draw=new o(t),c.map.addControl(c.draw,c.controlPosition),c.options=t,c.history&&(c.history=null),c.event&&(c.event.removeEventListeners(),c.event=null),c.history=new a,c.event=new s(c.draw,c.map,c.history,c.container),c.event.addEventListeners(),r()},dispose:function(){return c.draw&&c.map&&(c.map.removeControl(c.draw),c.draw=null),c.history&&(c.history=null),c.event&&(c.event.removeEventListeners(),c.event=null),delete c.map,delete c.options,delete c.controlPosition,delete c.history,delete c.event,delete c.draw,delete c.container,r()},undoOperation:function(){c.event&&c.event.undoHistory()},redoOperation:function(){c.event&&c.event.redoHistory()},setFeatures:function(t){return c.draw.changeMode(u.modes.SIMPLE_SELECT),c.draw.set(t)},removeFeatures:function(t){if(!Array.isArray(t))throw new Error("Invalid featureIds");if(0===t.length)throw new Error("featureIds");return c.draw.changeMode(u.modes.SIMPLE_SELECT,{featureIds:t}),c.draw.trash(),t},setSelected:function(t){if(!Array.isArray(t))throw new Error("Invalid featureIds");return c.draw.changeMode(u.modes.SIMPLE_SELECT,{featureIds:t}),t},setFeatureProperties:function(t,e){var n=1<arguments.length&&void 0!==e?e:{},r=!0,i=!1,o=void 0;try{for(var s=Object.entries(n)[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var a=l(u.value,2),u=a[0],a=a[1];c.draw.setFeatureProperty(t,u,a)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return c.draw.get(t)},setFeaturePropertiesByIds:function(t,e){var a=1<arguments.length&&void 0!==e?e:{};if(!Array.isArray(t))throw new Error("Invalid featureIds");t.forEach(function(t){var e=!0,n=!1,r=void 0;try{for(var i=Object.entries(a)[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var o=l(s.value,2),s=o[0],o=o[1];c.draw.setFeatureProperty(t,s,o,!0)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}})},setLockByIds:function(t,e){var n=!(1<arguments.length&&void 0!==e)||e;if(!Array.isArray(t))throw new Error("Invalid featureIds");t.forEach(function(t){c.draw.setFeatureProperty(t,"isLock",n)})},getAllHistoryRecords:function(){return c.history?c.history.getAllRecords():[]},clearHistoryRecords:function(){c.history&&c.history.clear()},setCustomStyle:function(t,e){c.draw&&c.draw.setCustomStyle(t,e)},cancelCustomStyle:function(t){c.draw&&c.draw.cancelCustomStyle(t)},onBtnCtrlActive:function(t,e){p(c,t,e)},isDrawEnabled:function(){return c.draw&&!!c.draw.options.drawEnabled},disableDraw:function(){c.draw&&(c.draw.options.drawEnabled=!1)},enableDraw:function(){c.draw&&(c.draw.options.drawEnabled=!0)},isAdsorbEnabled:function(){return c.draw&&!!c.draw.options.adsorbEnabled},disableAdsorb:function(){c.draw&&(c.draw.options.adsorbEnabled=!1)},enableAdsorb:function(){c.draw&&(c.draw.options.adsorbEnabled=!0)}}}},{"../constants":170,"./btn_ctrl":171,"./draw":172,"./events":174,"./history/history":175,xtend:168}],174:[function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=t("../constants"),p=t("xtend"),s=t("./history/record");e.exports=function(a,u,c,t){var e,n={type:(o(e={},l.events.DELETE,1),o(e,l.events.UPDATE,2),o(e,l.events.CREATE,3),o(e,l.events.REPLACE,4),e),action:(o(e={},l.updateActions.MOVE,1),o(e,l.updateActions.CHANGE_COORDINATES,2),o(e,l.updateActions.CHANGE_PROPERTIES,3),e)},r={onDrawCreate:function(t){t=new s(3,0,t.features);c.addRecord(t),u.fire(l.events.RECORD_CREATE,{record:t})},onDrawUpdate:function(t){t=new s(2,n.action[t.action]||0,t.features,t.prevFeatures);c.addRecord(t),u.fire(l.events.RECORD_CREATE,{record:t})},onDrawDelete:function(t){t=new s(1,0,t.features);c.addRecord(t),u.fire(l.events.RECORD_CREATE,{record:t})},onDrawCombine:function(t){t=new s(4,0,t.createdFeatures,t.deletedFeatures);c.addRecord(t),u.fire(l.events.RECORD_CREATE,{record:t})},onDrawUncombine:function(t){t=new s(4,0,t.createdFeatures,t.deletedFeatures);c.addRecord(t),u.fire(l.events.RECORD_CREATE,{record:t})},onDrawReplace:function(t){t=new s(4,0,t.createdFeatures,t.deletedFeatures);c.addRecord(t),u.fire(l.events.RECORD_CREATE,{record:t})},onKeydown:function(t){"minemap-canvas"===(t.srcElement||t.target).classList[0]&&(90===t.keyCode?(t.preventDefault(),i.undoHistory()):89===t.keyCode&&(t.preventDefault(),i.redoHistory()))}},i={addEventListeners:function(){u&&(u.on(l.events.CREATE,r.onDrawCreate),u.on(l.events.UPDATE,r.onDrawUpdate),u.on(l.events.DELETE,r.onDrawDelete),u.on(l.events.COMBINE_FEATURES,r.onDrawCombine),u.on(l.events.UNCOMBINE_FEATURES,r.onDrawUncombine),u.on(l.events.REPLACE,r.onDrawReplace),t.addEventListener("keydown",r.onKeydown))},removeEventListeners:function(){u&&(u.off(l.events.CREATE,r.onDrawCreate),u.off(l.events.UPDATE,r.onDrawUpdate),u.off(l.events.DELETE,r.onDrawDelete),u.off(l.events.COMBINE_FEATURES,r.onDrawCombine),u.off(l.events.UNCOMBINE_FEATURES,r.onDrawUncombine),u.off(l.events.REPLACE,r.onDrawReplace),t.removeEventListener("keydown",r.onKeydown))},undoHistory:function(){var t,e,n,r,i,o,s;a&&c&&((t=c.undoRecord())&&(1===t.getType()?0<(e=t.getFeatures()).length&&(e.map(function(t){a.add(p({},t,{type:t.type||l.geojsonTypes.FEATURE}))}),n=e.map(function(t){return t.id}),a.changeMode(l.modes.SIMPLE_SELECT,{featureIds:n})):2===t.getType()?(0<(n=t.getFeatures()).length&&(r=n.map(function(t){return t.id}),a.delete(r)),0<(r=t.getPrevFeatures()).length&&(r.map(function(t){a.add(p(t,{type:t.type||l.geojsonTypes.FEATURE}))}),i=r.map(function(t){return t.id}),a.changeMode(l.modes.SIMPLE_SELECT,{featureIds:i}))):3===t.getType()?0<(i=t.getFeatures()).length&&(o=i.map(function(t){return t.id}),a.delete(o)):4===t.getType()&&(0<(o=t.getFeatures()).length&&(s=o.map(function(t){return t.id}),a.delete(s)),0<(s=t.getPrevFeatures()).length&&(s.map(function(t){a.add(p(t,{type:t.type||l.geojsonTypes.FEATURE}))}),s=s.map(function(t){return t.id}),a.changeMode(l.modes.SIMPLE_SELECT,{featureIds:s}))),u.fire(l.events.UNDO,{record:t})))},redoHistory:function(){var t,e,n,r,i,o,s;a&&c&&((t=c.redoRecord())&&(a.getAll(),3===t.getType()?0<(e=t.getFeatures()).length&&(e.map(function(t){a.add(p(t,{type:t.type||l.geojsonTypes.FEATURE}))}),n=e.map(function(t){return t.id}),a.changeMode(l.modes.SIMPLE_SELECT,{featureIds:n})):2===t.getType()?(0<(n=t.getPrevFeatures()).length&&(r=n.map(function(t){return t.id}),a.delete(r)),0<(r=t.getFeatures()).length&&(r.map(function(t){a.add(p(t,{type:t.type||l.geojsonTypes.FEATURE}))}),i=r.map(function(t){return t.id}),a.changeMode(l.modes.SIMPLE_SELECT,{featureIds:i}))):1===t.getType()?0<(i=t.getFeatures()).length&&(o=i.map(function(t){return t.id}),a.delete(o)):4===t.getType()&&(0<(o=t.getPrevFeatures()).length&&(s=o.map(function(t){return t.id}),a.delete(s)),0<(s=t.getFeatures()).length&&(s.map(function(t){a.add(p(t,{type:t.type||l.geojsonTypes.FEATURE}))}),s=s.map(function(t){return t.id}),a.changeMode(l.modes.SIMPLE_SELECT,{featureIds:s}))),u.fire(l.events.REDO,{record:t})))}};return i}},{"../constants":170,"./history/record":176,xtend:168}],175:[function(t,e,n){"use strict";function r(){this.cursor=-1,this.recordes=[]}r.prototype.addRecord=function(t){return t&&(this.cursor+1<this.recordes.length&&(this.recordes=this.recordes.slice(0,this.cursor+1)),this.recordes.push(t),t=this.recordes.length,this.cursor=t-1),this},r.prototype.undoRecord=function(){var t=this.recordes.length,e=null;return 0===t&&(this.cursor=-1),0<t&&-1<this.cursor&&(e=this.recordes[this.cursor],this.cursor=this.cursor-1),e},r.prototype.redoRecord=function(){var t=this.recordes.length;0===t&&(this.cursor=-1);var e=null;return 0<t&&this.cursor<t-1&&(e=this.recordes[this.cursor+1],this.cursor=this.cursor+1),e},r.prototype.getCurrentRecord=function(){var t=this.recordes.length;if(0===t)return null;var e=null;return-1<this.cursor&&this.cursor<t&&(e=this.recordes[this.cursor]),e},r.prototype.getAllRecords=function(){return this.recordes},r.prototype.clear=function(){this.cursor=-1,this.recordes=[]},e.exports=r},{}],176:[function(t,e,n){"use strict";function r(t,e,n,r){this.type=t||0,this.action=e||0,this.features=n||[],this.prevFeatures=r||[]}r.prototype.getType=function(){return this.type||0},r.prototype.getAction=function(){return this.action||0},r.prototype.getFeatures=function(){return this.features||[]},r.prototype.getPrevFeatures=function(){return this.prevFeatures||[]},e.exports=r},{}],177:[function(t,e,n){"use strict";t("babel-plugin-transform-runtime");var o=t("xtend"),s=t("./edit_handler"),t={init:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,r={ctx:{}},i=s(r.ctx);return r.setOptions=function(t){return r=o(r,i.setOptions(t))},r.dispose=function(){return r=o(r,i.dispose())},r.undoOperation=function(){i.undoOperation()},r.redoOperation=function(){i.redoOperation()},r.onBtnCtrlActive=function(t,e){i.onBtnCtrlActive(t,e)},r.setFeatures=function(t){return i.setFeatures(t)},r.removeFeatures=function(t){return i.removeFeatures(t)},r.setSelected=function(t){return i.setSelected(t)},r.setFeatureProperties=function(t,e){return i.setFeatureProperties(t,e)},r.setFeaturePropertiesByIds=function(t,e){i.setFeaturePropertiesByIds(t,e)},r.setLockByIds=function(t,e){i.setLockByIds(t,e)},r.getAllHistoryRecords=function(){return i.getAllHistoryRecords()},r.clearHistoryRecords=function(){return i.clearHistoryRecords()},r.setCustomStyle=function(t,e){return i.setCustomStyle(t,e)},r.cancelCustomStyle=function(t){return i.cancelCustomStyle(t)},r.isDrawEnabled=function(){return i.isDrawEnabled()},r.disableDraw=function(){i.disableDraw()},r.enableDraw=function(){i.enableDraw()},r.isAdsorbEnabled=function(){return i.isAdsorbEnabled()},r.disableAdsorb=function(){i.disableAdsorb()},r.enableAdsorb=function(){i.enableAdsorb()},r=o(r,i.init(t,e,n))}};window.minemap&&(minemap.edit=t),e.exports=t},{"./edit_handler":173,"babel-plugin-transform-runtime":43,xtend:168}],178:[function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=t("./theme/point"),o=t("./theme/line"),s=t("./theme/fill"),t=t("./theme/symbol"),t=[].concat(r(i),r(o),r(s),r(t));e.exports=t},{"./theme/fill":180,"./theme/line":182,"./theme/point":184,"./theme/symbol":185}],179:[function(t,e,n){"use strict";e.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"],["==","custom_style","false"]],paint:{"fill-color":"#55B1F3","fill-outline-color":"#55B1F3","fill-opacity":.1}},{id:"gl-draw-polygon-fill-inactive-custom",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"],["==","custom_style","true"]],paint:{"fill-color":{property:"user_fillColor",type:"identity",default:"#55B1F3"},"fill-outline-color":{property:"user_fillOutlineColor",type:"identity",default:"#55B1F3"},"fill-opacity":{property:"user_fillOpacity",type:"identity",default:.1}}},{id:"gl-draw-polygon-fill-inactive-lock",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"],["!=","mode","static"],["==","custom_style","false"],["==","user_isLock",!0]],paint:{"fill-color":"#55B1F3","fill-outline-color":"#55B1F3","fill-opacity":.1}},{id:"gl-draw-polygon-fill-inactive-custom-lock",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"],["!=","mode","static"],["==","custom_style","true"],["==","user_isLock",!0]],paint:{"fill-color":{property:"user_fillColor",type:"identity",default:"#55B1F3"},"fill-outline-color":{property:"user_fillOutlineColor",type:"identity",default:"#55B1F3"},"fill-opacity":{property:"user_fillOpacity",type:"identity",default:.1}}}]},{}],180:[function(t,e,n){"use strict";t=t("./fill-base");e.exports=[{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"],["!=","user_isLock",!0]],paint:{"fill-color":"#F05668","fill-outline-color":"#F05668","fill-opacity":.1}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}}].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t))},{"./fill-base":179}],181:[function(t,e,n){"use strict";e.exports=[{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","false"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#55B1F3","line-width":2,"line-opacity":1}},{id:"gl-draw-polygon-stroke-inactive-custom1",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","true"],["!=","user_fillOutlineDasharray","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"user_fillOutlineColor",type:"identity",default:"#55B1F3"},"line-width":{property:"user_fillOutlineWidth",type:"identity",default:2},"line-opacity":{property:"user_fillOutlineOpacity",type:"identity",default:1}}},{id:"gl-draw-polygon-stroke-inactive-custom2",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","true"],["==","user_fillOutlineDasharray","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"user_fillOutlineColor",type:"identity",default:"#55B1F3"},"line-width":{property:"user_fillOutlineWidth",type:"identity",default:2},"line-opacity":{property:"user_fillOutlineOpacity",type:"identity",default:1},"line-dasharray":[.2,2]}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","false"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#55B1F3","line-width":2}},{id:"gl-draw-line-inactive-custom1",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","true"],["!=","user_lineDasharray","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"user_lineColor",type:"identity",default:"#55B1F3"},"line-width":{property:"user_lineWidth",type:"identity",default:2},"line-opacity":{property:"user_lineOpacity",type:"identity",default:1}}},{id:"gl-draw-line-inactive-custom2",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","true"],["==","user_lineDasharray","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"user_lineColor",type:"identity",default:"#55B1F3"},"line-width":{property:"user_lineWidth",type:"identity",default:2},"line-opacity":{property:"user_lineOpacity",type:"identity",default:1},"line-dasharray":[.2,2]}},{id:"gl-draw-polygon-stroke-inactive-lock",type:"line",filter:["all",["==","active","true"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","false"],["==","user_isLock",!0]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#55B1F3","line-width":2,"line-opacity":1}},{id:"gl-draw-polygon-stroke-inactive-custom1-lock",type:"line",filter:["all",["==","active","true"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","true"],["!=","user_fillOutlineDasharray","true"],["==","user_isLock",!0]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"user_fillOutlineColor",type:"identity",default:"#55B1F3"},"line-width":{property:"user_fillOutlineWidth",type:"identity",default:2},"line-opacity":{property:"user_fillOutlineOpacity",type:"identity",default:1}}},{id:"gl-draw-polygon-stroke-inactive-custom2-lock",type:"line",filter:["all",["==","active","true"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","true"],["==","user_fillOutlineDasharray","true"],["==","user_isLock",!0]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"user_fillOutlineColor",type:"identity",default:"#55B1F3"},"line-width":{property:"user_fillOutlineWidth",type:"identity",default:2},"line-opacity":{property:"user_fillOutlineOpacity",type:"identity",default:1},"line-dasharray":[.2,2]}},{id:"gl-draw-line-inactive-lock",type:"line",filter:["all",["==","active","true"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","false"],["==","user_isLock",!0]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#55B1F3","line-width":2}},{id:"gl-draw-line-inactive-custom1-lock",type:"line",filter:["all",["==","active","true"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","true"],["!=","user_lineDasharray","true"],["==","user_isLock",!0]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"user_lineColor",type:"identity",default:"#55B1F3"},"line-width":{property:"user_lineWidth",type:"identity",default:2},"line-opacity":{property:"user_lineOpacity",type:"identity",default:1}}},{id:"gl-draw-line-inactive-custom2-lock",type:"line",filter:["all",["==","active","true"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","true"],["==","user_lineDasharray","true"],["==","user_isLock",!0]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"user_lineColor",type:"identity",default:"#55B1F3"},"line-width":{property:"user_lineWidth",type:"identity",default:2},"line-opacity":{property:"user_lineOpacity",type:"identity",default:1},"line-dasharray":[.2,2]}}]},{}],182:[function(t,e,n){"use strict";t=t("./line-base");e.exports=[{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"],["!=","user_isLock",!0]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#F05668","line-dasharray":[.2,2],"line-width":2,"line-opacity":1}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","active","true"],["==","$type","LineString"],["!=","user_isLock",!0]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#F05668","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2,"line-opacity":1}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}}].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t))},{"./line-base":181}],183:[function(t,e,n){"use strict";e.exports=[{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","false"],["!=","feature_type","icon"],["!=","feature_type","text"]],paint:{"circle-radius":6,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-point-stroke-inactive-custom",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["!=","feature_type","icon"],["!=","feature_type","text"]],paint:{"circle-radius":{property:"user_circleBorderRadius",type:"identity",default:6},"circle-opacity":{property:"user_circleOpacity",type:"identity",default:1},"circle-color":{property:"user_circleBorderColor",type:"identity",default:"#ffffff"}}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","false"],["!=","feature_type","icon"],["!=","feature_type","text"]],paint:{"circle-radius":4,"circle-color":"#55B1F3"}},{id:"gl-draw-point-inactive-custom",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["!=","feature_type","icon"],["!=","feature_type","text"]],paint:{"circle-radius":{property:"user_circleRadius",type:"identity",default:4},"circle-opacity":{property:"user_circleOpacity",type:"identity",default:1},"circle-color":{property:"user_circleColor",type:"identity",default:"#55B1F3"}}},{id:"gl-draw-point-point-stroke-inactive-lock",type:"circle",filter:["all",["==","active","true"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","false"],["!=","feature_type","icon"],["!=","feature_type","text"],["==","user_isLock",!0]],paint:{"circle-radius":6,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-point-stroke-inactive-custom-lock",type:"circle",filter:["all",["==","active","true"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["!=","feature_type","icon"],["!=","feature_type","text"],["==","user_isLock",!0]],paint:{"circle-radius":{property:"user_circleBorderRadius",type:"identity",default:6},"circle-opacity":{property:"user_circleOpacity",type:"identity",default:1},"circle-color":{property:"user_circleBorderColor",type:"identity",default:"#ffffff"}}},{id:"gl-draw-point-inactive-lock",type:"circle",filter:["all",["==","active","true"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","false"],["!=","feature_type","icon"],["!=","feature_type","text"],["==","user_isLock",!0]],paint:{"circle-radius":4,"circle-color":"#55B1F3"}},{id:"gl-draw-point-inactive-custom-lock",type:"circle",filter:["all",["==","active","true"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["!=","feature_type","icon"],["!=","feature_type","text"],["==","user_isLock",!0]],paint:{"circle-radius":{property:"user_circleRadius",type:"identity",default:4},"circle-opacity":{property:"user_circleOpacity",type:"identity",default:1},"circle-color":{property:"user_circleColor",type:"identity",default:"#55B1F3"}}}]},{}],184:[function(t,e,n){"use strict";t=t("./point-base");e.exports=[{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"],["!=","feature_type","icon"],["!=","feature_type","text"],["!=","user_isLock",!0]],paint:{"circle-radius":6,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"],["!=","feature_type","icon"],["!=","feature_type","text"],["!=","user_isLock",!0]],paint:{"circle-radius":4,"circle-color":"#F05668"}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"],["!=","feature_type","icon"],["!=","user_isLock",!0]],paint:{"circle-radius":4,"circle-color":"#F05668"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"],["!=","feature_type","icon"],["!=","feature_type","text"],["!=","user_isLock",!0]],paint:{"circle-radius":8,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"],["!=","feature_type","icon"],["!=","feature_type","text"],["!=","user_isLock",!0]],paint:{"circle-radius":6,"circle-color":"#F05668"}},{id:"gl-draw-icon-stroke-active",type:"circle",filter:["all",["==","active","true"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["==","feature_type","icon"]],paint:{"circle-color":"#FFFFFF","circle-radius":32,"circle-blur":1,"circle-stroke-width":1,"circle-stroke-opacity":.5,"circle-stroke-color":"#FFFFFF"}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"],["!=","feature_type","icon"],["!=","feature_type","text"]],paint:{"circle-radius":4,"circle-color":"#404040"}}].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t))},{"./point-base":183}],185:[function(t,e,n){"use strict";e.exports=[{id:"gl-draw-icon-inactive",type:"symbol",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["==","feature_type","icon"]],layout:{"icon-image":{property:"user_iconImage",type:"identity",default:"marker-15-6"},"icon-size":{property:"user_iconSize",type:"identity",default:1},"icon-rotate":{property:"user_iconRotate",type:"identity",default:0},"icon-allow-overlap":!0,"icon-ignore-placement":!0},paint:{"icon-color":{property:"user_iconColor",type:"identity",default:"#000000"}}},{id:"gl-draw-icon-active",type:"symbol",filter:["all",["==","active","true"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["==","feature_type","icon"]],layout:{"icon-image":{property:"user_iconImage",type:"identity",default:"marker-15-6"},"icon-size":{property:"user_iconSize",type:"identity",default:1},"icon-rotate":{property:"user_iconRotate",type:"identity",default:0},"icon-allow-overlap":!0,"icon-ignore-placement":!0},paint:{"icon-color":{property:"user_iconColor",type:"identity",default:"#FFFFFF"}}},{id:"gl-draw-text-inactive",type:"symbol",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["==","feature_type","text"]],layout:{"text-field":{property:"user_textField",type:"identity",default:""},"text-size":{property:"user_textSize",type:"identity",default:11}},paint:{"text-color":{property:"user_textColor",type:"identity",default:"#544946"}}},{id:"gl-draw-text-active",type:"symbol",filter:["all",["==","active","true"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["==","feature_type","text"]],layout:{"text-field":{property:"user_textField",type:"identity",default:""},"text-size":{property:"user_textSize",type:"identity",default:11}},paint:{"text-color":{property:"user_textColor",type:"identity",default:"#544946"}}}]},{}],186:[function(t,e,n){"use strict";function r(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(0<=e))throw new Error("precision must be a positive number");e=Math.pow(10,e||0);return Math.round(t*e)/e}e.exports=function(t,e){if(!t||!e)return!1;if(2!==t.length||2!==e.length)return!1;t=[r(t[0],5),r(t[1],5)],e=[r(e[0],5),r(e[1],5)];return t[0]===e[0]&&t[1]===e[1]}},{}],187:[function(t,e,n){"use strict";var p=t("./lib/mode_handler"),h=t("./lib/get_features_and_set_cursor"),f=t("./lib/features_at"),d=t("./lib/is_click"),g=t("./lib/is_tap"),y=t("./constants"),_=t("./modes/object_to_mode");e.exports=function(i){var o=Object.keys(i.options.modes).reduce(function(t,e){return t[e]=_(i.options.modes[e]),t},{}),n={},r={},s={},a=null,u=null;s.drag=function(t,e){e({point:t.point,time:(new Date).getTime()})?(i.ui.queueMapClasses({mouse:y.cursors.DRAG}),u.drag(t)):t.originalEvent.stopPropagation()},s.mousedrag=function(t){s.drag(t,function(t){return!d(n,t)})},s.touchdrag=function(t){s.drag(t,function(t){return!g(r,t)})},s.mousemove=function(t){if(1===(void 0!==(t=h(t,i)).originalEvent.buttons?t.originalEvent.buttons:t.originalEvent.which))return s.mousedrag(t);u.mousemove(t)},s.mousedown=function(t){n={time:(new Date).getTime(),point:t.point},t=h(t,i),u.mousedown(t)},s.mouseup=function(t){var e={point:(t=h(t,i)).point,time:(new Date).getTime()};d(n,e)?u.click(t):u.mouseup(t)},s.mouseout=function(t){u.mouseout(t)},s.touchstart=function(t){var e;(t.originalEvent||t).preventDefault(),i.options.touchEnabled&&(r={time:(new Date).getTime(),point:t.point},e=f.touch(t,null,i),t.featureTarget=e[0],t.featureTargets=e,u.touchstart(t))},s.touchmove=function(t){if((t.originalEvent||t).preventDefault(),i.options.touchEnabled)return u.touchmove(t),s.touchdrag(t)},s.touchend=function(t){var e;(t.originalEvent||t).preventDefault(),i.options.touchEnabled&&(e=f.touch(t,null,i),t.featureTarget=e[0],t.featureTargets=e,g(r,{time:(new Date).getTime(),point:t.point})?u.tap(t):u.touchend(t))};function e(t){return!(8===t||46===t||48<=t&&t<=57)}function c(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};u.stop();var r=o[t];if(void 0===r)throw new Error(t+" is not valid");a=t;e=r(i,e);u=p(e,i),n.silent||i.map.fire(y.events.MODE_CHANGE,{mode:t}),i.store.setDirty(),i.store.render()}s.keydown=function(t){"minemap-canvas"===(t.srcElement||t.target).classList[0]&&(8!==t.keyCode&&46!==t.keyCode||!i.options.controls.trash?e(t.keyCode)?u.keydown(t):49===t.keyCode&&i.options.controls.point?c(y.modes.DRAW_POINT):50===t.keyCode&&i.options.controls.line_string?c(y.modes.DRAW_LINE_STRING):51===t.keyCode&&i.options.controls.polygon&&c(y.modes.DRAW_POLYGON):(t.preventDefault(),u.trash()))},s.keyup=function(t){e(t.keyCode)&&u.keyup(t)},s.zoomend=function(){i.store.changeZoom()};var l={trash:!(s.data=function(t){var e,n,r;"style"===t.dataType&&(e=i.setup,n=i.map,r=i.options,t=i.store,r.styles.some(function(t){return n.getLayer(t.id)})||(e.addLayers(),t.setDirty(),t.render()))}),combineFeatures:!1,uncombineFeatures:!1};return{start:function(){a=i.options.defaultMode,u=p(o[a](i),i)},changeMode:c,actionable:function(e){var n=!1;Object.keys(e).forEach(function(t){if(void 0===l[t])throw new Error("Invalid action type");l[t]!==e[t]&&(n=!0),l[t]=e[t]}),n&&i.map.fire(y.events.ACTIONABLE,{actions:l})},currentModeName:function(){return a},currentModeRender:function(t,e){return u.render(t,e)},fire:function(t,e){s[t]&&s[t](e)},addEventListeners:function(){i.map.on("mousemove",s.mousemove),i.map.on("mousedown",s.mousedown),i.map.on("mouseup",s.mouseup),i.map.on("data",s.data),i.container.addEventListener("mouseout",s.mouseout),i.options.keybindings&&(i.container.addEventListener("keydown",s.keydown),i.container.addEventListener("keyup",s.keyup))},removeEventListeners:function(){i.map.off("mousemove",s.mousemove),i.map.off("mousedown",s.mousedown),i.map.off("mouseup",s.mouseup),i.map.off("data",s.data),i.map.off("touchmove",s.touchmove),i.map.off("touchstart",s.touchstart),i.map.off("touchend",s.touchend),i.container.removeEventListener("mouseout",s.mouseout),i.options.keybindings&&(i.container.removeEventListener("keydown",s.keydown),i.container.removeEventListener("keyup",s.keyup))},trash:function(t){u.trash(t)},combineFeatures:function(){u.combineFeatures()},uncombineFeatures:function(){u.uncombineFeatures()},unionPolygon:function(){u.unionPolygon()},unionLine:function(){u.unionLine()},splitLine:function(){u.splitLine()},curveLine:function(){u.curveLine()},getMode:function(){return a}}}},{"./constants":170,"./lib/features_at":216,"./lib/get_features_and_set_cursor":217,"./lib/is_click":218,"./lib/is_tap":220,"./lib/mode_handler":222,"./modes/object_to_mode":254}],188:[function(t,e,n){"use strict";var i=t("@turf/helpers").lineString,o=t("@turf/bezier-spline").default,r=t("./feature"),t=function(t,e){r.call(this,t,e)};(t.prototype=Object.create(r.prototype)).isValid=function(){return 1<this.coordinates.length},t.prototype.addCoordinate=function(t,e,n){this.changed();t=parseInt(t,10);this.first=[e,n],this.coordinates.splice(t,0,[e,n])},t.prototype.getCoordinate=function(t){t=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},t.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},t.prototype.updateCoordinate=function(t,e,n){var r=parseInt(t,10);0===r?(this.properties.feature_type="arc",this.properties.first=[e,n],this.coordinates[r]=[e,n]):1===r?(this.properties.second=[e,n],this.coordinates[r]=[e,n]):2===r&&(this.properties.end=[e,n],this.coordinates=(t=this.properties.first,r=this.properties.second,o(i([t,[e,n],r]),{resolution:2e3,sharpness:.85}).geometry.coordinates)),this.changed()},e.exports=t},{"./feature":193,"@turf/bezier-spline":13,"@turf/helpers":21}],189:[function(t,e,n){"use strict";var g=t("@turf/helpers").round,r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n){this.changed();var r,i,o,s,a,u,c,l,p,h=t.split("."),f=parseInt(h[0],10),d=parseInt(h[1],10);0===d?(this.properties.feature_type="attack_arrow",this.properties.start=[e,n],this.coordinates[f][d]=[e,n]):1<=d&&(this.properties.end=[e,n],this.coordinates=(r=this.ctx.map,i=this.properties.start,o=this.properties.end,s=r.project(i),a=r.project(o),u=g(s.x,2),c=g(s.y,2),l=g(a.x,2),p=g(a.y,2),t=u+g((l-u)/4,2),h=c+g((p-c)/4,2),d=l-g((l-u)/3,2),e=p-g((p-c)/3,2),n=l-g((l-u)/4,2),s=p-g((p-c)/4,2),a=y(r,t,h,u,c,Math.PI/2),u=y(r,t,h,u,c,-Math.PI/2),c=y(r,d,e,l,p,Math.PI/3),d=y(r,d,e,l,p,-Math.PI/3),e=y(r,n,s,l,p,Math.PI/4),p=y(r,n,s,l,p,-Math.PI/4),[[i,u,e,c,o,d,p,a]])),void 0===this.coordinates[f]&&(this.coordinates[f]=[])};var y=function(t,e,n,r,i,o){n=n,i=i,o=o,i=[((e=e)-(r=r))*Math.cos(o)-(n-i)*Math.sin(o)+r,(e-r)*Math.sin(o)+(n-i)*Math.cos(o)+i],i=t.unproject(i);return[i.lng,i.lat]};e.exports=t},{"./feature":193,"@turf/helpers":21}],190:[function(t,e,n){"use strict";var r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),t=parseInt(r[0],10),r=parseInt(r[1],10);0===r&&(this.coordinates[t][r]=[e,n],this.properties.center=[e,n],this.properties.feature_type="circle",this.properties.radius=100),1===r&&(this.properties.radius=i(this.properties.center,[e,n]),this.coordinates=function(t,e,n){n=n||64;for(var r=t[1],i=t[0],e=e,o=[],s=e/(111.32*Math.cos(r*Math.PI/180)),a=e/110.574,u=void 0,c=void 0,l=void 0,p=0;p<n;p++)u=p/n*(2*Math.PI),c=s*Math.cos(u),l=a*Math.sin(u),o.push([i+c,r+l]);return o.push(o[0]),[o]}(this.properties.center,i(this.properties.center,[e,n]))),void 0===this.coordinates[t]&&(this.coordinates[t]=[])},e.exports=t;var o={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};function i(t,e){var n=Math.PI/180,r=n*(e[1]-t[1]),i=n*(e[0]-t[0]),t=n*t[1],e=n*e[1],e=Math.pow(Math.sin(r/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(t)*Math.cos(e);return function(t,e){if(void 0===(e=o[e||"kilometers"]))throw new Error("Invalid unit");return t*e}(2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e)),"kilometers")}},{"./feature":193}],191:[function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var o=t("@turf/helpers").lineString,s=t("@turf/bezier-spline").default,r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};function a(t,e){var n=1<arguments.length&&void 0!==e&&e;if(!t)return[[]];e=t[0];if(e.length<3)return t;if(n){var r=e.length;if(2<=r&&e[r-2][0]===e[r-1][0]&&e[r-2][1]===e[r-1][1]&&(e=e.slice(0,-1)),e.length<3)return t;r=s(o([].concat(i(e),[e[0]])),{resolution:5e3,sharpness:.85});return[[].concat(i(r.geometry.coordinates))]}r=e.slice(0,-1),r=s(o(r),{resolution:5e3,sharpness:.85}),r=[].concat(i(r.geometry.coordinates));return[[].concat(i(r),[e[e.length-1]])]}(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),t=parseInt(r[0],10),r=parseInt(r[1],10);void 0===this.initCoordinates&&(this.initCoordinates=[]),void 0===this.initCoordinates[t]&&(this.initCoordinates[t]=[]),0===r?(this.properties.feature_type="curve_polygon",this.properties.start=[e,n],this.initCoordinates[t][r]=[e,n],this.coordinates[t][r]=[e,n]):1<=r&&(this.initCoordinates[t][r]=[e,n],this.coordinates=a(this.initCoordinates)),void 0===this.coordinates[t]&&(this.coordinates[t]=[])},t.prototype.updateCoordinate2=function(){this.coordinates=a(this.initCoordinates,!0)},e.exports=t},{"./feature":193,"@turf/bezier-spline":13,"@turf/helpers":21}],192:[function(t,e,n){"use strict";var _=t("@turf/helpers").round,m=t("@turf/helpers").point,l=t("@turf/helpers").polygon,v=t("@turf/helpers").featureCollection,E=t("@turf/convex").default,p=t("@turf/bearing").default,h=t("@turf/distance").default,f=t("@turf/destination").default,d=t("@turf/transform-rotate").default,r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),t=parseInt(r[0],10),r=parseInt(r[1],10);0===r?(this.properties.feature_type="ellipse",this.properties.first=[e,n],this.coordinates[t][r]=[e,n]):1===r?(this.properties.second=[e,n],this.coordinates[t][r]=[e,n]):2===r&&(this.properties.end=[e,n],this.coordinates=function(t,e,n,r){var i=t.project(e),o=t.project(n),s=_(i.x,2),a=_(o.x,2),u=_(p(m(e),m(n))),c=90===u||-90===u?n:null,i=90===u||-90===u?r:null,o=0;c||(180<(o=(s<=a?90:-90)-u)&&(o-=360),o<-180&&(o+=360),o=360-o,n=h(m(e),m(n)),n=f(m(e),n,s<=a?90:-90),c=n.geometry.coordinates,180<(u=_(p(m(e),m(r)))+(s<=a?90:-90)-u)&&(u-=360),u<-180&&(u+=360),r=h(m(e),m(r)),u=f(m(e),r,u),i=u.geometry.coordinates);i=function(t,e,n,r){var i=t.project(e),o=t.project(n),s=t.project(r),a=_(i.x,2),u=_(i.y,2),r=_(o.x,2),i=_(o.y,2),o=_((a+r)/2,2),i=_((u+i)/2,2),u=Math.round(Math.pow(a-o,2)+Math.pow(u-i,2)),s=function(t,e,n,r,i){t=Math.pow(n-t,2),e=Math.pow(r-e,2);return Math.abs(Math.round(i*e/(i-t)))}(o,i,s.x,s.y,u),r=_((r-a)/32,2),c=function(t,e,n,r,i,o,s){for(var a=[],u=[],c=-1;c<=s+1;c++){var l=c;-1===c?l=.3:0===c?l=.6:c===s?l=s-.6:c===s+1&&(l=s-.3);var p=_(n+l*r,2),l=function(t,e,n,r){return Math.abs(_(Math.sqrt(r-r*Math.pow(e-t,2)/n),2))}(t,p,i,o);a.push([p,_(e-l,2)]),u.push([p,_(e+l,2)])}return[a,u]}(o,i,a,r,u,s,32),l=[];l.push(m(e));for(var p=0,h=c[0].length;p<h;p++){var f=t.unproject([c[0][p][0],c[0][p][1]]);l.push(m([_(f.lng,7),_(f.lat,7)]))}l.push(m(n));for(var d=0,g=c[0].length;d<g;d++){var y=t.unproject([c[1][d][0],c[1][d][1]]);l.push(m([_(y.lng,7),_(y.lat,7)]))}return E(v(l)).geometry.coordinates}(t,e,c,i),i=l(i);return[d(i,o,{pivot:e}).geometry.coordinates[0].slice(0,-1)]}(this.ctx.map,this.properties.first,this.properties.second,this.properties.end)),void 0===this.coordinates[t]&&(this.coordinates[t]=[])},e.exports=t},{"./feature":193,"@turf/bearing":12,"@turf/convex":18,"@turf/destination":19,"@turf/distance":20,"@turf/helpers":21,"@turf/transform-rotate":39}],193:[function(t,e,n){"use strict";var r=t("hat"),i=t("../constants"),t=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||r(),this.type=e.geometry.type};t.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},t.prototype.incomingCoords=function(t){this.setCoordinates(t)},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},t.prototype.setProperty=function(t,e){this.properties[t]=e},t.prototype.deleteProperty=function(t){this.properties.hasOwnProperty(t)&&delete this.properties[t]},t.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:i.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},t.prototype.internal=function(t){var e={id:this.id,meta:i.meta.FEATURE,"meta:type":this.type,active:i.activeStates.INACTIVE,mode:t,custom_style:i.customStyle.CLOSE};if(this.ctx.options.userProperties)for(var n in this.properties)"custom_style"===n?e.custom_style=this.properties[n]||i.customStyle.CLOSE:"feature_type"===n?e.feature_type=this.properties[n]:e["user_"+n]=this.properties[n];return{type:i.geojsonTypes.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}},e.exports=t},{"../constants":170,hat:48}],194:[function(t,e,n){"use strict";function c(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var h=t("@turf/helpers").round,p=t("@turf/helpers").lineString,a=t("@turf/length").default,u=t("@turf/line-slice-along").default,f=t("@turf/bezier-spline").default,r=t("./feature"),t=function(t,e){r.call(this,t,e)};(t.prototype=Object.create(r.prototype)).isValid=function(){return 1<this.coordinates.length},t.prototype.addCoordinate=function(t,e,n){this.changed();t=parseInt(t,10);this.coordinates.splice(t,0,[e,n])},t.prototype.getCoordinate=function(t){t=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},t.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},t.prototype.updateCoordinate=function(t,e,n,r,i){var o,s=parseInt(t,10);0===s?(this.properties.feature_type="line_arrow",this.properties.start=[e,n],this.coordinates[s]=[e,n]):1<=s&&(o=null,t=this.properties.start_knee_point,s=this.properties.end_knee_point,r&&i?this.properties.start&&this.properties.start[0]===r&&this.properties.start[1]===i?(this.properties.start=[e,n],o="start"):this.properties.end&&this.properties.end[0]===r&&this.properties.end[1]===i?(this.properties.end=[e,n],o="end"):t&&t[0]===r&&t[1]===i?(t=[e,n],o="start_knee_point"):s&&s[0]===r&&s[1]===i?(s=[e,n],o="end_knee_point"):["curve","curve-dashed"].includes(this.properties.shape_line_type)&&10<this.coordinates.length?(t=[e,n],s=[e,n],o="curve_knee_point"):this.properties.end=[e,n]:this.properties.end=[e,n],n={startArrowType:this.properties.shape_start_arrow_type||"none",endArrowType:this.properties.shape_end_arrow_type||"normal",lineType:this.properties.shape_line_type||"solid"},(o=function(t,e,n,r,i,o,s){var a=[];"solid"===e.lineType||"dashed"===e.lineType?a=[]:"elbow"===e.lineType||"elbow-dashed"===e.lineType?(a=function(t,e,n,r,i,o){var s=t.project(e),a=t.project(n),e=h(s.x,2),n=h(s.y,2),s=h(a.x,2),a=h(a.y,2),s=h((s+e)/2,2),a=h((a+n)/2,2),e=s-h((s-e)/2,2),n=a-h((a-n)/2,2),r=r&&"start_knee_point"===o?r:d(t,e,n,s,a,Math.PI/2),a=i&&"end_knee_point"===o?i:d(t,e,n,s,a,-Math.PI/2);return[r,a]}(t,n,r,i,o,s),i=a[0],o=a[1]):"curve"!==e.lineType&&"curve-dashed"!==e.lineType||(u=function(t,e,n,r,i,o){var s=t.project(e),a=t.project(n),u=h(s.x,2),c=h(s.y,2),l=h(a.x,2),s=h(a.y,2),a=h((l+u)/2,2),l=h((s+c)/2,2),s=a-h((a-u)/3,2),u=l-h((l-c)/3,2),c=d(t,s,u,a,l,Math.PI/10),a=d(t,s,u,a,l,Math.PI/10*11),l=r&&i&&"curve_knee_point"===o,o=l?g("curve",e,n,r,i):g("curve",e,n,c,a);if(o.start&&o.end){n=p(l?[o.start,r,o.end]:[o.start,c,[(e[0]+n[0])/2,(e[1]+n[1])/2],a,o.end]),n=f(n,{resolution:2e3,sharpness:.85});return{kneePoints:l?[r,i]:[o.start,o.end],coords:n.geometry.coordinates}}return{kneePoints:[c,a],coords:[c,a]}}(t,n,r,i,o,s),a=u.coords,i=u.kneePoints[0],o=u.kneePoints[1]);s=[];s="none"===e.startArrowType?l(0,"start",e.lineType,n,r):"normal"===e.startArrowType?_(t,"start",e.lineType,n,r,i,o):"hollow"===e.startArrowType?m(t,"start",e.lineType,n,r,i,o):"solid"===e.startArrowType?v(0,"start",e.lineType,n,r):l(0,"start",e.lineType,n,r);var u=[];u="none"===e.endArrowType?l(0,"end",e.lineType,n,r):("normal"===e.endArrowType?_:"hollow"===e.endArrowType?m:"solid"===e.endArrowType?v:_)(t,"end",e.lineType,n,r,i,o);"curve"!==e.lineType&&"curve-dashed"!==e.lineType||(o=i=null);return{start_knee_point:i,end_knee_point:o,coords:[].concat(c(s),c(a),c(u))}}(this.ctx.map,n,this.properties.start,this.properties.end,t,s,o)).start_knee_point?this.properties.start_knee_point=o.start_knee_point:delete this.properties.start_knee_point,o.end_knee_point?this.properties.end_knee_point=o.end_knee_point:delete this.properties.end_knee_point,this.coordinates=o.coords),this.changed()};var d=function(t,e,n,r,i,o){n=n,i=i,o=o,i=[((e=e)-(r=r))*Math.cos(o)-(n-i)*Math.sin(o)+r,(e-r)*Math.sin(o)+(n-i)*Math.cos(o)+i],i=t.unproject(i);return[i.lng,i.lat]},g=function(t,e,n,r,i){var o=null,s=null;return["elbow","curve","elbow-dashed","curve-dashed"].includes(t)&&e&&n&&e[0]!==n[0]&&e[1]!==n[1]&&r&&i&&(i=r[0]===i[0]&&r[1]===i[1]?p([e,r,n]):p([e,r,i,n]),n=a(i)/10,(n=u(i,n,9*n))&&0<n.geometry.coordinates.length&&(o=n.geometry.coordinates[0],s=n.geometry.coordinates[n.geometry.coordinates.length-1])),{start:o,end:s}},y=function(t,e,n,r,i,o,s){var a,u=0,c=0;return"start"===e?c=n.start?(a=t.project(n.start),u=h(a.x,2),h(a.y,2)):(u=r+h((o-r)/10,2),i+h((s-i)/10,2)):"end"===e&&(c=n.end?(n=t.project(n.end),u=h(n.x,2),h(n.y,2)):(u=o-h((o-r)/10,2),s-h((s-i)/10,2))),[u,c]};function l(t,e,n,r,i){return"start"===e?[r]:[i]}function _(t,e,n,r,i,o,s){var a=t.project(r),u=t.project(i),c=h(a.x,2),l=h(a.y,2),a=h(u.x,2),u=h(u.y,2),o=g(n,r,i,o,s),s=y(t,e,o,c,l,a,u),o=s[0],s=s[1];return"start"===e?[r,d(t,o,s,c,l,Math.PI/6),r,d(t,o,s,c,l,-Math.PI/6),r]:[i,d(t,o,s,a,u,Math.PI/6),i,d(t,o,s,a,u,-Math.PI/6),i]}function m(t,e,n,r,i,o,s){var a=t.project(r),u=t.project(i),c=h(a.x,2),l=h(a.y,2),a=h(u.x,2),u=h(u.y,2),o=g(n,r,i,o,s),s=y(t,e,o,c,l,a,u),o=s[0],s=s[1];if("start"===e){var e=d(t,o,s,c,l,Math.PI/9),l=d(t,o,s,c,l,-Math.PI/9),p=[(e[0]+l[0])/2,(e[1]+l[1])/2];return[p,e,r,l,p]}p=d(t,o,s,a,u,Math.PI/9),a=d(t,o,s,a,u,-Math.PI/9),u=[(p[0]+a[0])/2,(p[1]+a[1])/2];return[u,p,i,a,u]}function v(t,e,n,r,i){return"start"===e?[r]:[i]}e.exports=t},{"./feature":193,"@turf/bezier-spline":13,"@turf/helpers":21,"@turf/length":24,"@turf/line-slice-along":28}],195:[function(t,e,n){"use strict";var r=t("./feature"),t=function(t,e){r.call(this,t,e)};(t.prototype=Object.create(r.prototype)).isValid=function(){return 1<this.coordinates.length},t.prototype.addCoordinate=function(t,e,n){this.changed();t=parseInt(t,10);this.coordinates.splice(t,0,[e,n])},t.prototype.getCoordinate=function(t){t=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},t.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},t.prototype.updateCoordinate=function(t,e,n){t=parseInt(t,10);this.coordinates[t]=[e,n],this.changed()},e.exports=t},{"./feature":193}],196:[function(t,e,n){"use strict";function r(t,e,n,r,i){var o=n.split("."),n=parseInt(o[0],10),o=o[1]?o.slice(1).join("."):null;return t[n][e](o,r,i)}var i=t("./feature"),o=t("../constants"),s=t("hat"),a={MultiPoint:t("./point"),MultiLineString:t("./line_string"),MultiPolygon:t("./polygon")},t=function(t,e){if(i.call(this,t,e),delete this.coordinates,this.model=a[e.geometry.type],void 0===this.model)throw new TypeError(e.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(e.geometry.coordinates)};(t.prototype=Object.create(i.prototype))._coordinatesToFeatures=function(t){var e=this,n=this.model.bind(this);return t.map(function(t){return new n(e.ctx,{id:s(),type:o.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:t,type:e.type.replace("Multi","")}})})},t.prototype.isValid=function(){return this.features.every(function(t){return t.isValid()})},t.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},t.prototype.getCoordinate=function(t){return r(this.features,"getCoordinate",t)},t.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(t){return t.type===o.geojsonTypes.POLYGON?t.getCoordinates():t.coordinates})))},t.prototype.updateCoordinate=function(t,e,n){r(this.features,"updateCoordinate",t,e,n),this.changed()},t.prototype.addCoordinate=function(t,e,n){r(this.features,"addCoordinate",t,e,n),this.changed()},t.prototype.removeCoordinate=function(t){r(this.features,"removeCoordinate",t),this.changed()},t.prototype.getFeatures=function(){return this.features},e.exports=t},{"../constants":170,"./feature":193,"./line_string":195,"./point":200,"./polygon":201,hat:48}],197:[function(t,e,n){"use strict";function I(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var x=t("@turf/helpers").round,b=t("@turf/helpers").lineString,C=t("@turf/bezier-spline").default,r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n){this.changed();var r,i,o,s,a,u,c,l,p,h,f,d,g,y,_,m=t.split("."),v=parseInt(m[0],10),E=parseInt(m[1],10);0===E?(this.properties.feature_type="offensive_arrow",this.properties.start=[e,n],this.coordinates[v][E]=[e,n]):1===E?(this.properties.middle=[e,n],this.coordinates=(i=this.ctx.map,o=this.properties.start,s=this.properties.middle,a=i.project(o),u=i.project(s),c=x(a.x,2),l=x(a.y,2),p=x(u.x,2),h=x(u.y,2),f=c+x((p-c)/4,2),d=l+x((h-l)/4,2),g=p-x((p-c)/4,2),y=h-x((h-l)/4,2),_=p-x((p-c)/6,2),a=h-x((h-l)/6,2),u=S(i,f,d,c,l,Math.PI/2),c=S(i,f,d,c,l,-Math.PI/2),l=S(i,g,y,p,h,Math.PI/6),g=S(i,g,y,p,h,-Math.PI/6),y=S(i,_,a,p,h,Math.PI/9),h=S(i,_,a,p,h,-Math.PI/9),[[o,c,y,l,s,g,h,u]])):1<E&&(this.properties.end=[e,n],this.coordinates=(r=this.ctx.map,t=this.properties.start,m=this.properties.middle,f=this.properties.end,d=r.project(t),i=r.project(m),_=r.project(f),a=x(d.x,2),p=x(d.y,2),o=x(i.x,2),c=x(i.y,2),y=x(_.x,2),l=x(_.y,2),s=a+x((o-a)/3,2),g=p+x((c-p)/3,2),h=o-x((o-a)/3,2),u=c-x((c-p)/3,2),E=w(s,g,a,p,Math.PI/2),e=E[0],n=E[1],m=r.unproject(E),d=[m.lng,m.lat],i=w(s,g,a,p,-Math.PI/2),_=i[0],E=i[1],m=r.unproject(i),s=[m.lng,m.lat],g=w(h,u,o,c,Math.PI/2),a=g[0],p=g[1],i=r.unproject(g),m=[i.lng,i.lat],g=w(h,u,o,c,-Math.PI/2),i=g[0],h=g[1],u=r.unproject(g),g=[u.lng,u.lat],u=_+x((a-_)/2,2),_=E+x((p-E)/2,2),E=r.unproject([u,_]),u=[E.lng,E.lat],_=e+x((i-e)/2,2),E=n+x((h-n)/2,2),e=r.unproject([_,E]),n=[e.lng,e.lat],_=y-x((y-o)/4,2),E=l-x((l-c)/4,2),e=y-x((y-o)/6,2),o=l-x((l-c)/6,2),c=S(r,_,E,y,l,Math.PI/6),_=S(r,_,E,y,l,-Math.PI/6),E=S(r,e,o,y,l,Math.PI/9),o=S(r,e,o,y,l,-Math.PI/9),p=Math.pow(a-y,2)+Math.pow(p-l,2),l=Math.pow(i-y,2)+Math.pow(h-l,2),E=C(b(l<p?[s,m,E]:[s,u,E]),{resolution:3e3,sharpness:.85}),d=C(b(l<p?[o,n,d]:[o,g,d]),{resolution:3e3,sharpness:.85}),[[t].concat(I(E.geometry.coordinates),[c,f,_],I(d.geometry.coordinates))])),void 0===this.coordinates[v]&&(this.coordinates[v]=[])};var w=function(t,e,n,r,i){return[(t-n)*Math.cos(i)-(e-r)*Math.sin(i)+n,(t-n)*Math.sin(i)+(e-r)*Math.cos(i)+r]},S=function(t,e,n,r,i,o){o=w(e,n,r,i,o),o=t.unproject(o);return[o.lng,o.lat]};e.exports=t},{"./feature":193,"@turf/bezier-spline":13,"@turf/helpers":21}],198:[function(t,e,n){"use strict";function I(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var x=t("@turf/helpers").round,b=t("@turf/helpers").lineString,C=t("@turf/bezier-spline").default,r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n){this.changed();var r,i,o,s,a,u,c,l,p,h,f,d,g,y,_,m=t.split("."),v=parseInt(m[0],10),E=parseInt(m[1],10);0===E?(this.properties.feature_type="offensive_tail_arrow",this.properties.start=[e,n],this.coordinates[v][E]=[e,n]):1===E?(this.properties.middle=[e,n],this.coordinates=(i=this.ctx.map,o=this.properties.start,s=this.properties.middle,a=i.project(o),u=i.project(s),c=x(a.x,2),l=x(a.y,2),p=x(u.x,2),h=x(u.y,2),f=c+x((p-c)/4,2),d=l+x((h-l)/4,2),g=p-x((p-c)/4,2),y=h-x((h-l)/4,2),_=p-x((p-c)/6,2),o=h-x((h-l)/6,2),a=i.unproject([f,d]),u=[a.lng,a.lat],a=S(i,f,d,c,l,Math.PI/2),c=S(i,f,d,c,l,-Math.PI/2),l=S(i,g,y,p,h,Math.PI/6),g=S(i,g,y,p,h,-Math.PI/6),y=S(i,_,o,p,h,Math.PI/9),h=S(i,_,o,p,h,-Math.PI/9),[[u,c,y,l,s,g,h,a]])):1<E&&(this.properties.end=[e,n],this.coordinates=(r=this.ctx.map,t=this.properties.start,m=this.properties.middle,f=this.properties.end,d=r.project(t),i=r.project(m),_=r.project(f),o=x(d.x,2),p=x(d.y,2),u=x(i.x,2),c=x(i.y,2),y=x(_.x,2),l=x(_.y,2),s=o+x((u-o)/3,2),g=p+x((c-p)/3,2),h=u-x((u-o)/3,2),a=c-x((c-p)/3,2),E=r.unproject([s,g]),e=[E.lng,E.lat],n=w(s,g,o,p,Math.PI/2),t=n[0],m=n[1],d=r.unproject(n),i=[d.lng,d.lat],_=w(s,g,o,p,-Math.PI/2),E=_[0],n=_[1],d=r.unproject(_),s=[d.lng,d.lat],g=w(h,a,u,c,Math.PI/2),o=g[0],p=g[1],_=r.unproject(g),d=[_.lng,_.lat],g=w(h,a,u,c,-Math.PI/2),_=g[0],h=g[1],a=r.unproject(g),g=[a.lng,a.lat],a=E+x((o-E)/2,2),E=n+x((p-n)/2,2),n=r.unproject([a,E]),a=[n.lng,n.lat],E=t+x((_-t)/2,2),n=m+x((h-m)/2,2),t=r.unproject([E,n]),m=[t.lng,t.lat],E=y-x((y-u)/4,2),n=l-x((l-c)/4,2),t=y-x((y-u)/6,2),u=l-x((l-c)/6,2),c=S(r,E,n,y,l,Math.PI/6),E=S(r,E,n,y,l,-Math.PI/6),n=S(r,t,u,y,l,Math.PI/9),u=S(r,t,u,y,l,-Math.PI/9),p=Math.pow(o-y,2)+Math.pow(p-l,2),l=Math.pow(_-y,2)+Math.pow(h-l,2),n=C(b(l<p?[s,d,n]:[s,a,n]),{resolution:3e3,sharpness:.85}),i=C(b(l<p?[u,m,i]:[u,g,i]),{resolution:3e3,sharpness:.85}),[[e].concat(I(n.geometry.coordinates),[c,f,E],I(i.geometry.coordinates))])),void 0===this.coordinates[v]&&(this.coordinates[v]=[])};var w=function(t,e,n,r,i){return[(t-n)*Math.cos(i)-(e-r)*Math.sin(i)+n,(t-n)*Math.sin(i)+(e-r)*Math.cos(i)+r]},S=function(t,e,n,r,i,o){o=w(e,n,r,i,o),o=t.unproject(o);return[o.lng,o.lat]};e.exports=t},{"./feature":193,"@turf/bezier-spline":13,"@turf/helpers":21}],199:[function(t,e,n){"use strict";function q(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var Y=t("@turf/helpers").round,X=t("@turf/helpers").lineString,W=t("@turf/bezier-spline").default,r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n,r,i){this.changed();var o=t.split("."),s=parseInt(o[0],10),a=parseInt(o[1],10);0===a?(this.properties.feature_type="pincer_attack_arrow",this.properties.start=[e,n],this.coordinates[s][a]=[e,n]):1===a?(this.properties.middle=[e,n],this.coordinates[s][a]=[e,n]):1<a&&(a=o=t=null,this.properties.arrow1&&this.properties.arrow2&&2===this.properties.arrow1.length&&2===this.properties.arrow2.length&&this.properties.end&&(this.properties.arrow1[0]===r&&this.properties.arrow1[1]===i?(t=[e,n],o=this.properties.arrow2,a=this.properties.end):this.properties.arrow2[0]===r&&this.properties.arrow2[1]===i&&(t=this.properties.arrow1,o=[e,n],a=this.properties.end)),a=a||[e,n],this.properties.end=a,o=function(t,e,n,r,i,o){var s=t.project(e),a=t.project(n),u=t.project(r),c=Y(s.x,2),l=Y(s.y,2),p=Y(a.x,2),h=Y(a.y,2),f=Y((c+p)/2,2),d=Y((l+h)/2,2),g=Y(u.x,2),y=Y(u.y,2),_=p+g-f,m=h+y-d,v=c+g-f,E=l+y-d,I=p+Y((f-p)/2,2),x=h+Y((d-h)/2,2),b=c+Y((f-c)/2,2),C=l+Y((d-l)/2,2),w=g-Y((g-_)/3,2),S=y-Y((y-m)/3,2),N=g-Y((g-v)/3,2),T=y-Y((y-E)/3,2);i&&o&&(B=t.project(i),z=t.project(o),w=Y(B.x,2),S=Y(B.y,2),N=Y(z.x,2),T=Y(z.y,2));var L=f+Y((g-f)/4,2),O=d+Y((y-d)/4,2),M=t.unproject([f,d]),P=[M.lng,M.lat],A=t.unproject([L,O]),R=[A.lng,A.lat],F=t.unproject([w,S]),D=[F.lng,F.lat],j=t.unproject([N,T]),k=[j.lng,j.lat],G=w-Y((w-p)/6,2),U=S-Y((S-h)/6,2),V=w-Y((w-p)/9,2),r=S-Y((S-h)/9,2),s=J(G,U,w,S,Math.PI/4),a=J(G,U,w,S,-Math.PI/4),u=s[0],_=s[1],m=a[0],v=a[1],E=H(t,G,U,w,S,Math.PI/9),i=H(t,G,U,w,S,-Math.PI/9),o=J(V,r,w,S,Math.PI/18),B=J(V,r,w,S,-Math.PI/18),z=o[0],g=o[1],y=B[0],f=B[1],d=t.unproject([z,g]),M=[d.lng,d.lat],A=t.unproject([y,f]),F=[A.lng,A.lat],j=N-Y((N-c)/6,2),s=T-Y((T-l)/6,2),a=N-Y((N-c)/9,2),G=T-Y((T-l)/9,2),U=J(j,s,N,T,Math.PI/4),V=J(j,s,N,T,-Math.PI/4),r=U[0],w=U[1],S=V[0],o=V[1],B=J(j,s,N,T,Math.PI/9),d=J(j,s,N,T,-Math.PI/9),A=B[0],U=B[1],V=d[0],j=d[1],s=t.unproject([A,U]),B=[s.lng,s.lat],d=t.unproject([V,j]),A=[d.lng,d.lat],U=J(a,G,N,T,Math.PI/18),s=J(a,G,N,T,-Math.PI/18),V=U[0],j=U[1],d=s[0],a=s[1],G=t.unproject([V,j]),N=[G.lng,G.lat],T=t.unproject([d,a]),U=[T.lng,T.lat],s=Math.pow(z-L,2)+Math.pow(g-O,2),G=Math.pow(y-L,2)+Math.pow(f-O,2),T=Math.pow(V-L,2)+Math.pow(j-O,2),O=Math.pow(d-L,2)+Math.pow(a-O,2),p=G<s?p+Y((u-p)/2,2):p+Y((m-p)/2,2),h=G<s?h+Y((_-h)/2,2):h+Y((v-h)/2,2),h=t.unproject([p,h]),h=[h.lng,h.lat],c=T<O?c+Y((S-c)/2,2):c+Y((r-c)/2,2),l=T<O?l+Y((o-l)/2,2):l+Y((w-l)/2,2),l=t.unproject([c,l]),l=[l.lng,l.lat],M=G<s?[n,h,M,E,D,i,F]:[n,h,F,i,D,E,M],e=T<O?[N,B,k,A,U,l,e]:[U,A,k,B,N,l,e],z=G<s?y+Y((I-y)/2,2):z+Y((I-z)/2,2),g=G<s?f+Y((x-f)/2,2):g+Y((x-g)/2,2),g=t.unproject([z,g]),g=[g.lng,g.lat],d=T<O?V+Y((b-V)/2,2):d+Y((b-d)/2,2),a=T<O?j+Y((C-j)/2,2):a+Y((C-a)/2,2),d=t.unproject([d,a]),a=[d.lng,d.lat],d=W(X([M[0],M[1],M[2]]),{resolution:3e3,sharpness:.85}),R=W(X([M[6],g,R,a,e[0]]),{resolution:3e3,sharpness:.85}),a=W(X([e[4],e[5],e[6]]),{resolution:3e3,sharpness:.85}),a=[[P].concat(q(d.geometry.coordinates),[M[3],M[4],M[5]],q(R.geometry.coordinates),[e[1],e[2],e[3]],q(a.geometry.coordinates))];return{arrow1:D,arrow2:k,coords:a}}(this.ctx.map,this.properties.start,this.properties.middle,this.properties.end,t,o),this.properties.arrow1=o.arrow1,this.properties.arrow2=o.arrow2,this.coordinates=o.coords),void 0===this.coordinates[s]&&(this.coordinates[s]=[])};var J=function(t,e,n,r,i){return[(t-n)*Math.cos(i)-(e-r)*Math.sin(i)+n,(t-n)*Math.sin(i)+(e-r)*Math.cos(i)+r]},H=function(t,e,n,r,i,o){o=J(e,n,r,i,o),o=t.unproject(o);return[o.lng,o.lat]};e.exports=t},{"./feature":193,"@turf/bezier-spline":13,"@turf/helpers":21}],200:[function(t,e,n){"use strict";var r=t("./feature"),t=function(t,e){r.call(this,t,e)};(t.prototype=Object.create(r.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},t.prototype.updateCoordinate=function(t,e,n){this.coordinates=3===arguments.length?[e,n]:[t,e],this.changed()},t.prototype.getCoordinate=function(){return this.getCoordinates()},e.exports=t},{"./feature":193}],201:[function(t,e,n){"use strict";var r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),t=parseInt(r[0],10),r=parseInt(r[1],10);void 0===this.coordinates[t]&&(this.coordinates[t]=[]),this.coordinates[t][r]=[e,n]},e.exports=t},{"./feature":193}],202:[function(t,e,n){"use strict";var r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),t=parseInt(r[0],10),r=parseInt(r[1],10);0===r?(this.properties.feature_type="rectangle",this.properties.start=[e,n],this.coordinates[t][r]=[e,n]):1===r&&(this.properties.end=[e,n],this.coordinates=function(n,t){var e=n[0],r=n[1],i=t[0],t=t[1];i<e&&(o=e,e=i,i=o);{var o;t<r&&(o=r,r=t,t=o)}var t=[e,r,i,t],s=[[t[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]]],a=0;s.map(function(t,e){return n[0]===t[0]&&n[1]===t[1]&&(a=e),null});for(var u=[],c=a;c<s.length;c++)u.push(s[c]);for(var l=0;l<a;l++)u.push(s[l]);return[u]}(this.properties.start,[e,n])),void 0===this.coordinates[t]&&(this.coordinates[t]=[])},e.exports=t},{"./feature":193}],203:[function(t,e,n){"use strict";var o=t("@turf/bearing").default,s=t("@turf/sector").default,a=t("@turf/distance").default,r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),i=parseInt(r[0],10),t=parseInt(r[1],10);0===t?(this.properties.feature_type="sector",this.properties.center=[e,n],this.coordinates[i][t]=[e,n]):1===t?(this.properties.start=[e,n],this.coordinates[i][t]=[e,n]):2===t&&(this.properties.end=[e,n],this.coordinates=(r=this.properties.center,t=this.properties.start,e=[e,n],n=o(r,t),e=o(r,e),t=a(r,t),[s(r,t,n,e).geometry.coordinates[0].slice(0,-1)])),void 0===this.coordinates[i]&&(this.coordinates[i]=[])},e.exports=t},{"./feature":193,"@turf/bearing":12,"@turf/distance":20,"@turf/sector":37}],204:[function(t,e,n){"use strict";var g=t("@turf/helpers").round,r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n){this.changed();var r,i,o,s,a,u,c,l,p,h=t.split("."),f=parseInt(h[0],10),d=parseInt(h[1],10);0===d?(this.properties.feature_type="thin_straight_arrow",this.properties.start=[e,n],this.coordinates[f][d]=[e,n]):1<=d&&(this.properties.end=[e,n],this.coordinates=(r=this.ctx.map,i=this.properties.start,o=this.properties.end,s=r.project(i),a=r.project(o),u=g(s.x,2),c=g(s.y,2),l=g(a.x,2),p=g(a.y,2),t=u+g((l-u)/6,2),h=c+g((p-c)/6,2),d=l-g((l-u)/4,2),e=p-g((p-c)/4,2),n=l-g((l-u)/6,2),s=p-g((p-c)/6,2),a=y(r,t,h,u,c,Math.PI/2),u=y(r,t,h,u,c,-Math.PI/2),c=y(r,d,e,l,p,Math.PI/6),d=y(r,d,e,l,p,-Math.PI/6),e=y(r,n,s,l,p,Math.PI/9),p=y(r,n,s,l,p,-Math.PI/9),[[i,u,e,c,o,d,p,a]])),void 0===this.coordinates[f]&&(this.coordinates[f]=[])};var y=function(t,e,n,r,i,o){n=n,i=i,o=o,i=[((e=e)-(r=r))*Math.cos(o)-(n-i)*Math.sin(o)+r,(e-r)*Math.sin(o)+(n-i)*Math.cos(o)+i],i=t.unproject(i);return[i.lng,i.lat]};e.exports=t},{"./feature":193,"@turf/helpers":21}],205:[function(t,e,n){"use strict";var g=t("@turf/helpers").round,r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n){this.changed();var r,i,o,s,a,u,c,l,p,h=t.split("."),f=parseInt(h[0],10),d=parseInt(h[1],10);0===d?(this.properties.feature_type="thin_tail_arrow",this.properties.start=[e,n],this.coordinates[f][d]=[e,n]):1<=d&&(this.properties.end=[e,n],this.coordinates=(r=this.ctx.map,i=this.properties.start,o=this.properties.end,s=r.project(i),a=r.project(o),u=g(s.x,2),c=g(s.y,2),l=g(a.x,2),p=g(a.y,2),t=u+g((l-u)/6,2),h=c+g((p-c)/6,2),d=l-g((l-u)/4,2),e=p-g((p-c)/4,2),n=l-g((l-u)/6,2),i=p-g((p-c)/6,2),s=r.unproject([t,h]),a=[s.lng,s.lat],s=y(r,t,h,u,c,Math.PI/2),u=y(r,t,h,u,c,-Math.PI/2),c=y(r,d,e,l,p,Math.PI/6),d=y(r,d,e,l,p,-Math.PI/6),e=y(r,n,i,l,p,Math.PI/9),p=y(r,n,i,l,p,-Math.PI/9),[[a,u,e,c,o,d,p,s]])),void 0===this.coordinates[f]&&(this.coordinates[f]=[])};var y=function(t,e,n,r,i,o){n=n,i=i,o=o,i=[((e=e)-(r=r))*Math.cos(o)-(n-i)*Math.sin(o)+r,(e-r)*Math.sin(o)+(n-i)*Math.cos(o)+i],i=t.unproject(i);return[i.lng,i.lat]};e.exports=t},{"./feature":193,"@turf/helpers":21}],206:[function(t,e,n){"use strict";var r=t("./feature"),t=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(t.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},t.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.addCoordinate=function(t,e,n){this.changed();t=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[t[0]].splice(t[1],0,[e,n])},t.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];t&&(t.splice(e[1],1),t.length<3&&this.coordinates.splice(e[0],1))},t.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),t=this.coordinates[e[0]];return JSON.parse(JSON.stringify(t[e[1]]))},t.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},t.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),t=parseInt(r[0],10),r=parseInt(r[1],10);0===r?(this.properties.feature_type="triangle",this.properties.start=[e,n],this.coordinates[t][r]=[e,n]):1===r?(this.properties.middle=[e,n],this.coordinates[t][r]=[e,n]):2===r&&(this.properties.end=[e,n],this.coordinates[t][r]=[e,n]),void 0===this.coordinates[t]&&(this.coordinates[t]=[])},e.exports=t},{"./feature":193}],207:[function(t,e,n){"use strict";var p=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},h=t("../constants").customStyle,f={color:["fillColor","fillOutlineColor","lineColor","circleBorderColor","circleColor"],opacity:["fillOpacity","lineOpacity","fillOutlineOpacity"],width:["fillOutlineWidth","lineWidth","circleBorderRadius","circleRadius"],dasharray:["fillOutlineDasharray","lineDasharray"],icon:["iconImage","iconSize","iconRotate"]};e.exports={setStyleProperties:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t.setProperty("custom_style",h.OPEN);var n=!0,r=!1,i=void 0;try{for(var o=Object.entries(e)[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var s,a,u=p(l.value,2),c=u[0],l=u[1];f.color.includes(c)&&t.setProperty(c,l||"#55B1F3"),f.opacity.includes(c)&&((s=void 0===l?.1:parseFloat(l))<0&&(s=0),t.setProperty(c,s)),f.width.includes(c)&&((u=void 0===l?1:parseFloat(l))<0&&(u=0),"circleBorderRadius"===c&&(s=void 0===e.circleRadius?void 0:parseFloat(e.circleRadius),u+=parseFloat(s||t.properties.circleRadius||4)),t.setProperty(c,u)),f.dasharray.includes(c)&&t.setProperty(c,l||h.CLOSE),f.icon.includes(c)&&("iconImage"===c?(a=void 0===l?"":l,t.setProperty(c,a)):"iconSize"===c?((a=void 0===l?1:parseFloat(l))<0&&(a=0),t.setProperty(c,a)):"iconRotate"===c&&(l=void 0===l?0:parseFloat(l),t.setProperty(c,l)))}}catch(t){r=!0,i=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}},deleteAllStyleProperties:function(e){e.deleteProperty("custom_style"),f.color.forEach(function(t){e.deleteProperty(t)}),f.opacity.forEach(function(t){e.deleteProperty(t)}),f.width.forEach(function(t){e.deleteProperty(t)}),f.dasharray.forEach(function(t){e.deleteProperty(t)})}}},{"../constants":170}],208:[function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e,n,r,i){return t=0<arguments.length&&void 0!==t?t:{},n=2<arguments.length&&void 0!==n?n:{},i=4<arguments.length&&void 0!==i?i:4,"circle-radius"===e&&"circleBorderRadius"===r?void 0!==n.circleBorderRadius?o({},e,void 0!==n.circleRadius?n.circleRadius+n.circleBorderRadius:i+n.circleBorderRadius):{}:o({},e,void 0!==n[r]?n[r]:t[e])}var i=t("xtend");e.exports=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return arguments[1].map(function(t){switch(t.id){case"gl-draw-polygon-fill-inactive":return i(t,{paint:i(t.paint,r(t.paint,"fill-color",e.inactive,"fillColor"),r(t.paint,"fill-outline-color",e.inactive,"fillOutlineColor"),r(t.paint,"fill-opacity",e.inactive,"fillOpacity"))});case"gl-draw-polygon-fill-inactive-custom":return i(t,{paint:i(t.paint,r(t.paint,"fill-color",e.inactive,"user_fillColor"),r(t.paint,"fill-outline-color",e.inactive,"user_fillOutlineColor"),r(t.paint,"fill-opacity",e.inactive,"user_fillOpacity"))});case"gl-draw-polygon-fill-inactive-lock":return i(t,{paint:i(t.paint,r(t.paint,"fill-color",e.inactive,"fillColor"),r(t.paint,"fill-outline-color",e.inactive,"fillOutlineColor"),r(t.paint,"fill-opacity",e.inactive,"fillOpacity"))});case"gl-draw-polygon-fill-inactive-custom-lock":return i(t,{paint:i(t.paint,r(t.paint,"fill-color",e.inactive,"user_fillColor"),r(t.paint,"fill-outline-color",e.inactive,"user_fillOutlineColor"),r(t.paint,"fill-opacity",e.inactive,"user_fillOpacity"))});case"gl-draw-polygon-fill-active":return i(t,{paint:i(t.paint,r(t.paint,"fill-color",e.active,"fillColor"),r(t.paint,"fill-outline-color",e.active,"fillOutlineColor"),r(t.paint,"fill-opacity",e.active,"fillOpacity"))});case"gl-draw-polygon-stroke-inactive":return i(t,{paint:i(t.paint,r(t.paint,"line-color",e.inactive,"fillOutlineColor"),r(t.paint,"line-width",e.inactive,"fillOutlineWidth"),r(t.paint,"line-opacity",e.inactive,"fillOutlineOpacity"))});case"gl-draw-polygon-stroke-inactive-custom1":case"gl-draw-polygon-stroke-inactive-custom2":return i(t,{paint:i(t.paint,r(t.paint,"line-color",e.inactive,"user_fillOutlineColor"),r(t.paint,"line-width",e.inactive,"user_fillOutlineWidth"),r(t.paint,"line-opacity",e.inactive,"user_fillOutlineOpacity"))});case"gl-draw-polygon-stroke-inactive-lock":return i(t,{paint:i(t.paint,r(t.paint,"line-color",e.inactive,"fillOutlineColor"),r(t.paint,"line-width",e.inactive,"fillOutlineWidth"),r(t.paint,"line-opacity",e.inactive,"fillOutlineOpacity"))});case"gl-draw-polygon-stroke-inactive-custom1-lock":case"gl-draw-polygon-stroke-inactive-custom2-lock":return i(t,{paint:i(t.paint,r(t.paint,"line-color",e.inactive,"user_fillOutlineColor"),r(t.paint,"line-width",e.inactive,"user_fillOutlineWidth"),r(t.paint,"line-opacity",e.inactive,"user_fillOutlineOpacity"))});case"gl-draw-polygon-stroke-active":return i(t,{paint:i(t.paint,r(t.paint,"line-color",e.active,"fillOutlineColor"),r(t.paint,"line-width",e.active,"fillOutlineWidth"),r(t.paint,"line-opacity",e.active,"fillOutlineOpacity"))});case"gl-draw-line-inactive":return i(t,{paint:i(t.paint,r(t.paint,"line-color",e.inactive,"lineColor"),r(t.paint,"line-width",e.inactive,"lineWidth"))});case"gl-draw-line-inactive-custom1":case"gl-draw-line-inactive-custom2":return i(t,{paint:i(t.paint,r(t.paint,"line-color",e.inactive,"user_lineColor"),r(t.paint,"line-opacity",e.inactive,"user_lineOpacity"),r(t.paint,"line-width",e.inactive,"user_lineWidth"))});case"gl-draw-line-inactive-lock":return i(t,{paint:i(t.paint,r(t.paint,"line-color",e.inactive,"lineColor"),r(t.paint,"line-width",e.inactive,"lineWidth"))});case"gl-draw-line-inactive-custom1-lock":case"gl-draw-line-inactive-custom2-lock":return i(t,{paint:i(t.paint,r(t.paint,"line-color",e.inactive,"user_lineColor"),r(t.paint,"line-opacity",e.inactive,"user_lineOpacity"),r(t.paint,"line-width",e.inactive,"user_lineWidth"))});case"gl-draw-line-active":return i(t,{paint:i(t.paint,r(t.paint,"line-color",e.active,"lineColor"),r(t.paint,"line-width",e.active,"lineWidth"))});case"gl-draw-polygon-midpoint":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.active,"circleColor"),r(t.paint,"circle-radius",e.inactive,"circleRadius",4))});case"gl-draw-polygon-and-line-vertex-stroke-inactive":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.inactive,"circleBorderColor"),r(t.paint,"circle-radius",e.inactive,"circleBorderRadius",4))});case"gl-draw-polygon-and-line-vertex-inactive":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.active,"circleColor"),r(t.paint,"circle-radius",e.inactive,"circleRadius",4))});case"gl-draw-point-point-stroke-inactive":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.inactive,"circleBorderColor"),r(t.paint,"circle-radius",e.inactive,"circleBorderRadius",4))});case"gl-draw-point-point-stroke-inactive-custom":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.inactive,"user_circleBorderColor"),r(t.paint,"circle-opacity",e.inactive,"user_circleOpacity"),r(t.paint,"circle-radius",e.inactive,"user_circleBorderRadius",4))});case"gl-draw-point-point-stroke-inactive-lock":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.inactive,"circleBorderColor"),r(t.paint,"circle-radius",e.inactive,"circleBorderRadius",4))});case"gl-draw-point-point-stroke-inactive-custom-lock":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.inactive,"user_circleBorderColor"),r(t.paint,"circle-opacity",e.inactive,"user_circleOpacity"),r(t.paint,"circle-radius",e.inactive,"user_circleBorderRadius",4))});case"gl-draw-point-inactive":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.inactive,"circleColor"),r(t.paint,"circle-radius",e.inactive,"circleRadius"))});case"gl-draw-point-inactive-custom":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.inactive,"circluser_circleBorderColoreColor"),r(t.paint,"circle-opacity",e.inactive,"user_circleOpacity"),r(t.paint,"circle-radius",e.inactive,"user_circleBorderRadius"))});case"gl-draw-point-inactive-lock":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.inactive,"circleColor"),r(t.paint,"circle-radius",e.inactive,"circleRadius"))});case"gl-draw-point-inactive-custom-lock":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.inactive,"circluser_circleBorderColoreColor"),r(t.paint,"circle-opacity",e.inactive,"user_circleOpacity"),r(t.paint,"circle-radius",e.inactive,"user_circleBorderRadius"))});case"gl-draw-point-stroke-active":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.active,"circleBorderColor"),r(t.paint,"circle-radius",e.active,"circleBorderRadius",6))});case"gl-draw-point-active":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.active,"circleColor"),r(t.paint,"circle-radius",e.active,"circleRadius"))});case"gl-draw-icon-stroke-active":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.active,"circleColor"))});case"gl-draw-polygon-fill-static":return i(t,{paint:i(t.paint,r(t.paint,"fill-color",e.static,"fillColor"),r(t.paint,"fill-outline-color",e.static,"fillOutlineColor"),r(t.paint,"fill-opacity",e.static,"fillOpacity"))});case"gl-draw-polygon-stroke-static":return i(t,{paint:i(t.paint,r(t.paint,"line-color",e.static,"fillOutlineColor"),r(t.paint,"line-width",e.static,"fillOutlineWidth"),r(t.paint,"line-opacity",e.static,"fillOutlineOpacity"))});case"gl-draw-line-static":return i(t,{paint:i(t.paint,r(t.paint,"line-color",e.static,"lineColor"),r(t.paint,"line-width",e.static,"lineWidth"))});case"gl-draw-point-static":return i(t,{paint:i(t.paint,r(t.paint,"circle-color",e.static,"circleColor"),r(t.paint,"circle-radius",e.static,"circleRadius"))});case"gl-draw-text-inactive":case"gl-draw-text-active":return i(t,{layout:i(t.layout,r(t.layout,"text-field",e.static,"user_textField"),r(t.layout,"text-size",e.static,"user_textSize")),paint:i(t.paint,r(t.paint,"text-color",e.static,"user_textColor"))})}return t})}},{xtend:168}],209:[function(t,e,n){"use strict";var r=t("../constants");e.exports={isOfMetaType:function(e){return function(t){t=t.featureTarget;return!!t&&(!!t.properties&&t.properties.meta===e)}},isShiftMousedown:function(t){return!!t.originalEvent&&(!!t.originalEvent.shiftKey&&0===t.originalEvent.button)},isActiveFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===r.activeStates.ACTIVE&&t.featureTarget.properties.meta===r.meta.FEATURE))},isInactiveFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===r.activeStates.INACTIVE&&t.featureTarget.properties.meta===r.meta.FEATURE))},noTarget:function(t){return void 0===t.featureTarget},isFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&t.featureTarget.properties.meta===r.meta.FEATURE)},isVertex:function(t){t=t.featureTarget;return!!t&&(!!t.properties&&t.properties.meta===r.meta.VERTEX)},isShiftDown:function(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey},isEscapeKey:function(t){return 27===t.keyCode},isEnterKey:function(t){return 13===t.keyCode},true:function(){return!0}}},{"../constants":170}],210:[function(t,e,n){"use strict";var l=t("@mapbox/geojson-extent"),t=t("../constants"),r=t.LAT_MIN,p=t.LAT_MAX,h=t.LAT_RENDERED_MIN,f=t.LAT_RENDERED_MAX,d=t.LNG_MIN,g=t.LNG_MAX;e.exports=function(t,e){var i=r,o=p,s=r,a=p,u=g,c=d;t.forEach(function(t){var e=l(t),n=e[1],r=e[3],t=e[0],e=e[2];i<n&&(i=n),r<o&&(o=r),s<r&&(s=r),n<a&&(a=n),t<u&&(u=t),c<e&&(c=e)});return i+e.lat>f&&(e.lat=f-i),s+e.lat>p&&(e.lat=p-s),o+e.lat<h&&(e.lat=h-o),a+e.lat<r&&(e.lat=r-a),u+e.lng<=d&&(e.lng+=360*Math.ceil(Math.abs(e.lng)/360)),c+e.lng>=g&&(e.lng-=360*Math.ceil(Math.abs(e.lng)/360)),e}},{"../constants":170,"@mapbox/geojson-extent":5}],211:[function(t,e,n){"use strict";var s=t("../constants");e.exports=function(t,e,n,r,i){var o=e.geometry.coordinates,e=n.geometry.coordinates;if(o[1]>s.LAT_RENDERED_MAX||o[1]<s.LAT_RENDERED_MIN||e[1]>s.LAT_RENDERED_MAX||e[1]<s.LAT_RENDERED_MIN)return null;o=r.project([o[0],o[1]]),e=r.project([e[0],e[1]]),e=r.unproject([(o.x+e.x)/2,(o.y+e.y)/2]);return{type:s.geojsonTypes.FEATURE,properties:{meta:s.meta.MIDPOINT,parent:t,lng:e.lng,lat:e.lat,user_isLock:i.properties.user_isLock||!1,coord_path:n.properties.coord_path},geometry:{type:s.geojsonTypes.POINT,coordinates:[e.lng,e.lat]}}}},{"../constants":170}],212:[function(t,e,n){"use strict";var h=t("./create_vertex"),f=t("./create_midpoint"),s=t("../constants");e.exports=function n(a){var r,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,t=a.geometry,e=t.type,t=t.coordinates,c=a.properties&&a.properties.id,l=[];function o(t,i){var o="",s=null;t.forEach(function(t,e){var n=null!=i?i+"."+e:String(e),r=h(c,t,n,p(n),a);u.midpoints&&s&&(n=f(c,s,r,u.map,a))&&l.push(n),s=r,t=JSON.stringify(t),o!==t&&l.push(r),0===e&&(o=t)})}function p(t){return!!u.selectedPaths&&-1!==u.selectedPaths.indexOf(t)}return e===s.geojsonTypes.POINT?l.push(h(c,t,i,p(i),a)):e===s.geojsonTypes.POLYGON?t.forEach(function(t,e){o(t,null!==i?i+"."+e:String(e))}):e===s.geojsonTypes.LINE_STRING?o(t,i):0===e.indexOf(s.geojsonTypes.MULTI_PREFIX)&&(r=e.replace(s.geojsonTypes.MULTI_PREFIX,""),t.forEach(function(t,e){t={type:s.geojsonTypes.FEATURE,properties:a.properties,geometry:{type:r,coordinates:t}},l=l.concat(n(t,u,e))})),l}},{"../constants":170,"./create_midpoint":211,"./create_vertex":213}],213:[function(t,e,n){"use strict";var o=t("../constants");e.exports=function(t,e,n,r,i){return{type:o.geojsonTypes.FEATURE,properties:{meta:o.meta.VERTEX,parent:t,coord_path:n,user_isLock:i.properties.user_isLock||!1,active:r?o.activeStates.ACTIVE:o.activeStates.INACTIVE},geometry:{type:o.geojsonTypes.POINT,coordinates:e}}}},{"../constants":170}],214:[function(t,e,n){"use strict";e.exports={enable:function(t){setTimeout(function(){t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()},0)},disable:function(t){setTimeout(function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()},0)}}},{}],215:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.x-e.x,e=t.y-e.y;return Math.sqrt(n*n+e*e)}},{}],216:[function(t,e,n){"use strict";var s=t("./sort_features"),a=t("./map_event_to_bounding_box"),r=t("../constants"),u=t("./string_set"),c=[r.meta.FEATURE,r.meta.MIDPOINT,r.meta.VERTEX];function i(t,e,n,r){if(null===n.map)return[];if(!1==!!n.options.drawEnabled)return[];r=t?a(t,r):e,e={};n.options.styles&&(e.layers=n.options.styles.map(function(t){return t.id}));var e=n.map.queryRenderedFeatures(r,e).filter(function(t){return-1!==c.indexOf(t.properties.meta)}),i=new u,o=[];return e.forEach(function(t){var e=t.properties.id;i.has(e)||(i.add(e),o.push(t))}),s(o)}e.exports={click:function(t,e,n){return i(t,e,n,n.options.adsorbEnabled&&n.options.adsorbBuffer||n.options.clickBuffer)},touch:function(t,e,n){return i(t,e,n,n.options.touchBuffer)}}},{"../constants":170,"./map_event_to_bounding_box":221,"./sort_features":225,"./string_set":226}],217:[function(t,e,n){"use strict";var o=t("./features_at"),s=t("../constants"),a=t("lodash/cloneDeep");e.exports=function(t,e){var n=o.click(t,null,e),r={mouse:s.cursors.NONE};-1!==e.events.currentModeName().indexOf("draw")&&(r.mouse=s.cursors.ADD),e.ui.queueMapClasses(r),e.ui.updateMapClasses(),t.adsorbFeatureTargets=a(n);for(var i=0;i<n.length;i++)n[i].properties.user_isLock&&(n.splice(i,1),i--);return t.featureTarget=a(n[0]),t.featureTargets=a(n),t.featureTarget&&(r.mouse=t.featureTarget.properties.active===s.activeStates.ACTIVE?s.cursors.MOVE:s.cursors.POINTER,r.feature=t.featureTarget.properties.meta),t}},{"../constants":170,"./features_at":216,"lodash/cloneDeep":142}],218:[function(t,e,n){"use strict";var s=t("./euclidean_distance");e.exports=function(t,e,n){var r=2<arguments.length&&void 0!==n?n:{},i=null!=r.fineTolerance?r.fineTolerance:4,o=null!=r.grossTolerance?r.grossTolerance:12,n=null!=r.interval?r.interval:500;t.point=t.point||e.point,t.time=t.time||e.time;r=s(t.point,e.point);return r<i||r<o&&e.time-t.time<n}},{"./euclidean_distance":215}],219:[function(t,e,n){"use strict";e.exports=function(t,e){return!!t.lngLat&&(t.lngLat.lng===e[0]&&t.lngLat.lat===e[1])}},{}],220:[function(t,e,n){"use strict";var i=t("./euclidean_distance");e.exports=function(t,e,n){var r=2<arguments.length&&void 0!==n?n:{},n=null!=r.tolerance?r.tolerance:25,r=null!=r.interval?r.interval:250;return t.point=t.point||e.point,t.time=t.time||e.time,i(t.point,e.point)<n&&e.time-t.time<r}},{"./euclidean_distance":215}],221:[function(t,e,n){"use strict";e.exports=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]}},{}],222:[function(t,e,n){"use strict";e.exports=function(t,o){function e(t,e){for(var n=s[t],r=n.length;r--;){var i=n[r];if(i.selector(e)){i.fn.call(a,e),o.store.render(),o.ui.updateMapClasses();break}}}var s={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},a={on:function(t,e,n){if(void 0===s[t])throw new Error("Invalid event type: "+t);s[t].push({selector:e,fn:n})},render:function(t){o.store.featureChanged(t)}};return t.start.call(a),{render:t.render,stop:function(){t.stop&&t.stop()},trash:function(){t.trash&&(t.trash(),o.store.render())},combineFeatures:function(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures:function(){t.uncombineFeatures&&t.uncombineFeatures()},unionPolygon:function(){t.unionPolygon&&t.unionPolygon()},unionLine:function(){t.unionLine&&t.unionLine()},splitLine:function(){t.splitLine&&t.splitLine()},curveLine:function(){t.curveLine&&t.curveLine()},drag:function(t){e("drag",t)},click:function(t){e("click",t)},mousemove:function(t){e("mousemove",t)},mousedown:function(t){e("mousedown",t)},mouseup:function(t){e("mouseup",t)},mouseout:function(t){e("mouseout",t)},keydown:function(t){e("keydown",t)},keyup:function(t){e("keyup",t)},touchstart:function(t){e("touchstart",t)},touchmove:function(t){e("touchmove",t)},touchend:function(t){e("touchend",t)},tap:function(t){e("tap",t)}}}},{}],223:[function(t,e,n){"use strict";var r=t("@mapbox/point-geometry");e.exports=function(t,e){var n=e.getBoundingClientRect();return new r(t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0))}},{"@mapbox/point-geometry":10}],224:[function(t,e,n){"use strict";var r=t("./constrain_feature_movement"),o=t("../constants"),s=t("../feature_types/circle"),a=t("../feature_types/rectangle"),u=(t("../feature_types/rectangle"),t("../feature_types/triangle")),c=t("../feature_types/sector"),d=t("../feature_types/ellipse"),g=t("../feature_types/arc"),y=t("../feature_types/line_arrow"),_=t("../feature_types/thin_straight_arrow"),m=t("../feature_types/thin_tail_arrow"),v=t("../feature_types/attack_arrow"),E=t("../feature_types/offensive_arrow"),I=t("../feature_types/offensive_tail_arrow"),x=t("../feature_types/pincer_attack_arrow"),b=t("../feature_types/curve_polygon");e.exports=function(t,e){function h(t){return t&&Array.isArray(t)}function f(t){return t&&Array.isArray(t)&&2===t.length&&!isNaN(t[0])&&!isNaN(t[1])}var i=r(t.map(function(t){return t.toGeoJSON()}),e);t.forEach(function(t){function l(t){return[(t={lng:t[0]+i.lng,lat:t[1]+i.lat}).lng,t.lat]}function p(t){return t.map(l)}function e(t,e,n,r){var i,o,s=1<arguments.length&&void 0!==e?e:[],a=2<arguments.length&&void 0!==n?n:[],u=3<arguments.length&&void 0!==r?r:[],c=t.properties;for(i in c)s.includes(i)&&f(c[i])&&t.setProperty(i,l(c[i])),a.includes(i)&&h(c[i])&&t.setProperty(i,c[i].map(l)),u.includes(i)&&h(c[i])&&t.setProperty(i,c[i].map(p));for(o in t)s.includes(o)&&f(t[o])&&(t[o]=l(t[o])),a.includes(o)&&h(t[o])&&(t[o]=c[o].map(l)),u.includes(o)&&h(t[o])&&(t[o]=c[o].map(p))}var n=t.getCoordinates(),r=void 0;t.type===o.geojsonTypes.POINT?r=l(n):t.type===o.geojsonTypes.LINE_STRING||t.type===o.geojsonTypes.MULTI_POINT?r=n.map(l):t.type===o.geojsonTypes.POLYGON||t.type===o.geojsonTypes.MULTI_LINE_STRING?r=n.map(p):t.type===o.geojsonTypes.MULTI_POLYGON&&(r=n.map(function(t){return t.map(p)})),t.incomingCoords(r),t instanceof s||t.properties&&"circle"===t.properties.feature_type&&t.properties.radius?e(t,["center"]):t instanceof a||t.properties&&"rectangle"===t.properties.feature_type?e(t,["start","end"]):t instanceof u||t.properties&&"triangle"===t.properties.feature_type?e(t,["start","middle","end"]):t instanceof c||t.properties&&"sector"===t.properties.feature_type?e(t,["center","start","end"]):t instanceof d||t.properties&&"ellipse"===t.properties.feature_type||t instanceof g||t.properties&&"arc"===t.properties.feature_type?e(t,["first","second","end"]):t instanceof y||t.properties&&"line_arrow"===t.properties.feature_type||t instanceof _||t.properties&&"thin_straight_arrow"===t.properties.feature_type||t instanceof m||t.properties&&"thin_tail_arrow"===t.properties.feature_type||t instanceof v||t.properties&&"attack_arrow"===t.properties.feature_type?e(t,["start","end"]):t instanceof E||t.properties&&"offensive_arrow"===t.properties.feature_type||t instanceof I||t.properties&&"offensive_tail_arrow"===t.properties.feature_type?e(t,["start","middle","end"]):t instanceof x||t.properties&&"pincer_attack_arrow"===t.properties.feature_type?e(t,["start","second","end","arrow1","arrow2"]):(t instanceof b||t.properties&&"curve_polygon"===t.properties.feature_type)&&e(t,["start"])})}},{"../constants":170,"../feature_types/arc":188,"../feature_types/attack_arrow":189,"../feature_types/circle":190,"../feature_types/curve_polygon":191,"../feature_types/ellipse":192,"../feature_types/line_arrow":194,"../feature_types/offensive_arrow":197,"../feature_types/offensive_tail_arrow":198,"../feature_types/pincer_attack_arrow":199,"../feature_types/rectangle":202,"../feature_types/sector":203,"../feature_types/thin_straight_arrow":204,"../feature_types/thin_tail_arrow":205,"../feature_types/triangle":206,"./constrain_feature_movement":210}],225:[function(t,e,n){"use strict";var r=t("@mapbox/geojson-area"),i=t("../constants"),o={Point:0,LineString:1,Polygon:2};function s(t,e){var n=o[t.geometry.type]-o[e.geometry.type];return 0==n&&t.geometry.type===i.geojsonTypes.POLYGON?t.area-e.area:n}e.exports=function(t){return t.map(function(t){return t.geometry.type===i.geojsonTypes.POLYGON&&(t.area=r.geometry({type:i.geojsonTypes.FEATURE,property:{},geometry:t.geometry})),t}).sort(s).map(function(t){return delete t.area,t})}},{"../constants":170,"@mapbox/geojson-area":2}],226:[function(t,e,n){"use strict";function r(t){if(this._items={},this._length=t?t.length:0,t)for(var e=0,n=t.length;e<n;e++)void 0!==t[e]&&(this._items[t[e]]=e)}r.prototype.add=function(t){return this._length=this._items[t]?this._length:this._length+1,this._items[t]=this._items[t]||this._length,this},r.prototype.delete=function(t){return this._length=this._items[t]?this._length-1:this._length,delete this._items[t],this},r.prototype.has=function(t){return void 0!==this._items[t]},r.prototype.values=function(){var n=this;return Object.keys(this._items).sort(function(t,e){return n._items[t]-n._items[e]})},r.prototype.clear=function(){return this._length=0,this._items={},this},e.exports=r},{}],227:[function(t,e,n){"use strict";e.exports=function(t,e){return t.length===e.length&&JSON.stringify(t.map(function(t){return t}).sort())===JSON.stringify(e.map(function(t){return t}).sort())}},{}],228:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=void 0,i=void 0;function o(){r?i=arguments:(r=!0,t.apply(n,arguments),r=!1,i&&(o.apply(n,i),i=!1))}return o}},{}],229:[function(t,e,n){"use strict";e.exports=function(t){return[].concat(t).filter(function(t){return void 0!==t})}},{}],230:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=r.noTarget,o=r.isOfMetaType,s=r.isInactiveFeature,a=r.isShiftDown,u=t("../lib/create_supplementary_points"),p=t("../lib/constrain_feature_movement"),c=t("../lib/double_click_zoom"),h=t("../constants"),f=t("../lib/features_at"),l=t("../lib/common_selectors"),d=t("../lib/move_features"),g=t("@turf/line-split").default,y=o(h.meta.VERTEX),_=o(h.meta.MIDPOINT),o={onSetup:function(t){var e=t.featureId,n=this.getFeature(e);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===h.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");t={featureId:e,feature:n,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[],initiallySelectedFeatures:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,t.selectedCoordPaths)),this.setSelected(e),t.initiallySelectedFeatures=this.getSelected().map(function(t){return t.toGeoJSON()}),c.disable(this),this.setActionableState({trash:!0}),t},fireUpdate:function(t){this.map.fire(h.events.UPDATE,{action:h.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallySelectedFeatures||[],features:this.getSelected().map(function(t){return t.toGeoJSON()})}),t.initiallySelectedFeatures=this.getSelected().map(function(t){return t.toGeoJSON()})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:0<t.selectedCoordPaths.length})},startDragging:function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties,r=t.selectedCoordPaths.indexOf(n.coord_path);a(e)||-1!==r?a(e)&&-1===r&&t.selectedCoordPaths.push(n.coord_path):t.selectedCoordPaths=[n.coord_path];t=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(t)},onMidpoint:function(t,e){this.startDragging(t,e);e=e.featureTarget.properties;t.feature.addCoordinate(e.coord_path,e.lng,e.lat),this.fireUpdate(t),t.selectedCoordPaths=[e.coord_path]},pathsToCoordinates:function(e,t){return t.map(function(t){return{feature_id:e,coord_path:t}})},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,n){d(this.getSelected(),n),t.dragMoveLocation=e.lngLat},dragVertex:function(e,t,n){for(var r=e.selectedCoordPaths.map(function(t){return e.feature.getCoordinate(t)}),i=r.map(function(t){return{type:h.geojsonTypes.FEATURE,properties:{},geometry:{type:h.geojsonTypes.POINT,coordinates:t}}}),o=p(i,n),s=0;s<r.length;s++){var a,u,c=r[s],l=[c[0]+o.lng,c[1]+o.lat];this._ctx.options.adsorbEnabled&&(a={point:this.map.project(l),lngLat:{lng:l[0],lat:l[1]}},u=f.click(a,null,this._ctx),(u=this.getAdsorbCoord(e,a,u||[],e.featureId))&&(t.lngLat.lng=t.lngLat.lng+(u[0]-l[0]),t.lngLat.lat=t.lngLat.lat+(u[1]-l[1]),t.point=this.map.project([t.lngLat.lng,t.lngLat.lat]),l=u,this.updateUIClasses({mouse:h.cursors.POINTER}))),e.feature.updateCoordinate(e.selectedCoordPaths[s],l[0],l[1],c[0],c[1])}},clickNoTarget:function(){this.changeMode(h.modes.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(h.modes.SIMPLE_SELECT)},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onStop:function(){c.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,n){t.featureId===e.properties.id?(e.properties.active=h.activeStates.ACTIVE,n(e),u(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(n)):(e.properties.active=h.activeStates.INACTIVE,n(e)),this.fireActionable(t)},onTrash:function(e){e.selectedCoordPaths.sort().reverse().forEach(function(t){return e.feature.removeCoordinate(t)}),this.map.fire(h.events.UPDATE,{action:h.updateActions.CHANGE_COORDINATES,prevFeatures:e.initiallySelectedFeatures||[],features:this.getSelected().map(function(t){return t.toGeoJSON()})}),e.initiallySelectedFeatures=this.getSelected().map(function(t){return t.toGeoJSON()}),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode(h.modes.SIMPLE_SELECT,{}))},onMouseMove:function(t,e){var n=l.isActiveFeature(e),r=y(e),e=0===t.selectedCoordPaths.length;n&&e||r&&!e?this.updateUIClasses({mouse:h.cursors.MOVE}):this.updateUIClasses({mouse:h.cursors.NONE}),this.stopDragging(t)},onMouseOut:function(t){t.dragMoving&&this.fireUpdate(t)}};o.onTouchStart=o.onMouseDown=function(t,e){return y(e)?this.onVertex(t,e):l.isActiveFeature(e)?this.onFeature(t,e):_(e)?this.onMidpoint(t,e):void 0},o.onDrag=function(t,e){var n;!0===t.canDragMove&&(t.dragMoving=!0,e.originalEvent.stopPropagation(),n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat},0<t.selectedCoordPaths.length?this.dragVertex(t,e,n):this.dragFeature(t,e,n),t.dragMoveLocation=e.lngLat)},o.onClick=function(t,e){return i(e)?this.clickNoTarget(t,e):l.isActiveFeature(e)?this.clickActiveFeature(t,e):s(e)?this.clickInactive(t,e):void this.stopDragging(t)},o.onTap=function(t,e){return i(e)?this.clickNoTarget(t,e):l.isActiveFeature(e)?this.clickActiveFeature(t,e):s(e)?this.clickInactive(t,e):void 0},o.onTouchEnd=o.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(t),this.stopDragging(t)},o.onSplitLine=function(t){var e=this.getSelected();if(1!==e.length)throw new Error("");if(e[0].type!==h.geojsonTypes.LINE_STRING)throw new Error("");var n=this.getSelectedCoordinates();if(1!==n.length)throw new Error("");var n={type:h.geojsonTypes.FEATURE,properties:{},geometry:{type:h.geojsonTypes.POINT,coordinates:n[0].coordinates}},r=g(e[0].toGeoJSON(),n);if(r&&r.features&&0<r.features.length){for(var i=[],o=[],s=0,a=r.features.length;s<a;s++){var u=r.features[s],u=this.newFeature({type:h.geojsonTypes.FEATURE,properties:e[0].properties,geometry:u.geometry});this.addFeature(u),i.push(u.toGeoJSON()),o.push(u.id)}this.deleteFeature(e[0].id,{silent:!0}),this.map.fire(h.events.REPLACE,{createdFeatures:i,deletedFeatures:[e[0].toGeoJSON()]}),this.changeMode(h.modes.SIMPLE_SELECT,{featureIds:o})}this.fireActionable(t)},e.exports=o},{"../constants":170,"../lib/common_selectors":209,"../lib/constrain_feature_movement":210,"../lib/create_supplementary_points":212,"../lib/double_click_zoom":214,"../lib/features_at":216,"../lib/move_features":224,"@turf/line-split":29}],231:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=t("../lib/double_click_zoom"),o=t("../constants"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},e=n&&"arc"===r.feature_type&&r.first&&r.second&&r.end?n:null,r=[];e&&r.push(e.toGeoJSON());n=e?this.newArc({id:e.id,type:o.geojsonTypes.FEATURE,properties:e.properties,geometry:{type:o.geojsonTypes.LINE_STRING,coordinates:e.getCoordinates()}}):this.newArc({type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.LINE_STRING,coordinates:[]}});return this.preSettingStyle(n,t.style||{}),this.addFeature(n),this.clearSelectedFeatures(),i.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.LINE),this.setActionableState({trash:!0}),{initiallyFeatures:r,line:n,direction:"forward",currentVertexPosition:e?2:0}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:o.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.line.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:o.cursors.POINTER})},t.onTap=t.onClick=function(t,e){if(r.isVertex(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEnterKey(e)?this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.line.id]}):r.isEscapeKey(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT))},t.onStop=function(t){i.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(o.events.UPDATE,{action:o.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.line.toGeoJSON()]}):this.map.fire(o.events.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT,{},{silent:!0})))},t.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)},t.toDisplayFeatures=function(t,e,n){t=e.properties.id===t.line.id;if(e.properties.active=t?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!t)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=o.meta.FEATURE,n(e))},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/double_click_zoom":214}],232:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),o=t("../lib/double_click_zoom"),s=t("../constants"),a=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"attack_arrow"===r.feature_type&&r.start&&r.end?n:null,e=[];i&&e.push(i.toGeoJSON());r=void 0,n=void 0,n=i?(r=this.newAttackArrow({id:i.id,type:s.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:s.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}),1):(r=this.newAttackArrow({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(r,t.style||{}),0);return this.addFeature(r),this.clearSelectedFeatures(),o.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.activateUIButton(s.types.POLYGON),this.setActionableState({trash:!0}),{polygon:r,currentVertexPosition:n,initiallyFeatures:e}},clickAnywhere:function(t,e){if(1<=t.currentVertexPosition)return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:s.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:s.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){this.updateUIClasses({mouse:s.cursors.NONE}),o.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(s.events.UPDATE,{action:s.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(s.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=s.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1,e)),4<r&&(i=e.geometry.coordinates[0].length-1,n(a(t.polygon.id,e.geometry.coordinates[0][i],"0."+i,!1,e))),r<=4){var i=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:s.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:i,type:s.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}}},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214}],233:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),o=t("../lib/double_click_zoom"),s=t("../constants"),i=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},e=n&&"circle"===r.feature_type&&r.radius&&r.center?n:null,r=[];if(e){r.push(e.toGeoJSON());n=this.newCircle({id:e.id,type:s.geojsonTypes.FEATURE,properties:e.properties,geometry:{type:s.geojsonTypes.POLYGON,coordinates:e.getCoordinates()}});this.addFeature(n);var i=this.newFeature({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.LINE_STRING,coordinates:[e.properties.center,e.coordinates[0]]}});return this.addFeature(i),this.clearSelectedFeatures(),o.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.setActionableState({trash:!0}),{initiallyFeatures:r,polygon:n,line:i,currentVertexPosition:1}}i=this.newCircle({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.POLYGON,coordinates:[[]]}});this.preSettingStyle(i,t.style||{}),this.addFeature(i);t=this.newFeature({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.LINE_STRING,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),o.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.setActionableState({trash:!0}),{initiallyFeatures:r,polygon:i,line:t,currentVertexPosition:0}},clickAnywhere:function(t,e){if(1<=t.currentVertexPosition)return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:s.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,1<=t.currentVertexPosition&&(t.currentVertexPosition=1)},clickOnVertex:function(t){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){0<t.currentVertexPosition&&(t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)),r.isVertex(e)&&this.updateUIClasses({mouse:s.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.getFeature(t.line.id)&&this.deleteFeature([t.line.id],{silent:!0}),this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){this.updateUIClasses({mouse:s.cursors.NONE}),o.enable(this),this.activateUIButton(),this.getFeature(t.line.id)&&this.deleteFeature([t.line.id],{silent:!0}),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(s.events.UPDATE,{action:s.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(s.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){if(e.properties.id===t.line.id&&e.geometry.type===s.geojsonTypes.LINE_STRING)return e.properties.active=s.activeStates.ACTIVE,0<e.geometry.coordinates.length&&n(i(t.line.id,e.geometry.coordinates[0],"0",!1,e)),1<e.geometry.coordinates.length&&n(i(t.line.id,e.geometry.coordinates[1],"1",!1,e)),n(e);var r=e.properties.id===t.polygon.id;if(e.properties.active=r?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){t=e.geometry.coordinates[0].length;if(!(t<2)){if(e.properties.meta=s.meta.FEATURE,t<=4){r=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:s.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:r,type:s.geojsonTypes.LINE_STRING}}),3===t)return}return n(e)}}},t.onTrash=function(t){this.getFeature(t.line.id)&&this.deleteFeature([t.line.id],{silent:!0}),this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214}],234:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),o=t("../lib/double_click_zoom"),s=t("../constants"),i=t("../lib/is_event_at_coordinates"),a=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"curve_polygon"===r.feature_type&&r.start?n:null,e=[];i&&e.push(i.toGeoJSON());r=void 0,n=void 0,n=i?((r=this.newCurvePolygon({id:i.id,type:s.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:s.geojsonTypes.POLYGON,coordinates:[[]]}})).start=i.properties.start,r.initCoordinates=[[i.properties.start]],1):(r=this.newCurvePolygon({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(r,t.style||{}),0);return this.addFeature(r),this.clearSelectedFeatures(),o.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.activateUIButton(s.types.POLYGON),this.setActionableState({trash:!0}),{polygon:r,currentVertexPosition:n,initiallyFeatures:e}},clickAnywhere:function(t,e){var n=t.polygon.coordinates?t.polygon.coordinates[0].length-2:0;if(1<t.currentVertexPosition&&i(e,t.polygon.coordinates[0][n]))return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:s.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:s.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){var e;this.updateUIClasses({mouse:s.cursors.NONE}),o.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.updateCoordinate2(),t.polygon.coordinates&&t.polygon.coordinates[0]&&3<t.polygon.coordinates[0].length&&(e=t.polygon.coordinates[0].length-1,t.polygon.coordinates[0][e-1][0]===t.polygon.coordinates[0][e][0]&&t.polygon.coordinates[0][e-1][1]===t.polygon.coordinates[0][e][1]&&t.polygon.removeCoordinate("0."+e)),t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(s.events.UPDATE,{action:s.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(s.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=s.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1,e)),3<r&&(i=e.geometry.coordinates[0].length-3,n(a(t.polygon.id,e.geometry.coordinates[0][i],"0."+i,!1,e))),r<=4){var i=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:s.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:i,type:s.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}}},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214,"../lib/is_event_at_coordinates":219}],235:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=t("../lib/double_click_zoom"),o=t("../constants"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},e=n&&"ellipse"===r.feature_type&&r.first&&r.second&&r.end?n:null,r=[];e&&r.push(e.toGeoJSON());n=e?this.newEllipse({id:e.id,type:o.geojsonTypes.FEATURE,properties:e.properties,geometry:{type:o.geojsonTypes.POLYGON,coordinates:e.getCoordinates()}}):this.newEllipse({type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.POLYGON,coordinates:[[]]}});return this.preSettingStyle(n,t.style||{}),this.addFeature(n),this.clearSelectedFeatures(),i.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.POLYGON),this.setActionableState({trash:!0}),{polygon:n,initiallyFeatures:r,currentVertexPosition:e?2:0}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:o.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:o.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){this.updateUIClasses({mouse:o.cursors.NONE}),i.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(o.events.UPDATE,{action:o.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(o.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){t=e.geometry.coordinates[0].length;if(!(t<3)){if(e.properties.meta=o.meta.FEATURE,t<=4){r=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:o.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:r,type:o.geojsonTypes.LINE_STRING}}),3===t)return}return n(e)}}},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/double_click_zoom":214}],236:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=t("../constants"),t={onSetup:function(t){t=t||{};var e={type:i.geojsonTypes.FEATURE,properties:{custom_style:"true",feature_type:"icon"},geometry:{type:i.geojsonTypes.POINT,coordinates:[]}},t=t.style||{};t.iconImage&&(e.properties.iconImage=t.iconImage),t.iconColor&&(e.properties.iconColor=t.iconColor),void 0!==t.iconSize&&(e.properties.iconSize=t.iconSize),void 0!==t.iconRotate&&(e.properties.iconRotate=t.iconRotate);e=this.newFeature(e);return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:i.cursors.ADD}),this.activateUIButton(i.types.POINT),this.setActionableState({trash:!0}),{point:e}},stopDrawingAndRemove:function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT)}};t.onTap=t.onClick=function(t,e){this.updateUIClasses({mouse:i.cursors.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(i.events.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.point.id]})},t.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},t.toDisplayFeatures=function(t,e,n){t=e.properties.id===t.point.id;if(e.properties.active=t?i.activeStates.ACTIVE:i.activeStates.INACTIVE,!t)return n(e)},t.onTrash=t.stopDrawingAndRemove,t.onKeyUp=function(t,e){if(r.isEscapeKey(e)||r.isEnterKey(e))return this.stopDrawingAndRemove(t,e)},e.exports=t},{"../constants":170,"../lib/common_selectors":209}],237:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),o=t("../lib/double_click_zoom"),s=t("../constants"),i=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"line_arrow"===r.feature_type&&r.start&&r.end?n:null,e=[];i&&e.push(i.toGeoJSON());r=void 0,n=void 0,n=i?(r=this.newLineArrow({id:i.id,type:s.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:s.geojsonTypes.LINE_STRING,coordinates:i.getCoordinates()}}),1):(r=this.newLineArrow({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.LINE_STRING,coordinates:[]}}),this.preSettingStyle(r,t.style||{}),t=t.shape||{},r.properties.shape_start_arrow_type=t.startArrowType||"none",r.properties.shape_end_arrow_type=t.endArrowType||"normal",r.properties.shape_line_type=t.lineType||"solid",0);return this.addFeature(r),this.clearSelectedFeatures(),o.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.activateUIButton(s.types.LINE),this.setActionableState({trash:!0}),{line:r,currentVertexPosition:n,initiallyFeatures:e,direction:"forward"}},clickAnywhere:function(t,e){if(1<=t.currentVertexPosition)return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:s.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.line.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:s.cursors.POINTER})},t.onTap=t.onClick=function(t,e){if(r.isVertex(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEnterKey(e)?this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.line.id]}):r.isEscapeKey(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT))},t.onStop=function(t){o.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(s.events.UPDATE,{action:s.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.line.toGeoJSON()]}):this.map.fire(s.events.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},t.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.line.id;if(e.properties.active=r?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!r)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=s.meta.FEATURE,n(i(t.line.id,e.geometry.coordinates[0],"0",!1,e)),n(e))},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214}],238:[function(t,e,n){"use strict";function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=t("../lib/common_selectors"),r=t("../lib/is_event_at_coordinates"),a=t("../lib/double_click_zoom"),u=t("../constants"),o=t("../lib/create_vertex"),t={onSetup:function(t){var e=(t=t||{}).featureId,n=void 0,r=void 0,i="forward";if(e){if(!(n=this.getFeature(e)))throw new Error("Could not find a feature with the provided featureId");var o=t.from;if(o&&"Feature"===o.type&&o.geometry&&"Point"===o.geometry.type&&(o=o.geometry),o&&"Point"===o.type&&o.coordinates&&2===o.coordinates.length&&(o=o.coordinates),!o||!Array.isArray(o))throw new Error("Please use the `from` property to indicate which point to continue the line from");e=n.coordinates.length-1;if(n.coordinates[e][0]===o[0]&&n.coordinates[e][1]===o[1]){r=1+e;n.addCoordinate.apply(n,[r].concat(s(n.coordinates[e])))}else{if(n.coordinates[0][0]!==o[0]||n.coordinates[0][1]!==o[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");i="backwards";r=0,n.addCoordinate.apply(n,[r].concat(s(n.coordinates[0])))}}else n=this.newFeature({type:u.geojsonTypes.FEATURE,properties:{},geometry:{type:u.geojsonTypes.LINE_STRING,coordinates:[]}}),this.preSettingStyle(n,t.style||{}),r=0,this.addFeature(n);return this.clearSelectedFeatures(),a.disable(this),this.updateUIClasses({mouse:u.cursors.ADD}),this.activateUIButton(u.types.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:r,direction:i}},clickAnywhere:function(t,e){if(0<t.currentVertexPosition&&r(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&r(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.line.id]});var n=this.getAdsorbCoord(t,e,e.adsorbFeatureTargets||[],t.line.id),e=n||[e.lngLat.lng,e.lngLat.lat];this.updateUIClasses({mouse:n?u.cursors.POINTER:u.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e[0],e[1]),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e[0],e[1])):t.line.addCoordinate(0,e[0],e[1])},clickOnVertex:function(t){return this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.line.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){var n=this.getAdsorbCoord(t,e,e.adsorbFeatureTargets||[],t.line.id),r=n||[e.lngLat.lng,e.lngLat.lat];t.line.updateCoordinate(t.currentVertexPosition,r[0],r[1]),i.isVertex(e)&&this.updateUIClasses({mouse:u.cursors.POINTER}),n&&this.updateUIClasses({mouse:u.cursors.POINTER})},t.onTap=t.onClick=function(t,e){if(i.isVertex(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){i.isEnterKey(e)?this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.line.id]}):i.isEscapeKey(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT))},t.onStop=function(t){a.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?this.map.fire(u.events.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT,{},{silent:!0})))},t.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT)},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.line.id;if(e.properties.active=r?u.activeStates.ACTIVE:u.activeStates.INACTIVE,!r)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=u.meta.FEATURE,n(o(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],""+("forward"===t.direction?e.geometry.coordinates.length-2:1),!1,e)),n(e))},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214,"../lib/is_event_at_coordinates":219}],239:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),o=t("../lib/double_click_zoom"),s=t("../constants"),a=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"offensive_arrow"===r.feature_type&&r.start&&r.middle&&r.end?n:null,e=[];i&&e.push(i.toGeoJSON());r=void 0,n=void 0,n=i?(r=this.newOffensiveArrow({id:i.id,type:s.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:s.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}),2):(r=this.newOffensiveArrow({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(r,t.style||{}),0);return this.addFeature(r),this.clearSelectedFeatures(),o.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.activateUIButton(s.types.POLYGON),this.setActionableState({trash:!0}),{polygon:r,currentVertexPosition:n,initiallyFeatures:e}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:s.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:s.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){this.updateUIClasses({mouse:s.cursors.NONE}),o.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(s.events.UPDATE,{action:s.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(s.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=s.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1,e)),4<r&&(i=e.geometry.coordinates[0].length-1,n(a(t.polygon.id,e.geometry.coordinates[0][i],"0."+i,!1,e))),r<=4){var i=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:s.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:i,type:s.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}}},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214}],240:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),o=t("../lib/double_click_zoom"),s=t("../constants"),a=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"offensive_tail_arrow"===r.feature_type&&r.start&&r.middle&&r.end?n:null,e=[];i&&e.push(i.toGeoJSON());r=void 0,n=void 0,n=i?(r=this.newOffensiveTailArrow({id:i.id,type:s.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:s.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}),2):(r=this.newOffensiveTailArrow({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(r,t.style||{}),0);return this.addFeature(r),this.clearSelectedFeatures(),o.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.activateUIButton(s.types.POLYGON),this.setActionableState({trash:!0}),{polygon:r,currentVertexPosition:n,initiallyFeatures:e}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:s.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:s.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){this.updateUIClasses({mouse:s.cursors.NONE}),o.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(s.events.UPDATE,{action:s.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(s.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=s.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1,e)),4<r&&(i=e.geometry.coordinates[0].length-1,n(a(t.polygon.id,e.geometry.coordinates[0][i],"0."+i,!1,e))),r<=4){var i=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:s.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:i,type:s.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}}},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214}],241:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),o=t("../lib/double_click_zoom"),s=t("../constants"),a=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"pincer_attack_arrow"===r.feature_type&&r.start&&r.middle&&r.end?n:null,e=[];i&&e.push(i.toGeoJSON());r=void 0,n=void 0,n=i?(r=this.newPincerAttackArrow({id:i.id,type:s.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:s.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}),2):(r=this.newPincerAttackArrow({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(r,t.style||{}),0);return this.addFeature(r),this.clearSelectedFeatures(),o.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.activateUIButton(s.types.POLYGON),this.setActionableState({trash:!0}),{polygon:r,currentVertexPosition:n,initiallyFeatures:e}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:s.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:s.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){this.updateUIClasses({mouse:s.cursors.NONE}),o.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(s.events.UPDATE,{action:s.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(s.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=s.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1,e)),4<r&&(i=e.geometry.coordinates[0].length-1,n(a(t.polygon.id,e.geometry.coordinates[0][i],"0."+i,!1,e))),r<=4){var i=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:s.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:i,type:s.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}}},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214}],242:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=t("../constants"),t={onSetup:function(t){t=t||{};var e=this.newFeature({type:i.geojsonTypes.FEATURE,properties:{},geometry:{type:i.geojsonTypes.POINT,coordinates:[]}});return this.preSettingStyle(e,t.style||{}),this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:i.cursors.ADD}),this.activateUIButton(i.types.POINT),this.setActionableState({trash:!0}),{point:e}},stopDrawingAndRemove:function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT)}};t.onTap=t.onClick=function(t,e){this.updateUIClasses({mouse:i.cursors.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(i.events.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.point.id]})},t.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},t.toDisplayFeatures=function(t,e,n){t=e.properties.id===t.point.id;if(e.properties.active=t?i.activeStates.ACTIVE:i.activeStates.INACTIVE,!t)return n(e)},t.onTrash=t.stopDrawingAndRemove,t.onKeyUp=function(t,e){if(r.isEscapeKey(e)||r.isEnterKey(e))return this.stopDrawingAndRemove(t,e)},e.exports=t},{"../constants":170,"../lib/common_selectors":209}],243:[function(t,e,n){"use strict";var i=t("../lib/common_selectors"),r=t("../lib/double_click_zoom"),o=t("../constants"),s=t("../lib/is_event_at_coordinates"),a=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.newFeature({type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.POLYGON,coordinates:[[]]}});return this.preSettingStyle(e,t.style||{}),this.addFeature(e),this.clearSelectedFeatures(),r.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(t,e){if(0<t.currentVertexPosition&&s(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});var n=this.getAdsorbCoord(t,e,e.adsorbFeatureTargets||[],t.polygon.id),e=n||[e.lngLat.lng,e.lngLat.lat];this.updateUIClasses({mouse:n?o.cursors.POINTER:o.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e[0],e[1]),t.currentVertexPosition++,t.polygon.updateCoordinate("0."+t.currentVertexPosition,e[0],e[1])},clickOnVertex:function(t){return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){var n=this.getAdsorbCoord(t,e,e.adsorbFeatureTargets||[],t.polygon.id),r=n||[e.lngLat.lng,e.lngLat.lat];t.polygon.updateCoordinate("0."+t.currentVertexPosition,r[0],r[1]),i.isVertex(e)&&this.updateUIClasses({mouse:o.cursors.POINTER}),n&&this.updateUIClasses({mouse:o.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return i.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){i.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)):i.isEnterKey(e)&&this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){this.updateUIClasses({mouse:o.cursors.NONE}),r.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate("0."+t.currentVertexPosition),t.polygon.isValid()?this.map.fire(o.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=o.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1,e)),3<r&&(i=e.geometry.coordinates[0].length-3,n(a(t.polygon.id,e.geometry.coordinates[0][i],"0."+i,!1,e))),r<=4){var i=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:o.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:i,type:o.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}}},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214,"../lib/is_event_at_coordinates":219}],244:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=t("../lib/double_click_zoom"),o=t("../constants"),s=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},e=n&&"rectangle"===r.feature_type&&r.start&&r.end?n:null,r=[];e&&r.push(e.toGeoJSON());n=e?this.newRectangle({id:e.id,type:o.geojsonTypes.FEATURE,properties:e.properties,geometry:{type:o.geojsonTypes.POLYGON,coordinates:e.getCoordinates()}}):this.newRectangle({type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.POLYGON,coordinates:[[]]}});return this.preSettingStyle(n,t.style||{}),this.addFeature(n),this.clearSelectedFeatures(),i.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.POLYGON),this.setActionableState({trash:!0}),{initiallyFeatures:r,polygon:n,currentVertexPosition:e?1:0}},clickAnywhere:function(t,e){if(1<=t.currentVertexPosition)return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:o.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,1<=t.currentVertexPosition&&(t.currentVertexPosition=1)},clickOnVertex:function(t){return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:o.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){this.updateUIClasses({mouse:o.cursors.NONE}),i.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(o.events.UPDATE,{action:o.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(o.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=o.meta.FEATURE,n(s(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1,e)),3<r&&(i=e.geometry.coordinates[0].length-3,n(s(t.polygon.id,e.geometry.coordinates[0][i],"0."+i,!1,e))),r<=4){var i=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:o.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:i,type:o.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}}},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214}],245:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=t("../lib/double_click_zoom"),o=t("../constants"),s=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},e=n&&"sector"===r.feature_type&&r.center&&r.start&&r.end?n:null,r=[];e&&r.push(e.toGeoJSON());n=e?this.newSector({id:e.id,type:o.geojsonTypes.FEATURE,properties:e.properties,geometry:{type:o.geojsonTypes.POLYGON,coordinates:e.getCoordinates()}}):this.newSector({type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.POLYGON,coordinates:[[]]}});return this.preSettingStyle(n,t.style||{}),this.addFeature(n),this.clearSelectedFeatures(),i.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.POLYGON),this.setActionableState({trash:!0}),{initiallyFeatures:r,polygon:n,currentVertexPosition:e?2:0}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:o.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:o.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){this.updateUIClasses({mouse:o.cursors.NONE}),i.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(o.events.UPDATE,{action:o.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(o.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=o.meta.FEATURE,n(s(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1,e)),4<r&&(i=e.geometry.coordinates[0].length-1,n(s(t.polygon.id,e.geometry.coordinates[0][i],"0."+i,!1,e))),r<=4){var i=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:o.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:i,type:o.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}}},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214}],246:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=t("../constants"),t={onSetup:function(t){t=t||{};var e={type:i.geojsonTypes.FEATURE,properties:{custom_style:"true",feature_type:"text"},geometry:{type:i.geojsonTypes.POINT,coordinates:[]}},t=t.style||{};t.textField&&(e.properties.textField=t.textField),t.textColor&&(e.properties.textColor=t.textColor),void 0!==t.textSize&&(e.properties.textSize=t.textSize);e=this.newFeature(e);return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:i.cursors.ADD}),this.activateUIButton(i.types.POINT),this.setActionableState({trash:!0}),{point:e}},stopDrawingAndRemove:function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT)}};t.onTap=t.onClick=function(t,e){this.updateUIClasses({mouse:i.cursors.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(i.events.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.point.id]})},t.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},t.toDisplayFeatures=function(t,e,n){t=e.properties.id===t.point.id;if(e.properties.active=t?i.activeStates.ACTIVE:i.activeStates.INACTIVE,!t)return n(e)},t.onTrash=t.stopDrawingAndRemove,t.onKeyUp=function(t,e){if(r.isEscapeKey(e)||r.isEnterKey(e))return this.stopDrawingAndRemove(t,e)},e.exports=t},{"../constants":170,"../lib/common_selectors":209}],247:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),o=t("../lib/double_click_zoom"),s=t("../constants"),a=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"thin_straight_arrow"===r.feature_type&&r.start&&r.end?n:null,e=[];i&&e.push(i.toGeoJSON());r=void 0,n=void 0,n=i?(r=this.newThinStraightArrow({id:i.id,type:s.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:s.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}),1):(r=this.newThinStraightArrow({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(r,t.style||{}),0);return this.addFeature(r),this.clearSelectedFeatures(),o.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.activateUIButton(s.types.POLYGON),this.setActionableState({trash:!0}),{polygon:r,currentVertexPosition:n,initiallyFeatures:e}},clickAnywhere:function(t,e){if(1<=t.currentVertexPosition)return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:s.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:s.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){this.updateUIClasses({mouse:s.cursors.NONE}),o.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(s.events.UPDATE,{action:s.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(s.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=s.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1,e)),4<r&&(i=e.geometry.coordinates[0].length-1,n(a(t.polygon.id,e.geometry.coordinates[0][i],"0."+i,!1,e))),r<=4){var i=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:s.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:i,type:s.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}}},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214}],248:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),o=t("../lib/double_click_zoom"),s=t("../constants"),a=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"thin_tail_arrow"===r.feature_type&&r.start&&r.end?n:null,e=[];i&&e.push(i.toGeoJSON());r=void 0,n=void 0,n=i?(r=this.newThinTailArrow({id:i.id,type:s.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:s.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}),1):(r=this.newThinTailArrow({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(r,t.style||{}),0);return this.addFeature(r),this.clearSelectedFeatures(),o.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.activateUIButton(s.types.POLYGON),this.setActionableState({trash:!0}),{polygon:r,currentVertexPosition:n,initiallyFeatures:e}},clickAnywhere:function(t,e){if(1<=t.currentVertexPosition)return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:s.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:s.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){this.updateUIClasses({mouse:s.cursors.NONE}),o.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(s.events.UPDATE,{action:s.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(s.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=s.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1,e)),4<r&&(i=e.geometry.coordinates[0].length-1,n(a(t.polygon.id,e.geometry.coordinates[0][i],"0."+i,!1,e))),r<=4){var i=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:s.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:i,type:s.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}}},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214}],249:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=t("../lib/double_click_zoom"),o=t("../constants"),s=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},e=n&&"triangle"===r.feature_type&&r.start&&r.middle&&r.end?n:null,r=[];e&&r.push(e.toGeoJSON());n=e?this.newTriangle({id:e.id,type:o.geojsonTypes.FEATURE,properties:e.properties,geometry:{type:o.geojsonTypes.POLYGON,coordinates:e.getCoordinates()}}):this.newTriangle({type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.POLYGON,coordinates:[[]]}});return this.preSettingStyle(n,t.style||{}),this.addFeature(n),this.clearSelectedFeatures(),i.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.POLYGON),this.setActionableState({trash:!0}),{initiallyFeatures:r,polygon:n,currentVertexPosition:e?2:0}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:o.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};t.onTouchMove=t.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:o.cursors.POINTER})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},t.onStop=function(t){this.updateUIClasses({mouse:o.cursors.NONE}),i.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(o.events.UPDATE,{action:o.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(o.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=o.meta.FEATURE,n(s(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1,e)),3<r&&(i=e.geometry.coordinates[0].length-3,n(s(t.polygon.id,e.geometry.coordinates[0][i],"0."+i,!1,e))),r<=4){var i=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:o.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:i,type:o.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}}},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214}],250:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=t("../lib/double_click_zoom"),o=t("../constants"),s=t("../lib/create_vertex"),t={onSetup:function(t){t=t||{};var e=this.newFeature({type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.LINE_STRING,coordinates:[]}});return this.preSettingStyle(e,t.style||{}),this.addFeature(e),this.clearSelectedFeatures(),i.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.LINE),this.setActionableState({trash:!0}),{line:e,currentVertexPosition:0,direction:"forward",startDrawing:!1}}};t.onTouchStart=t.onMouseDown=function(t,e){t.startDrawing=!0,this.map.dragPan.disable()},t.onDrag=function(t,e){this.onDrawing(t,e)},t.onMouseUp=function(t,e){t.startDrawing=!1,this.map.dragPan.enable(),this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.line.id]})},t.clickAnywhere=function(t,e){this.updateUIClasses({mouse:o.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},t.onDrawing=function(t,e){t.startDrawing&&this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEnterKey(e)?this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.line.id]}):r.isEscapeKey(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT))},t.onStop=function(t){i.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?this.map.fire(o.events.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT,{},{silent:!0})))},t.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)},t.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.line.id;if(e.properties.active=r?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!r)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=o.meta.FEATURE,n(s(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],""+("forward"===t.direction?e.geometry.coordinates.length-2:1),!1,e)),n(e))},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214}],251:[function(n,t,e){"use strict";t.exports=["static","simple_select","direct_select","draw_icon","draw_point","draw_polygon","draw_line_string","draw_circle","draw_rectangle","draw_triangle","draw_sector","draw_ellipse","draw_arc","split_polygon","free_drawing","draw_line_arrow","draw_thin_straight_arrow","draw_thin_tail_arrow","draw_attack_arrow","draw_offensive_arrow","draw_offensive_tail_arrow","draw_pincer_attack_arrow","draw_curve_polygon","draw_text"].reduce(function(t,e){return t[e]=n("./"+e),t},{}),t.exports={static:n("./static"),simple_select:n("./simple_select"),direct_select:n("./direct_select"),draw_icon:n("./draw_icon"),draw_point:n("./draw_point"),draw_polygon:n("./draw_polygon"),draw_line_string:n("./draw_line_string"),draw_circle:n("./draw_circle"),draw_rectangle:n("./draw_rectangle"),draw_triangle:n("./draw_triangle"),draw_sector:n("./draw_sector"),draw_ellipse:n("./draw_ellipse"),draw_arc:n("./draw_arc"),split_polygon:n("./split_polygon"),free_drawing:n("./free_drawing"),draw_line_arrow:n("./draw_line_arrow"),draw_thin_straight_arrow:n("./draw_thin_straight_arrow"),draw_thin_tail_arrow:n("./draw_thin_tail_arrow"),draw_attack_arrow:n("./draw_attack_arrow"),draw_offensive_arrow:n("./draw_offensive_arrow"),draw_offensive_tail_arrow:n("./draw_offensive_tail_arrow"),draw_pincer_attack_arrow:n("./draw_pincer_attack_arrow"),draw_curve_polygon:n("./draw_curve_polygon"),draw_text:n("./draw_text")}},{"./direct_select":230,"./draw_arc":231,"./draw_attack_arrow":232,"./draw_circle":233,"./draw_curve_polygon":234,"./draw_ellipse":235,"./draw_icon":236,"./draw_line_arrow":237,"./draw_line_string":238,"./draw_offensive_arrow":239,"./draw_offensive_tail_arrow":240,"./draw_pincer_attack_arrow":241,"./draw_point":242,"./draw_polygon":243,"./draw_rectangle":244,"./draw_sector":245,"./draw_text":246,"./draw_thin_straight_arrow":247,"./draw_thin_tail_arrow":248,"./draw_triangle":249,"./free_drawing":250,"./simple_select":255,"./split_polygon":256,"./static":257}],252:[function(t,e,n){"use strict";t=e.exports=t("./mode_interface_accessors");t.prototype.onSetup=function(){},t.prototype.onDrag=function(){},t.prototype.onClick=function(){},t.prototype.onMouseMove=function(){},t.prototype.onMouseDown=function(){},t.prototype.onMouseUp=function(){},t.prototype.onMouseOut=function(){},t.prototype.onKeyUp=function(){},t.prototype.onKeyDown=function(){},t.prototype.onTouchStart=function(){},t.prototype.onTouchMove=function(){},t.prototype.onTouchEnd=function(){},t.prototype.onTap=function(){},t.prototype.onStop=function(){},t.prototype.onTrash=function(){},t.prototype.onCombineFeature=function(){},t.prototype.onUncombineFeature=function(){},t.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")}},{"./mode_interface_accessors":253}],253:[function(t,e,n){"use strict";var c=t("../constants"),r=t("../lib/features_at"),i=t("../feature_types/point"),o=t("../feature_types/line_string"),s=t("../feature_types/polygon"),a=t("../feature_types/multi_feature"),u=t("../feature_types/circle"),l=t("../feature_types/rectangle"),p=t("../feature_types/triangle"),h=t("../feature_types/sector"),f=t("../feature_types/ellipse"),d=t("../feature_types/arc"),g=t("../feature_types/line_arrow"),y=t("../feature_types/thin_straight_arrow"),_=t("../feature_types/thin_tail_arrow"),m=t("../feature_types/attack_arrow"),v=t("../feature_types/offensive_arrow"),E=t("../feature_types/offensive_tail_arrow"),I=t("../feature_types/pincer_attack_arrow"),x=t("../feature_types/curve_polygon"),b=t("@turf/helpers").point,C=t("@turf/distance").default,w=t("@turf/polygon-to-line").default,S=t("@turf/nearest-point-on-line").default,N=t("@turf/helpers").featureCollection,T=t("@turf/meta").coordEach,e=e.exports=function(t){this.map=t.map,this.drawConfig=JSON.parse(JSON.stringify(t.options||{})),this._ctx=t};e.prototype.setSelected=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this._ctx.store.setSelected(t,e)},e.prototype.setSelectedCoordinates=function(t){var n=this;this._ctx.store.setSelectedCoordinates(t),t.reduce(function(t,e){return void 0===t[e.feature_id]&&(t[e.feature_id]=!0,n._ctx.store.get(e.feature_id).changed()),t},{})},e.prototype.getSelectedCoordinates=function(){return this._ctx.store.getSelectedCoordinates()},e.prototype.getSelected=function(){return this._ctx.store.getSelected()},e.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},e.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},e.prototype.getFeature=function(t){return this._ctx.store.get(t)},e.prototype.select=function(t){return this._ctx.store.select(t)},e.prototype.deselect=function(t){return this._ctx.store.deselect(t)},e.prototype.deleteFeature=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this._ctx.store.delete(t,e)},e.prototype.addFeature=function(t){return this._ctx.store.add(t)},e.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},e.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},e.prototype.setActionableState=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t={trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1};return this._ctx.events.actionable(t)},e.prototype.changeMode=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this._ctx.events.changeMode(t,e,n)},e.prototype.preSettingStyle=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return 0<Object.keys(n).length&&(e.properties.custom_style="true",Object.keys(n).forEach(function(t){e.properties[t]=n[t]})),e},e.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},e.prototype.activateUIButton=function(t){return this._ctx.ui.setActiveButton(t)},e.prototype.featuresAt=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"click";if("click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return r[n](t,e,this._ctx)},e.prototype.getAdsorbCoord=function(t,e,n,r){if(!this._ctx.options.adsorbEnabled)return null;if(0===n.length||!r)return null;var i=n.filter(function(t){return t.properties.id&&t.properties.id!==r||t.properties.parent&&t.properties.parent!==r});if(0===i.length)return null;var o=null;[c.geojsonTypes.POLYGON,c.geojsonTypes.MULTI_POLYGON].includes(i[0].geometry.type)?o=w(i[0]):[c.geojsonTypes.LINE_STRING,c.geojsonTypes.MULTI_LINE_STRING].includes(i[0].geometry.type)&&(o=i[0]);n=i.filter(function(t){return[c.geojsonTypes.POINT].includes(t.geometry.type)});if(0<n.length){if(1===n.length)return n[0].geometry.coordinates;var s=N(n),a=this.map.unproject([e.point.x,e.point.y]),u=new Map;T(s,function(t){var e=C(b([a.lng,a.lat]),b(t),{units:"miles"});u.set(e,t)});s=Math.min.apply(Math,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(u.keys()));return u.get(s)||null}s=this._ctx.options.adsorbBuffer||this._ctx.options.clickBuffer,o=o?S(o,b([e.lngLat.lng,e.lngLat.lat]),{units:"miles"}):null;if(e.point&&o&&[c.geojsonTypes.POLYGON,c.geojsonTypes.MULTI_POLYGON].includes(i[0].geometry.type)){i=this.map.unproject([e.point.x,e.point.y]),s=this.map.unproject([e.point.x+s,e.point.y+s]),s=C(b([i.lng,i.lat]),b([s.lng,s.lat]),{units:"miles"});if(o.properties.dist>s)return null}return o?o.geometry.coordinates:null},e.prototype.newFeature=function(t){var e=t.geometry.type;return new(e===c.geojsonTypes.POINT?i:e===c.geojsonTypes.LINE_STRING?o:e===c.geojsonTypes.POLYGON?s:a)(this._ctx,t)},e.prototype.newCircle=function(t){return new u(this._ctx,t)},e.prototype.newRectangle=function(t){return new l(this._ctx,t)},e.prototype.newTriangle=function(t){return new p(this._ctx,t)},e.prototype.newSector=function(t){return new h(this._ctx,t)},e.prototype.newEllipse=function(t){return new f(this._ctx,t)},e.prototype.newArc=function(t){return new d(this._ctx,t)},e.prototype.newLineArrow=function(t){return new g(this._ctx,t)},e.prototype.newThinStraightArrow=function(t){return new y(this._ctx,t)},e.prototype.newThinTailArrow=function(t){return new _(this._ctx,t)},e.prototype.newAttackArrow=function(t){return new m(this._ctx,t)},e.prototype.newOffensiveArrow=function(t){return new v(this._ctx,t)},e.prototype.newOffensiveTailArrow=function(t){return new E(this._ctx,t)},e.prototype.newPincerAttackArrow=function(t){return new I(this._ctx,t)},e.prototype.newCurvePolygon=function(t){return new x(this._ctx,t)},e.prototype.isInstanceOf=function(t,e){if(t===c.geojsonTypes.POINT)return e instanceof i;if(t===c.geojsonTypes.LINE_STRING)return e instanceof o;if(t===c.geojsonTypes.POLYGON)return e instanceof s;if("MultiFeature"===t)return e instanceof a;throw new Error("Unknown feature class: "+t)},e.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)}},{"../constants":170,"../feature_types/arc":188,"../feature_types/attack_arrow":189,"../feature_types/circle":190,"../feature_types/curve_polygon":191,"../feature_types/ellipse":192,"../feature_types/line_arrow":194,"../feature_types/line_string":195,"../feature_types/multi_feature":196,"../feature_types/offensive_arrow":197,"../feature_types/offensive_tail_arrow":198,"../feature_types/pincer_attack_arrow":199,"../feature_types/point":200,"../feature_types/polygon":201,"../feature_types/rectangle":202,"../feature_types/sector":203,"../feature_types/thin_straight_arrow":204,"../feature_types/thin_tail_arrow":205,"../feature_types/triangle":206,"../lib/features_at":216,"@turf/distance":20,"@turf/helpers":21,"@turf/meta":31,"@turf/nearest-point-on-line":32,"@turf/polygon-to-line":33}],254:[function(t,e,n){"use strict";var a=t("./mode_interface");e.exports=function(o){var s=Object.keys(o);return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={},r=s.reduce(function(t,e){return t[e]=o[e],t},new a(t));function i(e){return function(t){r[e](n,t)}}return{start:function(){n=r.onSetup(e),this.on("drag",function(){return!0},i("onDrag")),this.on("click",function(){return!0},i("onClick")),this.on("mousemove",function(){return!0},i("onMouseMove")),this.on("mousedown",function(){return!0},i("onMouseDown")),this.on("mouseup",function(){return!0},i("onMouseUp")),this.on("mouseout",function(){return!0},i("onMouseOut")),this.on("keyup",function(){return!0},i("onKeyUp")),this.on("keydown",function(){return!0},i("onKeyDown")),this.on("touchstart",function(){return!0},i("onTouchStart")),this.on("touchmove",function(){return!0},i("onTouchMove")),this.on("touchend",function(){return!0},i("onTouchEnd")),this.on("tap",function(){return!0},i("onTap"))},stop:function(){r.onStop(n)},trash:function(){r.onTrash(n)},combineFeatures:function(){r.onCombineFeatures&&r.onCombineFeatures(n)},uncombineFeatures:function(){r.onUncombineFeatures&&r.onUncombineFeatures(n)},unionPolygon:function(){r.onUnionPolygon&&r.onUnionPolygon(n)},unionLine:function(){r.onUnionLine&&r.onUnionLine(n)},curveLine:function(){r.onCurveLine&&r.onCurveLine(n)},splitLine:function(){r.onSplitLine&&r.onSplitLine(n)},render:function(t,e){r.toDisplayFeatures(n,t,e)}}}}},{"./mode_interface":252}],255:[function(t,e,n){"use strict";var r=t("xtend"),a=t("../lib/common_selectors"),s=t("../lib/mouse_event_point"),i=t("../lib/create_supplementary_points"),o=t("../lib/string_set"),u=t("../lib/double_click_zoom"),c=t("../lib/move_features"),w=t("../constants"),S=t("@turf/intersect").default,N=t("@turf/line-intersect").default,T=t("@turf/union").default,L=t("@turf/polygon-to-line").default,O=t("@turf/line-to-polygon").default,l=t("@turf/bezier-spline").default,g=t("../edit/util/is_same_point"),t={onSetup:function(t){var e=this,t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoveing:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[],initiallySelectedFeatures:[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(function(t){return void 0!==e.getFeature(t)})),t.initiallySelectedFeatures=this.getSelected().map(function(t){return t.toGeoJSON()}),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t},fireUpdate:function(t){this.map.fire(w.events.UPDATE,{action:w.updateActions.MOVE,prevFeatures:t.initiallySelectedFeatures,features:this.getSelected().map(function(t){return t.toGeoJSON()})}),t.initiallySelectedFeatures=this.getSelected().map(function(t){return t.toGeoJSON()})},fireActionable:function(){var e,n=this,t=this.getSelected(),r=t.filter(function(t){return n.isInstanceOf("MultiFeature",t)}),i=!1;1<t.length&&(i=!0,e=t[0].type.replace("Multi",""),t.forEach(function(t){t.type.replace("Multi","")!==e&&(i=!1)}));r=0<r.length,t=0<t.length;this.setActionableState({combineFeatures:i,uncombineFeatures:r,trash:t})},getUniqueIds:function(t){return t.length?t.map(function(t){return t.properties.id}).filter(function(t){return void 0!==t}).reduce(function(t,e){return t.add(e),t},new o).values():[]},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){u.enable(this)},onMouseUp:function(t,e){if(a.true(e))return this.stopExtendedInteractions(t)},onMouseMove:function(t){return this.stopExtendedInteractions(t)},onMouseOut:function(t){if(t.dragMoving)return this.fireUpdate(t)}};t.onTap=t.onClick=function(t,e){return a.noTarget(e)?this.clickAnywhere(t,e):a.isOfMetaType(w.meta.VERTEX)(e)?this.clickOnVertex(t,e):a.isFeature(e)?this.clickOnFeature(t,e):void 0},t.clickAnywhere=function(t){var e=this,n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),this.map.fire(w.events.UNSELECTED,{featureIds:n}),n.forEach(function(t){return e.doRender(t)})),u.enable(this),this.stopExtendedInteractions(t)},t.clickOnVertex=function(t,e){var n=this.getSelectedIds(),r=1===n.length?this.getFeature(n[0]):null,n=r&&r.properties?r.properties:{};if(r&&"circle"===n.feature_type&&n.radius&&n.center)return this.changeMode(w.modes.DRAW_CIRCLE);if(r&&"triangle"===n.feature_type&&n.start&&n.middle&&n.end)return this.changeMode(w.modes.DRAW_TRIANGLE);if(r&&"rectangle"===n.feature_type&&n.start&&n.end)return this.changeMode(w.modes.DRAW_RECTANGLE);if(r&&"sector"===n.feature_type&&n.center&&n.start&&n.end)return this.changeMode(w.modes.DRAW_SECTOR);if(r&&"ellipse"===n.feature_type&&n.first&&n.second&&n.end)return this.changeMode(w.modes.DRAW_ELLIPSE);if(r&&"arc"===n.feature_type&&n.first&&n.second&&n.end)return this.changeMode(w.modes.DRAW_ARC);if(r&&"line_arrow"===n.feature_type&&n.start&&n.end)return this.changeMode(w.modes.DRAW_LINE_ARROW);if(r&&"thin_straight_arrow"===n.feature_type&&n.start&&n.end)return this.changeMode(w.modes.DRAW_THIN_STRAIGHT_ARROW);if(r&&"thin_tail_arrow"===n.feature_type&&n.start&&n.end)return this.changeMode(w.modes.DRAW_THIN_TAIL_ARROW);if(r&&"attack_arrow"===n.feature_type&&n.start&&n.end)return this.changeMode(w.modes.DRAW_ATTACK_ARROW);if(r&&"offensive_arrow"===n.feature_type&&n.start&&n.middle&&n.end)return this.changeMode(w.modes.DRAW_OFFENSIVE_ARROW);if(r&&"offensive_tail_arrow"===n.feature_type&&n.start&&n.middle&&n.end)return this.changeMode(w.modes.DRAW_OFFENSIVE_TAIL_ARROW);if(r&&"pincer_attack_arrow"===n.feature_type&&n.start&&n.middle&&n.end){r=r.getCoordinate(e.featureTarget.properties.coord_path);if(!(r&&n.arrow1&&r[0]===n.arrow1[0]&&r[1]===n.arrow1[1]||r&&n.arrow2&&r[0]===n.arrow2[0]&&r[1]===n.arrow2[1]))return this.changeMode(w.modes.DRAW_PINCER_ATTACK_ARROW)}this.changeMode(w.modes.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:w.cursors.MOVE})},t.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat,t.initiallySelectedFeatures=this.getSelected().map(function(t){return t.toGeoJSON()})},t.clickOnFeature=function(t,e){var n=this;u.disable(this),this.stopExtendedInteractions(t);var r=a.isShiftDown(e),i=this.getSelectedIds(),o=e.featureTarget.properties.id,s=this.isSelected(o);if(!r&&s&&this.getFeature(o).type!==w.geojsonTypes.POINT){t=1===i.length?this.getFeature(i[0]):null,e=t&&t.properties?t.properties:{};return t&&"circle"===e.feature_type&&e.radius&&e.center?this.changeMode(w.modes.DRAW_CIRCLE):t&&"triangle"===e.feature_type&&e.start&&e.middle&&e.end?this.changeMode(w.modes.DRAW_TRIANGLE):t&&"rectangle"===e.feature_type&&e.start&&e.end?this.changeMode(w.modes.DRAW_RECTANGLE):t&&"sector"===e.feature_type&&e.center&&e.start&&e.end?this.changeMode(w.modes.DRAW_SECTOR):t&&"ellipse"===e.feature_type&&e.first&&e.second&&e.end?this.changeMode(w.modes.DRAW_ELLIPSE):t&&"arc"===e.feature_type&&e.first&&e.second&&e.end?this.changeMode(w.modes.DRAW_ARC):t&&"line_arrow"===e.feature_type&&e.start&&e.end?this.changeMode(w.modes.DRAW_LINE_ARROW):t&&"thin_straight_arrow"===e.feature_type&&e.start&&e.end?this.changeMode(w.modes.DRAW_THIN_STRAIGHT_ARROW):t&&"thin_tail_arrow"===e.feature_type&&e.start&&e.end?this.changeMode(w.modes.DRAW_THIN_TAIL_ARROW):t&&"attack_arrow"===e.feature_type&&e.start&&e.end?this.changeMode(w.modes.DRAW_ATTACK_ARROW):t&&"offensive_arrow"===e.feature_type&&e.start&&e.middle&&e.end?this.changeMode(w.modes.DRAW_OFFENSIVE_ARROW):t&&"offensive_tail_arrow"===e.feature_type&&e.start&&e.middle&&e.end?this.changeMode(w.modes.DRAW_OFFENSIVE_TAIL_ARROW):t&&"pincer_attack_arrow"===e.feature_type&&e.start&&e.middle&&e.end?this.changeMode(w.modes.DRAW_PINCER_ATTACK_ARROW):this.changeMode(w.modes.DIRECT_SELECT,{featureId:o})}s&&r?(this.deselect(o),this.updateUIClasses({mouse:w.cursors.POINTER}),1===i.length&&u.enable(this)):!s&&r?(this.select(o),this.updateUIClasses({mouse:w.cursors.MOVE})):s||r||(i.forEach(function(t){return n.doRender(t)}),this.setSelected(o),this.updateUIClasses({mouse:w.cursors.MOVE})),this.map.fire(w.events.SELECTED,{featureIds:this.getSelectedIds()}),this.doRender(o)},t.onMouseDown=function(t,e){return a.isActiveFeature(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&a.isShiftMousedown(e)?this.startBoxSelect(t,e):void 0},t.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=s(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},t.onTouchStart=function(t,e){if(a.isActiveFeature(e))return this.startOnActiveFeature(t,e)},t.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},t.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:w.cursors.ADD}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(w.classes.BOX_SELECT),this.map.getContainer().appendChild(t.boxSelectElement));var n=s(e.originalEvent,this.map.getContainer()),r=Math.min(t.boxSelectStartLocation.x,n.x),i=Math.max(t.boxSelectStartLocation.x,n.x),o=Math.min(t.boxSelectStartLocation.y,n.y),e=Math.max(t.boxSelectStartLocation.y,n.y),n="translate("+r+"px, "+o+"px)";t.boxSelectElement.style.transform=n,t.boxSelectElement.style.WebkitTransform=n,t.boxSelectElement.style.width=i-r+"px",t.boxSelectElement.style.height=e-o+"px"},t.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};c(this.getSelected(),n),t.dragMoveLocation=e.lngLat},t.onMouseUp=function(t,e){var n=this;t.dragMoving?this.fireUpdate(t):t.boxSelecting&&(e=[t.boxSelectStartLocation,s(e.originalEvent,this.map.getContainer())],e=this.featuresAt(null,e,"click"),(e=this.getUniqueIds(e).filter(function(t){return!n.isSelected(t)})).length&&(this.select(e),e.forEach(function(t){return n.doRender(t)}),this.updateUIClasses({mouse:w.cursors.MOVE})),this.map.fire(w.events.SELECTED,{featureIds:this.getSelectedIds()})),this.stopExtendedInteractions(t)},t.toDisplayFeatures=function(t,e,n){e.properties.active=this.isSelected(e.properties.id)?w.activeStates.ACTIVE:w.activeStates.INACTIVE,n(e),this.fireActionable(),e.properties.active===w.activeStates.ACTIVE&&e.geometry.type!==w.geojsonTypes.POINT&&i(e).forEach(n)},t.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},t.onCombineFeatures=function(){var t=this.getSelected();if(!(0===t.length||t.length<2)){for(var e,n=[],r=[],i=t[0].type.replace("Multi",""),o=0;o<t.length;o++){var s=t[o];if(s.type.replace("Multi","")!==i)return;s.type.includes("Multi")?s.getCoordinates().forEach(function(t){n.push(t)}):n.push(s.getCoordinates()),r.push(s.toGeoJSON())}1<r.length&&(e=this.newFeature({type:w.geojsonTypes.FEATURE,properties:r[0].properties,geometry:{type:"Multi"+i,coordinates:n}}),this.addFeature(e),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([e.id]),this.map.fire(w.events.COMBINE_FEATURES,{createdFeatures:[e.toGeoJSON()],deletedFeatures:r})),this.fireActionable()}},t.onUncombineFeatures=function(){var n=this,t=this.getSelected();if(0!==t.length){for(var r=[],i=[],o=0;o<t.length;o++)!function(){var e=t[o];n.isInstanceOf("MultiFeature",e)&&(e.getFeatures().forEach(function(t){n.addFeature(t),t.properties=e.properties,r.push(t.toGeoJSON()),n.select([t.id])}),n.deleteFeature(e.id,{silent:!0}),i.push(e.toGeoJSON()))}();1<r.length&&this.map.fire(w.events.UNCOMBINE_FEATURES,{createdFeatures:r,deletedFeatures:i}),this.fireActionable()}},t.onUnionPolygon=function(){var t=this.getSelected();if(2!==t.length)throw new Error("");for(var e=0;e<t.length;e++)if(t[e].type!==w.geojsonTypes.POLYGON)throw new Error("");var n=null,r=t[0].toGeoJSON(),i=t[1].toGeoJSON();try{n=(n=S(r,i))||N(r,i)}catch(t){n=N(r,i)}if(!n)throw new Error("");function l(t,e){return 0===e.length||(e=e[e.length-1],t[0]!==e[0]||t[1]!==e[1])}function o(t,e){var t=L(t),e=L(e),n=t.geometry.coordinates,r=e.geometry.coordinates,i=[];n.forEach(function(e,t){r.some(function(t){return e[0]===t[0]&&e[1]===t[1]})&&i.push(t)});for(var o=!1,s=0,a=0,u=0;u<i.length-1;u++)1!==Math.abs(i[u+1]-i[u])&&(o=!0,s=i[u],(a=i[u+1])<s&&(s=i[u+1],a=i[u]));o||(s=i[0],(a=i[i.length-1])<s&&(s=i[i.length-1],a=i[0]));var c=[];return o?n.forEach(function(t,e){s<=e&&e<=a&&c.push(t)}):(n.forEach(function(t,e){a<=e&&e<n.length&&c.push(t)}),n.forEach(function(t,e){0<=e&&e<=s&&l(t,c)&&c.push(t)})),c}function s(t,e){return t[0]===e[0]&&t[1]===e[1]}var a=null;try{a=T(r,i)}catch(t){var u,c,p,h,f,d,g,y,_=o(r,i),m=o(i,r),v=_[0],E=_[_.length-1],I=m[0],x=m[m.length-1];s(E,I)&&s(v,x)||s(E,x)&&s(v,I)?(_.map(function(t){return t}),m.map(function(t){return t})):s(E,I)&&!s(v,x)?(c=u=-1,_.forEach(function(t,e){s(t,x)&&(u=e)}),m.forEach(function(t,e){s(t,v)&&(c=e)}),-1<c?_=_.slice(c,_.length):-1<u&&(m=m.slice(0,u+1))):s(E,x)&&!s(v,I)?(h=p=-1,_.forEach(function(t,e){s(t,I)&&(h=e)}),m.forEach(function(t,e){s(t,v)&&(p=e)}),-1<p?m=m.slice(p,m.length):-1<h&&(_=_.slice(h,_.length))):(y=g=d=f=-1,_.forEach(function(t,e){s(t,I)&&(g=e),s(t,x)&&(y=e)}),m.forEach(function(t,e){s(t,v)&&(f=e),s(t,E)&&(d=e)}),-1<f&&-1<d?m=m.slice(Math.min(f,d),Math.max(f,d)+1):-1<g&&-1<y&&(_=_.slice(Math.min(g,y),Math.max(g,y)+1)));var b=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(_));if(s(E,I))m.forEach(function(t){l(t,b)&&b.push(t)});else if(s(E,x))for(var C=m.length-1;0<=C;C--)l(m[C],b)&&b.push(m[C]);else m.forEach(function(t){l(t,b)&&b.push(t)});l(v,b)&&b.push(v),a=O({type:w.geojsonTypes.FEATURE,properties:{},geometry:{type:w.geojsonTypes.LINE_STRING,coordinates:b}})}a&&(_=this.newFeature({type:w.geojsonTypes.FEATURE,properties:a.properties,geometry:{type:w.geojsonTypes.POLYGON,coordinates:a.geometry.coordinates}}),this.addFeature(_),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([_.id]),this.map.fire(w.events.REPLACE,{createdFeatures:[_.toGeoJSON()],deletedFeatures:[r,i]})),this.fireActionable()},t.onUnionLine=function(){var t=this.getSelected();if(2!==t.length)throw new Error("");for(var e=0;e<t.length;e++)if(t[e].type!==w.geojsonTypes.LINE_STRING)throw new Error("");var n=t[0].coordinates[0],r=t[0].coordinates[t[0].coordinates.length-1],i=t[1].coordinates[0],o=t[1].coordinates[t[1].coordinates.length-1],s=[];if(g(n,i)){for(var a=t[0].coordinates.length-1;0<=a;a--)s.push(t[0].coordinates[a]);for(var u=0;u<t[1].coordinates.length;u++)s.push(t[1].coordinates[u])}else if(g(n,o)){for(var c=t[0].coordinates.length-1;0<=c;c--)s.push(t[0].coordinates[c]);for(var l=t[1].coordinates.length-1;0<=l;l--)s.push(t[1].coordinates[l])}else if(g(r,i)){for(var p=0;p<t[0].coordinates.length;p++)s.push(t[0].coordinates[p]);for(var h=0;h<t[1].coordinates.length;h++)s.push(t[1].coordinates[h])}else{if(!g(r,o))throw new Error("");for(var f=0;f<t[0].coordinates.length;f++)s.push(t[0].coordinates[f]);for(var d=t[1].coordinates.length-1;0<=d;d--)s.push(t[1].coordinates[d])}0<s.length&&(o=this.newFeature({type:w.geojsonTypes.FEATURE,properties:t[0].properties,geometry:{type:w.geojsonTypes.LINE_STRING,coordinates:s}}),this.addFeature(o),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([o.id]),this.map.fire(w.events.REPLACE,{createdFeatures:[o.toGeoJSON()],deletedFeatures:[t[0].toGeoJSON(),t[1].toGeoJSON()]})),this.fireActionable()},t.onCurveLine=function(){var t=this.getSelected();if(1!==t.length)throw new Error("");if(t[0].type!==w.geojsonTypes.LINE_STRING)throw new Error("");var e=l(t[0].toGeoJSON(),{resolution:5e3,sharpness:.85}),e=this.newFeature(r(e,{id:t[0].id}));this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.addFeature(e),this.setSelected([e.id]),this.map.fire(w.events.UPDATE,{action:w.updateActions.CHANGE_COORDINATES,prevFeatures:[t[0].toGeoJSON()],features:[e.toGeoJSON()]}),this.fireActionable()},t.onSplitLine=function(t){var e=this.getSelected();if(1!==e.length)throw new Error("");if(e[0].type!==w.geojsonTypes.LINE_STRING)throw new Error("");if(1!==this.getSelectedCoordinates().length)throw new Error("")},e.exports=t},{"../constants":170,"../edit/util/is_same_point":186,"../lib/common_selectors":209,"../lib/create_supplementary_points":212,"../lib/double_click_zoom":214,"../lib/mouse_event_point":223,"../lib/move_features":224,"../lib/string_set":226,"@turf/bezier-spline":13,"@turf/intersect":22,"@turf/line-intersect":26,"@turf/line-to-polygon":30,"@turf/polygon-to-line":33,"@turf/union":41,xtend:168}],256:[function(t,e,n){"use strict";var b=t("xtend"),r=t("../lib/common_selectors"),i=t("../lib/double_click_zoom"),C=t("../constants"),o=t("../lib/is_event_at_coordinates"),s=t("../lib/create_vertex"),w=t("@turf/polygon-to-line").default,S=t("@turf/line-to-polygon").default,N=t("@turf/line-intersect").default,T=t("@turf/nearest-point-on-line").default,t={onSetup:function(){var t=this.getSelected();if(0===t.length)throw new Error("");if(1<t.length)throw new Error("");var e=t[0];if(e.type!==C.geojsonTypes.POLYGON)throw new Error("");var n=e.id,t=this.newFeature({type:C.geojsonTypes.FEATURE,properties:{},geometry:{type:C.geojsonTypes.LINE_STRING,coordinates:[]}});return this.addFeature(t),this.setSelected([n]),i.disable(this),this.updateUIClasses({mouse:C.cursors.ADD}),this.setActionableState({trash:!0}),{line:t,selectedPolygon:e,selectedPolygonId:n,currentVertexPosition:0}}};t.splitPolygon=function(t){var e=t.line.toGeoJSON(),n=t.selectedPolygon.toGeoJSON(),r=N(n,e);if(2!==r.features.length)throw this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(C.modes.SIMPLE_SELECT,{featureIds:[t.selectedPolygonId]}),new Error("");var n=w(n),i=T(e,r.features[0],{units:"miles"}),o=T(e,r.features[1],{units:"miles"}),s=T(n,r.features[0],{units:"miles"}),a=T(n,r.features[1],{units:"miles"});i.geometry.coordinates=r.features[0].geometry.coordinates,o.geometry.coordinates=r.features[1].geometry.coordinates,s.geometry.coordinates=r.features[0].geometry.coordinates,a.geometry.coordinates=r.features[1].geometry.coordinates;function u(t,e){return 0===e.length||(e=e[e.length-1],t[0]!==e[0]||t[1]!==e[1])}var c=n.geometry.coordinates,l=e.geometry.coordinates,p=[],h=[];if(p.push(s.geometry.coordinates),s.properties.index<=a.properties.index)for(var f=s.properties.index+1;f<a.properties.index+1;f++)u(c[f],p)&&p.push(c[f]);else for(var d=s.properties.index;d>a.properties.index;d--)u(c[d],p)&&p.push(c[d]);if(u(a.geometry.coordinates,p)&&p.push(a.geometry.coordinates),u(o.geometry.coordinates,p)&&p.push(o.geometry.coordinates),i.properties.index<=o.properties.index)for(var g=o.properties.index;g>i.properties.index;g--)u(l[g],p)&&p.push(l[g]);else for(var y=o.properties.index+1;y<i.properties.index+1;y++)u(l[y],p)&&p.push(l[y]);if(u(i.geometry.coordinates,p)&&p.push(i.geometry.coordinates),u(s.geometry.coordinates,p)&&p.push(s.geometry.coordinates),h.push(i.geometry.coordinates),i.properties.index<=o.properties.index)for(var _=i.properties.index+1;_<o.properties.index+1;_++)u(l[_],h)&&h.push(l[_]);else for(var m=i.properties.index;m>o.properties.index;m--)u(l[m],h)&&h.push(l[m]);if(u(o.geometry.coordinates,h)&&h.push(o.geometry.coordinates),u(a.geometry.coordinates,h)&&h.push(a.geometry.coordinates),s.properties.index<=a.properties.index){for(var v=a.properties.index+1;v<c.length;v++)u(c[v],h)&&h.push(c[v]);for(var E=0;E<s.properties.index+1;E++)u(c[E],h)&&h.push(c[E])}else{for(var I=a.properties.index;0<=I;I--)u(c[I],h)&&h.push(c[I]);for(var x=c.length-1;x>s.properties.index;x--)u(c[x],h)&&h.push(c[x])}u(s.geometry.coordinates,h)&&h.push(s.geometry.coordinates),u(i.geometry.coordinates,h)&&h.push(i.geometry.coordinates);n=S({type:C.geojsonTypes.FEATURE,properties:{},geometry:{type:C.geojsonTypes.LINE_STRING,coordinates:p}}),e=S({type:C.geojsonTypes.FEATURE,properties:{},geometry:{type:C.geojsonTypes.LINE_STRING,coordinates:h}}),n=this.newFeature(b({geometry:n.geometry},{properties:t.selectedPolygon.properties})),e=this.newFeature(b({geometry:e.geometry},{properties:t.selectedPolygon.properties}));this.addFeature(n),this.addFeature(e),this.deleteFeature(t.selectedPolygon.id,{silent:!0}),this.deleteFeature([t.line.id],{silent:!0}),this.map.fire(C.events.REPLACE,{createdFeatures:[n.toGeoJSON(),e.toGeoJSON()],deletedFeatures:[t.selectedPolygon.toGeoJSON()]}),this.changeMode(C.modes.SIMPLE_SELECT,{featureIds:[n.id,e.id]})},t.clickAnywhere=function(t,e){0<t.currentVertexPosition&&o(e,t.line.coordinates[t.currentVertexPosition-1])?this.splitPolygon(t):(this.setSelected([t.selectedPolygonId]),this.updateUIClasses({mouse:C.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++)},t.clickOnVertex=function(t){this.splitPolygon(t)},t.onMouseMove=function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),this.updateUIClasses({mouse:C.cursors.ADD})},t.onTap=t.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},t.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(C.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.splitPolygon(t)},t.onStop=function(t){this.updateUIClasses({mouse:C.cursors.NONE}),i.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?this.splitPolygon(t):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(C.modes.SIMPLE_SELECT,{},{silent:!0})))},t.toDisplayFeatures=function(t,e,n){if(this.isSelected(e.properties.id)&&e.geometry.type===C.geojsonTypes.POLYGON)return e.properties.active=C.activeStates.ACTIVE,n(e);var r=e.properties.id===t.line.id;if(e.properties.active=r?C.activeStates.ACTIVE:C.activeStates.INACTIVE,!r)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=C.meta.FEATURE,3<=e.geometry.coordinates.length&&n(s(t.line.id,e.geometry.coordinates[e.geometry.coordinates.length-2],""+(e.geometry.coordinates.length-2),!1,e)),n(e))},t.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(C.modes.SIMPLE_SELECT)},e.exports=t},{"../constants":170,"../lib/common_selectors":209,"../lib/create_vertex":213,"../lib/double_click_zoom":214,"../lib/is_event_at_coordinates":219,"@turf/line-intersect":26,"@turf/line-to-polygon":30,"@turf/nearest-point-on-line":32,"@turf/polygon-to-line":33,xtend:168}],257:[function(t,e,n){"use strict";var r={onSetup:function(){return this.setActionableState(),{}},toDisplayFeatures:function(t,e,n){n(e)}};e.exports=r},{}],258:[function(t,e,n){"use strict";var r=t("xtend"),i=t("./constants"),o=t("./lib/change_style_theme"),s={defaultMode:i.modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:t("./edit/theme"),userStyles:{},modes:t("./modes"),controls:{},userProperties:!0,showButtons:!0,drawEnabled:!0,adsorbEnabled:!1,adsorbBuffer:5,maxZoom:i.MAXZOOM,minZoom:i.MINZOOM},a={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},u={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function c(t,e){return t.map(function(t){return t.source?t:r(t,{id:t.id+"."+e,source:"hot"===e?i.sources.HOT:i.sources.COLD})})}e.exports=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=r(t);return t.controls||(e.controls={}),!1===t.displayControlsDefault?e.controls=r(u,t.controls):e.controls=r(a,t.controls),e=r(s,e),t.userStyles&&(e.styles=o(t.userStyles,e.styles)),e.styles=c(e.styles,"cold").concat(c(e.styles,"hot")),e}},{"./constants":170,"./edit/theme":178,"./lib/change_style_theme":208,"./modes":251,xtend:168}],259:[function(t,e,n){"use strict";var c=t("./constants");e.exports=function(){var n=this;if(!(n.ctx.map&&void 0!==n.ctx.map.getSource(c.sources.HOT)))return u();var r=n.ctx.events.currentModeName();n.ctx.ui.queueMapClasses({mode:r});var e=[],t=[],t=n.isDirty?n.getAllIds():(e=n.getChangedIds().filter(function(t){return void 0!==n.get(t)}),n.sources.hot.filter(function(t){return t.properties.id&&-1===e.indexOf(t.properties.id)&&void 0!==n.get(t.properties.id)}).map(function(t){return t.properties.id}));n.sources.hot=[];var i=n.sources.cold.length;n.sources.cold=n.isDirty?[]:n.sources.cold.filter(function(t){t=t.properties.id||t.properties.parent;return-1===e.indexOf(t)});var o,i=i!==n.sources.cold.length||0<t.length;function s(t,e){t=n.get(t).internal(r);n.ctx.events.currentModeRender(t,function(t){n.sources[e].push(t)})}function a(t,e){var t="cold"===t?c.sources.POLYGON_LINE_COLD:c.sources.POLYGON_LINE_HOT,e=JSON.parse(JSON.stringify(e)),r={type:c.geojsonTypes.FEATURE_COLLECTION,features:[]};e&&e.length&&((e=e.filter(function(t){t=t.properties;return t.hasOwnProperty("user_fillOutlineWidth")||t.hasOwnProperty("user_fillOutlineDasharray")||t.hasOwnProperty("user_fillOutlineColor")||t.hasOwnProperty("user_fillOutlineOpacity")})).length&&e.forEach(function(n){"Polygon"===n.geometry.type&&r.features.push({type:"Feature",properties:n.properties,geometry:{type:"LineString",coordinates:n.geometry.coordinates[0]}}),"MultiPolygon"===n.geometry.type&&n.geometry.coordinates[0].forEach(function(t,e){r.features.push({type:"Feature",properties:n.properties,geometry:{type:"LineString",coordinates:n.geometry.coordinates[0][e]}})})})),n.ctx.map.getSource(t).setData(r)}function u(){n.isDirty=!1,n.clearChangedIds()}e.forEach(function(t){return s(t,"hot")}),t.forEach(function(t){return s(t,"cold")}),i&&(n.ctx.map.getSource(c.sources.COLD).setData({type:c.geojsonTypes.FEATURE_COLLECTION,features:n.sources.cold}),a("cold",n.sources.cold)),n.ctx.map.getSource(c.sources.HOT).setData({type:c.geojsonTypes.FEATURE_COLLECTION,features:n.sources.hot}),a("hot",n.sources.hot),n._emitSelectionChange&&(n.ctx.map.fire(c.events.SELECTION_CHANGE,{features:n.getSelected().map(function(t){return t.toGeoJSON()}),points:n.getSelectedCoordinates().map(function(t){return{type:c.geojsonTypes.FEATURE,properties:{},geometry:{type:c.geojsonTypes.POINT,coordinates:t.coordinates}}})}),n._emitSelectionChange=!1),n._deletedFeaturesToEmit.length&&(o=n._deletedFeaturesToEmit.map(function(t){return t.toGeoJSON()}),n._deletedFeaturesToEmit=[],n.ctx.map.fire(c.events.DELETE,{features:o})),0<n.sources.hot.length&&(o=[],o=0<n.getSelected().length?n.getSelected().map(function(t){return t.toGeoJSON()}):n.sources.hot.map(function(t){return JSON.parse(JSON.stringify(t))}),n.ctx.map.fire(c.events.SELECTION_MOVE_CHANGE,{features:o,points:n.getSelectedCoordinates().map(function(t){return{type:c.geojsonTypes.FEATURE,properties:{},geometry:{type:c.geojsonTypes.POINT,coordinates:t.coordinates}}})})),n.ctx.map.fire(c.events.RENDER,{}),u()}},{"./constants":170}],260:[function(t,e,n){"use strict";var s=t("./events"),a=t("./store"),u=t("./ui"),c=t("./constants");e.exports=function(r){var i=null,o={onRemove:function(){return o.removeLayers(),r.store.restoreMapConfig(),r.ui.removeButtons(),r.events.removeEventListeners(),r.map=null,r.container=null,r.store=null,i&&i.parentNode&&i.parentNode.removeChild(i),i=null,this},onAdd:function(t){r.map=t,r.events=s(r),r.ui=u(r),r.container=t.getContainer(),r.store=new a(r),i=r.ui.addButtons(),r.options.boxSelect&&(t.boxZoom.disable(),t.dragPan.disable(),t.dragPan.enable());function e(){t.off("load",e),clearInterval(n),o.addLayers(),r.store.storeMapConfig(),r.events.addEventListeners()}var n=null;return t.loaded()?e():(t.on("load",e),n=setInterval(function(){t.loaded()&&e()},16)),r.events.start(),i},addLayers:function(){r.map.addSource(c.sources.COLD,{data:{type:c.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson",maxzoom:r.options.maxZoom,minzoom:r.options.minZoom}),r.map.addSource(c.sources.HOT,{data:{type:c.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson",maxzoom:r.options.maxZoom,minzoom:r.options.minZoom}),r.map.addSource(c.sources.POLYGON_LINE_COLD,{data:{type:c.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson",maxzoom:r.options.maxZoom,minzoom:r.options.minZoom}),r.map.addSource(c.sources.POLYGON_LINE_HOT,{data:{type:c.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson",maxzoom:r.options.maxZoom,minzoom:r.options.minZoom}),r.options.styles.forEach(function(t){-1<t.id.indexOf("gl-draw-polygon-stroke-inactive")&&"line"===t.type&&(-1<t.id.indexOf("cold")?t.source=c.sources.POLYGON_LINE_COLD:-1<t.id.indexOf("hot")&&(t.source=c.sources.POLYGON_LINE_HOT)),t.maxZoom=r.options.maxZoom,t.minZoom=r.options.minZoom,r.map.addLayer(t)}),r.store.render()},removeLayers:function(){r.options.styles.forEach(function(t){r.map.removeLayer(t.id)}),r.map.removeSource(c.sources.COLD),r.map.removeSource(c.sources.HOT),r.map.removeSource(c.sources.POLYGON_LINE_COLD),r.map.removeSource(c.sources.POLYGON_LINE_HOT)}};return r.setup=o}},{"./constants":170,"./events":187,"./store":261,"./ui":262}],261:[function(t,e,n){"use strict";var r=t("./lib/throttle"),i=t("./lib/to_dense_array"),o=t("./lib/string_set"),s=t("./render"),a=t("./constants").interactions,e=e.exports=function(t){this._features={},this._featureIds=new o,this._selectedFeatureIds=new o,this._selectedCoordinates=[],this._changedFeatureIds=new o,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=r(s,16,this),this.isDirty=!1};function u(t){var e=this,n=this._selectedCoordinates.filter(function(t){return e._selectedFeatureIds.has(t.feature_id)});this._selectedCoordinates.length===n.length||t.silent||(this._emitSelectionChange=!0),this._selectedCoordinates=n}e.prototype.createRenderBatch=function(){var t=this,e=this.render,n=0;return this.render=function(){n++},function(){t.render=e,0<n&&t.render()}},e.prototype.setDirty=function(){return this.isDirty=!0,this},e.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},e.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},e.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},e.prototype.getAllIds=function(){return this._featureIds.values()},e.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},e.prototype.delete=function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return i(t).forEach(function(t){e._featureIds.has(t)&&(e._featureIds.delete(t),e._selectedFeatureIds.delete(t),n.silent||-1===e._deletedFeaturesToEmit.indexOf(e._features[t])&&e._deletedFeaturesToEmit.push(e._features[t]),delete e._features[t],e.isDirty=!0)}),u.call(this,n),this},e.prototype.get=function(t){return this._features[t]},e.prototype.getAll=function(){var e=this;return Object.keys(this._features).map(function(t){return e._features[t]})},e.prototype.select=function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return i(t).forEach(function(t){e._selectedFeatureIds.has(t)||(e._selectedFeatureIds.add(t),e._changedFeatureIds.add(t),n.silent||(e._emitSelectionChange=!0))}),this},e.prototype.deselect=function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return i(t).forEach(function(t){e._selectedFeatureIds.has(t)&&(e._selectedFeatureIds.delete(t),e._changedFeatureIds.add(t),n.silent||(e._emitSelectionChange=!0))}),u.call(this,n),this},e.prototype.clearSelected=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},e.prototype.setSelected=function(e){var n=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e=i(e),this.deselect(this._selectedFeatureIds.values().filter(function(t){return-1===e.indexOf(t)}),{silent:t.silent}),this.select(e.filter(function(t){return!n._selectedFeatureIds.has(t)}),{silent:t.silent}),this},e.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},e.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},e.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},e.prototype.getSelected=function(){var e=this;return this._selectedFeatureIds.values().map(function(t){return e.get(t)})},e.prototype.getSelectedCoordinates=function(){var e=this;return this._selectedCoordinates.map(function(t){return{coordinates:e.get(t.feature_id).getCoordinate(t.coord_path)}})},e.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},e.prototype.setFeatureProperty=function(t,e,n){this.get(t).setProperty(e,n),this.featureChanged(t)},e.prototype.storeMapConfig=function(){var e=this;a.forEach(function(t){e.ctx.map[t]&&(e._mapInitialConfig[t]=e.ctx.map[t].isEnabled())})},e.prototype.restoreMapConfig=function(){var e=this;Object.keys(this._mapInitialConfig).forEach(function(t){e._mapInitialConfig[t]?e.ctx.map[t].enable():e.ctx.map[t].disable()})},e.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]}},{"./constants":170,"./lib/string_set":226,"./lib/throttle":228,"./lib/to_dense_array":229,"./render":259}],262:[function(t,e,n){"use strict";var l=t("xtend"),p=t("./constants"),h=["mode","feature","mouse"];e.exports=function(r){var n={},i=null,o={mode:null,feature:null,mouse:null},s={mode:null,feature:null,mouse:null};function a(e,t){var n=1<arguments.length&&void 0!==t?t:{},t=document.createElement("button");return t.className=p.classes.CONTROL_BUTTON+" "+n.className,t.setAttribute("title",n.title),n.container.appendChild(t),t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.target!==i?(c(e),n.onActivate()):u()},!0),t}function u(){i&&(i.classList.remove(p.classes.ACTIVE_BUTTON),i=null)}function c(t){u();var e=n[t];e&&e&&"trash"!==t&&(e.classList.add(p.classes.ACTIVE_BUTTON),i=e)}return{setActiveButton:c,queueMapClasses:function(t){s=l(s,t)},updateMapClasses:function(){var e,n;r.container&&(e=[],n=[],h.forEach(function(t){s[t]!==o[t]&&(e.push(t+"-"+o[t]),null!==s[t]&&n.push(t+"-"+s[t]))}),0<e.length&&r.container.classList.remove.apply(r.container.classList,e),0<n.length&&r.container.classList.add.apply(r.container.classList,n),o=l(o,s))},addButtons:function(){var t=r.options.controls,e=document.createElement("div");return r.options.showButtons||(e.style.visibility="hidden"),e.className=p.classes.CONTROL_GROUP+" "+p.classes.CONTROL_BASE,t&&(t[p.types.LINE]&&(n[p.types.LINE]=a(p.types.LINE,{container:e,className:p.classes.CONTROL_BUTTON_LINE,title:"LineString tool "+(r.options.keybindings?"(l)":""),onActivate:function(){return r.events.changeMode(p.modes.DRAW_LINE_STRING)}})),t[p.types.POLYGON]&&(n[p.types.POLYGON]=a(p.types.POLYGON,{container:e,className:p.classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(r.options.keybindings?"(p)":""),onActivate:function(){return r.events.changeMode(p.modes.DRAW_POLYGON)}})),t[p.types.POINT]&&(n[p.types.POINT]=a(p.types.POINT,{container:e,className:p.classes.CONTROL_BUTTON_POINT,title:"Marker tool "+(r.options.keybindings?"(m)":""),onActivate:function(){return r.events.changeMode(p.modes.DRAW_POINT)}})),t.trash&&(n.trash=a("trash",{container:e,className:p.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){r.events.trash()}})),t.combine_features&&(n.combine_features=a("combineFeatures",{container:e,className:p.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){r.events.combineFeatures()}})),t.uncombine_features&&(n.uncombine_features=a("uncombineFeatures",{container:e,className:p.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){r.events.uncombineFeatures()}}))),e},removeButtons:function(){Object.keys(n).forEach(function(t){var e=n[t];e.parentNode&&e.parentNode.removeChild(e),delete n[t]})}}}},{"./constants":170,xtend:168}]},{},[177])(177)});
